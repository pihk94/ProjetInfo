<!DOCTYPE html>
<!-- saved from url=(0145)https://blog.quantinsti.com/optimal-portfolio-construction-machine-learning/?fbclid=IwAR3qIUNFX9I-RaeefUokHS-OdM2uMvnsqn49ErN05pQybtU5EM68DH5P_iQ -->
<html lang="en"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme-color" content="#92c94a">

  <title>Optimal Portfolio Construction Using Machine Learning</title>

  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="shortcut icon" href="https://blog.quantinsti.com/favicon.png">
  <link href="./Optimal Portfolio Construction Using Machine Learning_files/css" type="text/css" as="style" onload="this.rel=&#39;stylesheet&#39;">

  <style type="text/css">
    @media screen and (max-width:400px){@-ms-viewport{width:320px}}.clear{clear:both;display:block;overflow:hidden;visibility:hidden;width:0;height:0}.clearfix:after,.clearfix:before,.grid-100:after,.grid-100:before,.grid-10:after,.grid-10:before,.grid-15:after,.grid-15:before,.grid-20:after,.grid-20:before,.grid-25:after,.grid-25:before,.grid-30:after,.grid-30:before,.grid-33:after,.grid-33:before,.grid-35:after,.grid-35:before,.grid-40:after,.grid-40:before,.grid-45:after,.grid-45:before,.grid-50:after,.grid-50:before,.grid-55:after,.grid-55:before,.grid-5:after,.grid-5:before,.grid-60:after,.grid-60:before,.grid-65:after,.grid-65:before,.grid-66:after,.grid-66:before,.grid-70:after,.grid-70:before,.grid-75:after,.grid-75:before,.grid-80:after,.grid-80:before,.grid-85:after,.grid-85:before,.grid-90:after,.grid-90:before,.grid-95:after,.grid-95:before,.grid-container:after,.grid-container:before,.mobile-grid-100:after,.mobile-grid-100:before,.mobile-grid-10:after,.mobile-grid-10:before,.mobile-grid-15:after,.mobile-grid-15:before,.mobile-grid-20:after,.mobile-grid-20:before,.mobile-grid-25:after,.mobile-grid-25:before,.mobile-grid-30:after,.mobile-grid-30:before,.mobile-grid-33:after,.mobile-grid-33:before,.mobile-grid-35:after,.mobile-grid-35:before,.mobile-grid-40:after,.mobile-grid-40:before,.mobile-grid-45:after,.mobile-grid-45:before,.mobile-grid-50:after,.mobile-grid-50:before,.mobile-grid-55:after,.mobile-grid-55:before,.mobile-grid-5:after,.mobile-grid-5:before,.mobile-grid-60:after,.mobile-grid-60:before,.mobile-grid-65:after,.mobile-grid-65:before,.mobile-grid-66:after,.mobile-grid-66:before,.mobile-grid-70:after,.mobile-grid-70:before,.mobile-grid-75:after,.mobile-grid-75:before,.mobile-grid-80:after,.mobile-grid-80:before,.mobile-grid-85:after,.mobile-grid-85:before,.mobile-grid-90:after,.mobile-grid-90:before,.mobile-grid-95:after,.mobile-grid-95:before,.tablet-grid-100:after,.tablet-grid-100:before,.tablet-grid-10:after,.tablet-grid-10:before,.tablet-grid-15:after,.tablet-grid-15:before,.tablet-grid-20:after,.tablet-grid-20:before,.tablet-grid-25:after,.tablet-grid-25:before,.tablet-grid-30:after,.tablet-grid-30:before,.tablet-grid-33:after,.tablet-grid-33:before,.tablet-grid-35:after,.tablet-grid-35:before,.tablet-grid-40:after,.tablet-grid-40:before,.tablet-grid-45:after,.tablet-grid-45:before,.tablet-grid-50:after,.tablet-grid-50:before,.tablet-grid-55:after,.tablet-grid-55:before,.tablet-grid-5:after,.tablet-grid-5:before,.tablet-grid-60:after,.tablet-grid-60:before,.tablet-grid-65:after,.tablet-grid-65:before,.tablet-grid-66:after,.tablet-grid-66:before,.tablet-grid-70:after,.tablet-grid-70:before,.tablet-grid-75:after,.tablet-grid-75:before,.tablet-grid-80:after,.tablet-grid-80:before,.tablet-grid-85:after,.tablet-grid-85:before,.tablet-grid-90:after,.tablet-grid-90:before,.tablet-grid-95:after,.tablet-grid-95:before{content:".";display:block;overflow:hidden;visibility:hidden;font-size:0;line-height:0;width:0;height:0}.clearfix:after,.grid-100:after,.grid-10:after,.grid-15:after,.grid-20:after,.grid-25:after,.grid-30:after,.grid-33:after,.grid-35:after,.grid-40:after,.grid-45:after,.grid-50:after,.grid-55:after,.grid-5:after,.grid-60:after,.grid-65:after,.grid-66:after,.grid-70:after,.grid-75:after,.grid-80:after,.grid-85:after,.grid-90:after,.grid-95:after,.grid-container:after,.mobile-grid-100:after,.mobile-grid-10:after,.mobile-grid-15:after,.mobile-grid-20:after,.mobile-grid-25:after,.mobile-grid-30:after,.mobile-grid-33:after,.mobile-grid-35:after,.mobile-grid-40:after,.mobile-grid-45:after,.mobile-grid-50:after,.mobile-grid-55:after,.mobile-grid-5:after,.mobile-grid-60:after,.mobile-grid-65:after,.mobile-grid-66:after,.mobile-grid-70:after,.mobile-grid-75:after,.mobile-grid-80:after,.mobile-grid-85:after,.mobile-grid-90:after,.mobile-grid-95:after,.tablet-grid-100:after,.tablet-grid-10:after,.tablet-grid-15:after,.tablet-grid-20:after,.tablet-grid-25:after,.tablet-grid-30:after,.tablet-grid-33:after,.tablet-grid-35:after,.tablet-grid-40:after,.tablet-grid-45:after,.tablet-grid-50:after,.tablet-grid-55:after,.tablet-grid-5:after,.tablet-grid-60:after,.tablet-grid-65:after,.tablet-grid-66:after,.tablet-grid-70:after,.tablet-grid-75:after,.tablet-grid-80:after,.tablet-grid-85:after,.tablet-grid-90:after,.tablet-grid-95:after{clear:both}.grid-container{margin-left:auto;margin-right:auto;max-width:1200px;padding-left:30px;padding-right:30px}.grid-10,.grid-100,.grid-15,.grid-20,.grid-25,.grid-30,.grid-33,.grid-35,.grid-40,.grid-45,.grid-5,.grid-50,.grid-55,.grid-60,.grid-65,.grid-66,.grid-70,.grid-75,.grid-80,.grid-85,.grid-90,.grid-95,.mobile-grid-10,.mobile-grid-100,.mobile-grid-15,.mobile-grid-20,.mobile-grid-25,.mobile-grid-30,.mobile-grid-33,.mobile-grid-35,.mobile-grid-40,.mobile-grid-45,.mobile-grid-5,.mobile-grid-50,.mobile-grid-55,.mobile-grid-60,.mobile-grid-65,.mobile-grid-66,.mobile-grid-70,.mobile-grid-75,.mobile-grid-80,.mobile-grid-85,.mobile-grid-90,.mobile-grid-95,.tablet-grid-10,.tablet-grid-100,.tablet-grid-15,.tablet-grid-20,.tablet-grid-25,.tablet-grid-30,.tablet-grid-33,.tablet-grid-35,.tablet-grid-40,.tablet-grid-45,.tablet-grid-5,.tablet-grid-50,.tablet-grid-55,.tablet-grid-60,.tablet-grid-65,.tablet-grid-66,.tablet-grid-70,.tablet-grid-75,.tablet-grid-80,.tablet-grid-85,.tablet-grid-90,.tablet-grid-95{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;padding-left:30px;padding-right:30px}.grid-parent{padding-left:0;padding-right:0}@media screen and (max-width:767px){.mobile-pull-10,.mobile-pull-15,.mobile-pull-20,.mobile-pull-25,.mobile-pull-30,.mobile-pull-33,.mobile-pull-35,.mobile-pull-40,.mobile-pull-45,.mobile-pull-5,.mobile-pull-50,.mobile-pull-55,.mobile-pull-60,.mobile-pull-65,.mobile-pull-66,.mobile-pull-70,.mobile-pull-75,.mobile-pull-80,.mobile-pull-85,.mobile-pull-90,.mobile-pull-95,.mobile-push-10,.mobile-push-15,.mobile-push-20,.mobile-push-25,.mobile-push-30,.mobile-push-33,.mobile-push-35,.mobile-push-40,.mobile-push-45,.mobile-push-5,.mobile-push-50,.mobile-push-55,.mobile-push-60,.mobile-push-65,.mobile-push-66,.mobile-push-70,.mobile-push-75,.mobile-push-80,.mobile-push-85,.mobile-push-90,.mobile-push-95{position:relative}.hide-on-mobile{display:none!important}.mobile-grid-5{float:left;width:5%}.mobile-prefix-5{margin-left:5%}.mobile-suffix-5{margin-right:5%}.mobile-push-5{left:5%}.mobile-pull-5{left:-5%}.mobile-grid-10{float:left;width:10%}.mobile-prefix-10{margin-left:10%}.mobile-suffix-10{margin-right:10%}.mobile-push-10{left:10%}.mobile-pull-10{left:-10%}.mobile-grid-15{float:left;width:15%}.mobile-prefix-15{margin-left:15%}.mobile-suffix-15{margin-right:15%}.mobile-push-15{left:15%}.mobile-pull-15{left:-15%}.mobile-grid-20{float:left;width:20%}.mobile-prefix-20{margin-left:20%}.mobile-suffix-20{margin-right:20%}.mobile-push-20{left:20%}.mobile-pull-20{left:-20%}.mobile-grid-25{float:left;width:25%}.mobile-prefix-25{margin-left:25%}.mobile-suffix-25{margin-right:25%}.mobile-push-25{left:25%}.mobile-pull-25{left:-25%}.mobile-grid-30{float:left;width:30%}.mobile-prefix-30{margin-left:30%}.mobile-suffix-30{margin-right:30%}.mobile-push-30{left:30%}.mobile-pull-30{left:-30%}.mobile-grid-35{float:left;width:35%}.mobile-prefix-35{margin-left:35%}.mobile-suffix-35{margin-right:35%}.mobile-push-35{left:35%}.mobile-pull-35{left:-35%}.mobile-grid-40{float:left;width:40%}.mobile-prefix-40{margin-left:40%}.mobile-suffix-40{margin-right:40%}.mobile-push-40{left:40%}.mobile-pull-40{left:-40%}.mobile-grid-45{float:left;width:45%}.mobile-prefix-45{margin-left:45%}.mobile-suffix-45{margin-right:45%}.mobile-push-45{left:45%}.mobile-pull-45{left:-45%}.mobile-grid-50{float:left;width:50%}.mobile-prefix-50{margin-left:50%}.mobile-suffix-50{margin-right:50%}.mobile-push-50{left:50%}.mobile-pull-50{left:-50%}.mobile-grid-55{float:left;width:55%}.mobile-prefix-55{margin-left:55%}.mobile-suffix-55{margin-right:55%}.mobile-push-55{left:55%}.mobile-pull-55{left:-55%}.mobile-grid-60{float:left;width:60%}.mobile-prefix-60{margin-left:60%}.mobile-suffix-60{margin-right:60%}.mobile-push-60{left:60%}.mobile-pull-60{left:-60%}.mobile-grid-65{float:left;width:65%}.mobile-prefix-65{margin-left:65%}.mobile-suffix-65{margin-right:65%}.mobile-push-65{left:65%}.mobile-pull-65{left:-65%}.mobile-grid-70{float:left;width:70%}.mobile-prefix-70{margin-left:70%}.mobile-suffix-70{margin-right:70%}.mobile-push-70{left:70%}.mobile-pull-70{left:-70%}.mobile-grid-75{float:left;width:75%}.mobile-prefix-75{margin-left:75%}.mobile-suffix-75{margin-right:75%}.mobile-push-75{left:75%}.mobile-pull-75{left:-75%}.mobile-grid-80{float:left;width:80%}.mobile-prefix-80{margin-left:80%}.mobile-suffix-80{margin-right:80%}.mobile-push-80{left:80%}.mobile-pull-80{left:-80%}.mobile-grid-85{float:left;width:85%}.mobile-prefix-85{margin-left:85%}.mobile-suffix-85{margin-right:85%}.mobile-push-85{left:85%}.mobile-pull-85{left:-85%}.mobile-grid-90{float:left;width:90%}.mobile-prefix-90{margin-left:90%}.mobile-suffix-90{margin-right:90%}.mobile-push-90{left:90%}.mobile-pull-90{left:-90%}.mobile-grid-95{float:left;width:95%}.mobile-prefix-95{margin-left:95%}.mobile-suffix-95{margin-right:95%}.mobile-push-95{left:95%}.mobile-pull-95{left:-95%}.mobile-grid-33{float:left;width:33.33333%}.mobile-prefix-33{margin-left:33.33333%}.mobile-suffix-33{margin-right:33.33333%}.mobile-push-33{left:33.33333%}.mobile-pull-33{left:-33.33333%}.mobile-grid-66{float:left;width:66.66667%}.mobile-prefix-66{margin-left:66.66667%}.mobile-suffix-66{margin-right:66.66667%}.mobile-push-66{left:66.66667%}.mobile-pull-66{left:-66.66667%}.mobile-grid-100{clear:both;width:100%}}@media screen and (min-width:768px) and (max-width:1023px){.tablet-pull-10,.tablet-pull-15,.tablet-pull-20,.tablet-pull-25,.tablet-pull-30,.tablet-pull-33,.tablet-pull-35,.tablet-pull-40,.tablet-pull-45,.tablet-pull-5,.tablet-pull-50,.tablet-pull-55,.tablet-pull-60,.tablet-pull-65,.tablet-pull-66,.tablet-pull-70,.tablet-pull-75,.tablet-pull-80,.tablet-pull-85,.tablet-pull-90,.tablet-pull-95,.tablet-push-10,.tablet-push-15,.tablet-push-20,.tablet-push-25,.tablet-push-30,.tablet-push-33,.tablet-push-35,.tablet-push-40,.tablet-push-45,.tablet-push-5,.tablet-push-50,.tablet-push-55,.tablet-push-60,.tablet-push-65,.tablet-push-66,.tablet-push-70,.tablet-push-75,.tablet-push-80,.tablet-push-85,.tablet-push-90,.tablet-push-95{position:relative}.hide-on-tablet{display:none!important}.tablet-grid-5{float:left;width:5%}.tablet-prefix-5{margin-left:5%}.tablet-suffix-5{margin-right:5%}.tablet-push-5{left:5%}.tablet-pull-5{left:-5%}.tablet-grid-10{float:left;width:10%}.tablet-prefix-10{margin-left:10%}.tablet-suffix-10{margin-right:10%}.tablet-push-10{left:10%}.tablet-pull-10{left:-10%}.tablet-grid-15{float:left;width:15%}.tablet-prefix-15{margin-left:15%}.tablet-suffix-15{margin-right:15%}.tablet-push-15{left:15%}.tablet-pull-15{left:-15%}.tablet-grid-20{float:left;width:20%}.tablet-prefix-20{margin-left:20%}.tablet-suffix-20{margin-right:20%}.tablet-push-20{left:20%}.tablet-pull-20{left:-20%}.tablet-grid-25{float:left;width:25%}.tablet-prefix-25{margin-left:25%}.tablet-suffix-25{margin-right:25%}.tablet-push-25{left:25%}.tablet-pull-25{left:-25%}.tablet-grid-30{float:left;width:30%}.tablet-prefix-30{margin-left:30%}.tablet-suffix-30{margin-right:30%}.tablet-push-30{left:30%}.tablet-pull-30{left:-30%}.tablet-grid-35{float:left;width:35%}.tablet-prefix-35{margin-left:35%}.tablet-suffix-35{margin-right:35%}.tablet-push-35{left:35%}.tablet-pull-35{left:-35%}.tablet-grid-40{float:left;width:40%}.tablet-prefix-40{margin-left:40%}.tablet-suffix-40{margin-right:40%}.tablet-push-40{left:40%}.tablet-pull-40{left:-40%}.tablet-grid-45{float:left;width:45%}.tablet-prefix-45{margin-left:45%}.tablet-suffix-45{margin-right:45%}.tablet-push-45{left:45%}.tablet-pull-45{left:-45%}.tablet-grid-50{float:left;width:50%}.tablet-prefix-50{margin-left:50%}.tablet-suffix-50{margin-right:50%}.tablet-push-50{left:50%}.tablet-pull-50{left:-50%}.tablet-grid-55{float:left;width:55%}.tablet-prefix-55{margin-left:55%}.tablet-suffix-55{margin-right:55%}.tablet-push-55{left:55%}.tablet-pull-55{left:-55%}.tablet-grid-60{float:left;width:60%}.tablet-prefix-60{margin-left:60%}.tablet-suffix-60{margin-right:60%}.tablet-push-60{left:60%}.tablet-pull-60{left:-60%}.tablet-grid-65{float:left;width:65%}.tablet-prefix-65{margin-left:65%}.tablet-suffix-65{margin-right:65%}.tablet-push-65{left:65%}.tablet-pull-65{left:-65%}.tablet-grid-70{float:left;width:70%}.tablet-prefix-70{margin-left:70%}.tablet-suffix-70{margin-right:70%}.tablet-push-70{left:70%}.tablet-pull-70{left:-70%}.tablet-grid-75{float:left;width:75%}.tablet-prefix-75{margin-left:75%}.tablet-suffix-75{margin-right:75%}.tablet-push-75{left:75%}.tablet-pull-75{left:-75%}.tablet-grid-80{float:left;width:80%}.tablet-prefix-80{margin-left:80%}.tablet-suffix-80{margin-right:80%}.tablet-push-80{left:80%}.tablet-pull-80{left:-80%}.tablet-grid-85{float:left;width:85%}.tablet-prefix-85{margin-left:85%}.tablet-suffix-85{margin-right:85%}.tablet-push-85{left:85%}.tablet-pull-85{left:-85%}.tablet-grid-90{float:left;width:90%}.tablet-prefix-90{margin-left:90%}.tablet-suffix-90{margin-right:90%}.tablet-push-90{left:90%}.tablet-pull-90{left:-90%}.tablet-grid-95{float:left;width:95%}.tablet-prefix-95{margin-left:95%}.tablet-suffix-95{margin-right:95%}.tablet-push-95{left:95%}.tablet-pull-95{left:-95%}.tablet-grid-33{float:left;width:33.33333%}.tablet-prefix-33{margin-left:33.33333%}.tablet-suffix-33{margin-right:33.33333%}.tablet-push-33{left:33.33333%}.tablet-pull-33{left:-33.33333%}.tablet-grid-66{float:left;width:66.66667%}.tablet-prefix-66{margin-left:66.66667%}.tablet-suffix-66{margin-right:66.66667%}.tablet-push-66{left:66.66667%}.tablet-pull-66{left:-66.66667%}.tablet-grid-100{clear:both;width:100%}}@media screen and (min-width:1024px){.pull-10,.pull-15,.pull-20,.pull-25,.pull-30,.pull-33,.pull-35,.pull-40,.pull-45,.pull-5,.pull-50,.pull-55,.pull-60,.pull-65,.pull-66,.pull-70,.pull-75,.pull-80,.pull-85,.pull-90,.pull-95,.push-10,.push-15,.push-20,.push-25,.push-30,.push-33,.push-35,.push-40,.push-45,.push-5,.push-50,.push-55,.push-60,.push-65,.push-66,.push-70,.push-75,.push-80,.push-85,.push-90,.push-95{position:relative}.hide-on-desktop{display:none!important}.grid-5{float:left;width:5%}.prefix-5{margin-left:5%}.suffix-5{margin-right:5%}.push-5{left:5%}.pull-5{left:-5%}.grid-10{float:left;width:10%}.prefix-10{margin-left:10%}.suffix-10{margin-right:10%}.push-10{left:10%}.pull-10{left:-10%}.grid-15{float:left;width:15%}.prefix-15{margin-left:15%}.suffix-15{margin-right:15%}.push-15{left:15%}.pull-15{left:-15%}.grid-20{float:left;width:20%}.prefix-20{margin-left:20%}.suffix-20{margin-right:20%}.push-20{left:20%}.pull-20{left:-20%}.grid-25{float:left;width:25%}.prefix-25{margin-left:25%}.suffix-25{margin-right:25%}.push-25{left:25%}.pull-25{left:-25%}.grid-30{float:left;width:30%}.prefix-30{margin-left:30%}.suffix-30{margin-right:30%}.push-30{left:30%}.pull-30{left:-30%}.grid-35{float:left;width:35%}.prefix-35{margin-left:35%}.suffix-35{margin-right:35%}.push-35{left:35%}.pull-35{left:-35%}.grid-40{float:left;width:40%}.prefix-40{margin-left:40%}.suffix-40{margin-right:40%}.push-40{left:40%}.pull-40{left:-40%}.grid-45{float:left;width:45%}.prefix-45{margin-left:45%}.suffix-45{margin-right:45%}.push-45{left:45%}.pull-45{left:-45%}.grid-50{float:left;width:50%}.prefix-50{margin-left:50%}.suffix-50{margin-right:50%}.push-50{left:50%}.pull-50{left:-50%}.grid-55{float:left;width:55%}.prefix-55{margin-left:55%}.suffix-55{margin-right:55%}.push-55{left:55%}.pull-55{left:-55%}.grid-60{float:left;width:60%}.prefix-60{margin-left:60%}.suffix-60{margin-right:60%}.push-60{left:60%}.pull-60{left:-60%}.grid-65{float:left;width:65%}.prefix-65{margin-left:65%}.suffix-65{margin-right:65%}.push-65{left:65%}.pull-65{left:-65%}.grid-70{float:left;width:70%}.prefix-70{margin-left:70%}.suffix-70{margin-right:70%}.push-70{left:70%}.pull-70{left:-70%}.grid-75{float:left;width:75%}.prefix-75{margin-left:75%}.suffix-75{margin-right:75%}.push-75{left:75%}.pull-75{left:-75%}.grid-80{float:left;width:80%}.prefix-80{margin-left:80%}.suffix-80{margin-right:80%}.push-80{left:80%}.pull-80{left:-80%}.grid-85{float:left;width:85%}.prefix-85{margin-left:85%}.suffix-85{margin-right:85%}.push-85{left:85%}.pull-85{left:-85%}.grid-90{float:left;width:90%}.prefix-90{margin-left:90%}.suffix-90{margin-right:90%}.push-90{left:90%}.pull-90{left:-90%}.grid-95{float:left;width:95%}.prefix-95{margin-left:95%}.suffix-95{margin-right:95%}.push-95{left:95%}.pull-95{left:-95%}.grid-33{float:left;width:33.33333%}.prefix-33{margin-left:33.33333%}.suffix-33{margin-right:33.33333%}.push-33{left:33.33333%}.pull-33{left:-33.33333%}.grid-66{float:left;width:66.66667%}.prefix-66{margin-left:66.66667%}.suffix-66{margin-right:66.66667%}.push-66{left:66.66667%}.pull-66{left:-66.66667%}.grid-100{clear:both;width:100%}}a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,button,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;-webkit-font-smoothing:antialiased}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section{display:block}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:'';content:none}table{border-collapse:collapse;border-spacing:0}html,textarea{overflow:auto}body,html{width:100%;height:100%}a{text-decoration:none;outline:0}button,input,textarea{margin:0;padding:0;border:0;outline:0}a,button,input[type=button],input[type=submit],label{cursor:pointer}h1,h2,h3,h4,h5,h6{font-weight:400}b,strong{font-weight:700!important}em,i{font-style:italic!important}address{font-style:normal}small{font-size:75%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}abbr,acronym{border-bottom:1px dotted;cursor:help}ins{text-decoration:none}h1,h2,h3,h4,h5,h6{color:#222}h1{font-size:26px}h2{font-size:24px}h3{font-size:22px}h4{font-size:20px}h5{font-size:18px}h6{font-size:16px}#single #comments .comment .comment-author,.title{font-family:Lato,sans-serif;font-weight:700;font-size:24px;margin-bottom:40px;line-height:1.6;letter-spacing:.6px}#single #comments .comment .ularge.comment-author,.title.ularge{font-size:40px;font-weight:400;margin-bottom:30px;line-height:1.2}#single #comments .comment .download-button.comment-author,#single #comments .comment .large.comment-author,#single #comments .comment div.download a.comment-author,.title.download-button,.title.large,div.download #single #comments .comment a.comment-author,div.download a.title{font-size:34px;line-height:1.3}#single #comments .comment .medium.comment-author,.title.medium{font-size:26px;line-height:1.4}#single #comments .comment .small.comment-author,.title.small{font-size:18px;margin-bottom:10px;line-height:1.45}#single #comments .comment .comment-author,.title.usmall{font-size:16px;margin-bottom:5px;line-height:1.45}#single #comments .comment .white.comment-author,.title.white{color:#fff}#single #comments .comment .bordered.comment-author:after,.title.bordered:after{display:block;content:'';width:30px;height:4px;background:#ffd54f;border-radius:4px;margin-top:10px}#single #comments .comment .comment-author .count,.title .count{display:inline-block;font-weight:700;font-size:140%;vertical-align:middle;line-height:1;color:#ffd54f;margin-top:-8px}#single #comments .comment .bold.comment-author,.title.bold{font-weight:700!important}.border-effect a:before,.underline-effect a:before{-webkit-transition:all .4s ease;-moz-transition:all .4s ease;-ms-transition:all .4s ease;-o-transition:all .4s ease;transition:all .4s ease}.border-effect a,.underline-effect a{position:relative;z-index:1;padding-bottom:2px}.border-effect a:before,.underline-effect a:before{content:'';position:absolute;left:0;top:100%;width:100%;border-bottom:1px solid;opacity:.5}.border-effect a:before,.underline-effect a:hover:before{width:90%;left:5%}.border-effect a:before{opacity:0;visibility:hidden}.border-effect a:hover:before{width:100%;left:0;opacity:1;visibility:visible}.my-mfp-zoom-in .mfp-content{-webkit-opacity:0;-moz-opacity:0;opacity:0;-webkit-transition:all .2s ease-in-out;-moz-transition:all .2s ease-in-out;-o-transition:all .2s ease-in-out;transition:all .2s ease-in-out;-webkit-transform:scale(.8);-moz-transform:scale(.8);-ms-transform:scale(.8);-o-transform:scale(.8);transform:scale(.8)}.my-mfp-zoom-in.mfp-ready .mfp-content{-webkit-opacity:1;-moz-opacity:1;opacity:1;-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);-o-transform:scale(1);transform:scale(1)}.my-mfp-zoom-in.mfp-removing .mfp-content{-webkit-transform:scale(.8);-moz-transform:scale(.8);-ms-transform:scale(.8);-o-transform:scale(.8);transform:scale(.8);-webkit-opacity:0;-moz-opacity:0;opacity:0}.my-mfp-zoom-in.mfp-bg{opacity:.001;-webkit-transition:opacity .3s ease-out;-moz-transition:opacity .3s ease-out;-o-transition:opacity .3s ease-out;transition:opacity .3s ease-out}.my-mfp-zoom-in.mfp-ready.mfp-bg{-webkit-opacity:.8;-moz-opacity:.8;opacity:.8}.my-mfp-zoom-in.mfp-removing.mfp-bg{-webkit-opacity:0;-moz-opacity:0;opacity:0}a.hover-effect{display:block;position:relative;overflow:hidden;background:#000}a.hover-effect img,a.hover-effect span.cover{display:block;width:101%;height:auto;backface-visibility:hidden;transition:all .6s ease}a.hover-effect:hover img,a.hover-effect:hover span.cover{opacity:.85}.gradient-effect a{padding-bottom:5px;background:linear-gradient(to right,#92c94a 0,#ffd54f 100%);background-size:0 4px;background-repeat:no-repeat;background-position:left 87%}.gradient-effect a:after,.gradient-effect a:before{display:none}.gradient-effect a:hover{color:#222;background-size:100% 4px}#single #comments nav.pagination a,.button,.download-button,.pagination div.nav a,div.download a{display:inline-block;background-color:#92c94a;color:#fff;font-size:14px;padding:7px 25px;border-radius:25px;border:2px solid transparent;letter-spacing:.3px;font-weight:500;font-family:Lato,sans-serif;border-radius:25px;-webkit-transition:all .3s ease;-moz-transition:all .3s ease;-ms-transition:all .3s ease;-o-transition:all .3s ease;transition:all .3s ease}#single #comments nav.pagination a:hover,.button:hover,.download-button:hover,.pagination div.nav a:hover,div.download a:hover{border-color:#92c94a;color:#92c94a;background-color:transparent}#single #comments nav.pagination a.small,.button.small,.pagination div.nav a.small,.small.download-button,div.download a.small{font-size:12px;padding:5px 15px}#single #comments nav.pagination a.download-button,#single #comments nav.pagination a.large,#single #comments nav.pagination div.download a,.button.large,.download-button,.pagination div.nav a.download-button,.pagination div.nav a.large,.pagination div.nav div.download a,div.download #single #comments nav.pagination a,div.download .pagination div.nav a,div.download a{font-size:22px;padding:8px 25px;font-weight:700;border-radius:32px}#single #comments nav.pagination a.circle,.button.circle,.circle.download-button,.pagination div.nav a.circle,div.download a.circle{padding:7px;width:30px;height:30px;border-radius:50%;text-align:center;line-height:30px;font-size:16px}#single #comments nav.pagination a.circle i.fa,.button.circle i.fa,.circle.download-button i.fa,.pagination div.nav a.circle i.fa,div.download a.circle i.fa{margin:0;vertical-align:middle}#single #comments nav.pagination a.download-button,#single #comments nav.pagination a.outline,#single #comments nav.pagination div.download a,#single #comments nav.pagination div.nav a,.button.outline,.download-button,.pagination div.nav a,div.download #single #comments nav.pagination a,div.download a{background-color:transparent;box-shadow:none;border:2px solid #92c94a;color:#92c94a}#single #comments nav.pagination a.download-button:hover,#single #comments nav.pagination a.outline:hover,#single #comments nav.pagination div.download a:hover,#single #comments nav.pagination div.nav a:hover,.button.outline:hover,.download-button:hover,.pagination div.nav a:hover,div.download #single #comments nav.pagination a:hover,div.download a:hover{color:#fff;background-color:#92c94a}#single #comments nav.pagination a.dark,.button.dark,.dark.download-button,.pagination div.nav a.dark,div.download a.dark{background-color:#111}#single #comments nav.pagination a.dark:hover,.button.dark:hover,.dark.download-button:hover,.pagination div.nav a.dark:hover,div.download a.dark:hover{color:#fff;background-color:#282828}#single #comments nav.pagination a i.fa,.button i.fa,.download-button i.fa,.pagination div.nav a i.fa,div.download a i.fa{font-size:85%;margin-right:5px}div.download{padding-top:26px;text-align:center}div.download a{color:#92c94a;border:2px solid #92c94a!important}div.download a:hover{color:#fff!important}div.download a:before{content:'\f0ed';font-family:FontAwesome;margin-right:10px;text-transform:uppercase;display:inline-block;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.download-button{text-align:center;color:#92c94a;border:2px solid #92c94a!important}.download-button:hover{color:#fff!important}.download-button:before{content:'\f0ed';font-family:FontAwesome;margin-right:10px;text-transform:uppercase;display:inline-block;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.widget.tag-cloud,div.tags{display:inline-block}.absolute.widget.tag-cloud,div.tags.absolute{position:absolute;right:15px;top:15px;z-index:10}.no-thumb.widget.tag-cloud,div.tags.no-thumb{margin-bottom:12.5px;margin-left:-5px}.widget.tag-cloud a,.widget.tag-cloud span,div.tags a,div.tags span{font-size:13px;color:#111;background:#ffd54f;display:inline-block;padding:3px 15px;vertical-align:top;border-radius:3px;margin-bottom:5px;margin-left:5px;border-radius:25px}.widget.tag-cloud a:hover,div.tags a:hover{background:#111;color:#fff}a[href*=fullcover],a[href*=nosidebar],li[data-value*=fullcover],li[data-value*=nosidebar],span.fullcover,span.nosidebar{display:none!important}input[type=email],input[type=password],input[type=tel],input[type=text],input[type=url],textarea{display:block;background:#f2f2f2;border:2px solid #f2f2f2;color:#494949;font:15px Lato,sans-serif;letter-spacing:.3px;padding:12px 30px;height:45px;width:100%;margin-bottom:15px;box-sizing:border-box;border-radius:25px;-webkit-transition:all .3s ease;-moz-transition:all .3s ease;-ms-transition:all .3s ease;-o-transition:all .3s ease;transition:all .3s ease}input[type=email]::-webkit-input-placeholder,input[type=password]::-webkit-input-placeholder,input[type=tel]::-webkit-input-placeholder,input[type=text]::-webkit-input-placeholder,input[type=url]::-webkit-input-placeholder,textarea::-webkit-input-placeholder{color:rgba(17,17,17,.75)}input[type=email]:-moz-placeholder,input[type=password]:-moz-placeholder,input[type=tel]:-moz-placeholder,input[type=text]:-moz-placeholder,input[type=url]:-moz-placeholder,textarea:-moz-placeholder{color:rgba(17,17,17,.75)}input[type=email]::-moz-placeholder,input[type=password]::-moz-placeholder,input[type=tel]::-moz-placeholder,input[type=text]::-moz-placeholder,input[type=url]::-moz-placeholder,textarea::-moz-placeholder{color:rgba(17,17,17,.75)}input[type=email]:-ms-input-placeholder,input[type=password]:-ms-input-placeholder,input[type=tel]:-ms-input-placeholder,input[type=text]:-ms-input-placeholder,input[type=url]:-ms-input-placeholder,textarea:-ms-input-placeholder{color:rgba(17,17,17,.75)}input[type=email]:focus,input[type=password]:focus,input[type=tel]:focus,input[type=text]:focus,input[type=url]:focus,textarea:focus{border-color:#d8d8d8}textarea{width:100%;height:170px;resize:none;padding-top:25px;padding-bottom:25px}input[type=submit]{display:inline-block;background-color:#92c94a;color:#fff;font-size:14px;padding:7px 25px;border-radius:25px;border:2px solid transparent;letter-spacing:.3px;font-weight:500;font-family:Lato,sans-serif;border-radius:25px;-webkit-transition:all .3s ease;-moz-transition:all .3s ease;-ms-transition:all .3s ease;-o-transition:all .3s ease;transition:all .3s ease;font-size:18px;padding:10px 30px;-webkit-transition:all .3s ease;-moz-transition:all .3s ease;-ms-transition:all .3s ease;-o-transition:all .3s ease;transition:all .3s ease}input[type=submit]:hover{border-color:#92c94a;color:#92c94a;background-color:transparent}input[type=submit].small{font-size:12px;padding:5px 15px}input.download-button[type=submit],input[type=submit].large{font-size:22px;padding:8px 25px;font-weight:700;border-radius:32px}input[type=submit].circle{padding:7px;width:30px;height:30px;border-radius:50%;text-align:center;line-height:30px;font-size:16px}input[type=submit].circle i.fa{margin:0;vertical-align:middle}input.download-button[type=submit],input[type=submit].outline{background-color:transparent;box-shadow:none;border:2px solid #92c94a;color:#92c94a}input.download-button[type=submit]:hover,input[type=submit].outline:hover{color:#fff;background-color:#92c94a}input[type=submit].dark{background-color:#111}input[type=submit].dark:hover{color:#fff;background-color:#282828}input[type=submit] i.fa{font-size:85%;margin-right:5px}input[type=submit]:hover{background-color:transparent!important}select{max-width:100%}.wp-block-categories select,select.custom-select{border:0;border-radius:5px;padding:10px 15px;padding-right:25px;background:#92c94a url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAUBAMAAABohZD3AAAAA3NCSVQICAjb4U/gAAAAD1BMVEX///8AAAAAAAAAAAAAAABRO2rwAAAABXRSTlMAESIzRJTdRHwAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAcdEVYdFNvZnR3YXJlAEFkb2JlIEZpcmV3b3JrcyBDUzbovLKMAAAAY0lEQVQYlVXOyRGAIBBE0QYNgIMBWJYBcDAAFvOPSYRZ5zL1Tv3xvPY6dueC4JyA27AB2IzzMIx/4hDW6Sg+p8EJfVESCpkTEpkSGpMSshg6DkmoxlHHOaFbjoTiHHR83UX/A5M3KIMZPyPWAAAAAElFTkSuQmCC) no-repeat 93% center;background-size:9px 6px;color:#fff;font:15px Lato,sans-serif;outline:0;cursor:pointer;margin-left:20px;appearance:none}.wp-block-categories select option,select.custom-select option{color:#222;background:#fff}select.custom-select{display:none}.ie9 select.custom-select{background:0 0;display:block}select.custom-select::-ms-expand{display:none}select.custom-select:first-child{margin-left:0}select.custom-select option{color:#111}button{-webkit-transition:all .3s ease;-moz-transition:all .3s ease;-ms-transition:all .3s ease;-o-transition:all .3s ease;transition:all .3s ease}form p{padding-bottom:15px;font-size:13px}.empty{border:1px solid #f15f74!important}::-webkit-input-placeholder{color:rgba(255,255,255,.75)}:-moz-placeholder{color:rgba(255,255,255,.75)}::-moz-placeholder{color:rgba(255,255,255,.75)}:-ms-input-placeholder{color:rgba(255,255,255,.75)}form{position:relative;z-index:1}form input{margin:0}form input.search-field,form input.search-field-mobile{background:rgba(0,0,0,.15);border:0;color:#fff;margin:0}form input.search-field-mobile::-webkit-input-placeholder,form input.search-field::-webkit-input-placeholder{color:#fff}form input.search-field-mobile:-moz-placeholder,form input.search-field:-moz-placeholder{color:#fff}form input.search-field-mobile::-moz-placeholder,form input.search-field::-moz-placeholder{color:#fff}form input.search-field-mobile:-ms-input-placeholder,form input.search-field:-ms-input-placeholder{color:#fff}form .submit{position:absolute;right:20px;top:50%;color:#fff;background:0 0;backface-visibility:hidden;margin-top:-14px}body{font:15px Lato,sans-serif;line-height:1.8;font-weight:400;color:#494949;-webkit-overflow-scrolling:touch;max-width:1920px;margin:0 auto;letter-spacing:.3px;background:#2c45a3;background-image:linear-gradient(to right,#181d49,#313d6c,#4b608f,#6884b4,#86abd9);-ms-word-wrap:break-word;word-wrap:break-word}.lazy{opacity:0}.lazy.loaded{opacity:1}img{max-width:100%;height:auto}a{color:#222;-webkit-transition:all .3s ease;-moz-transition:all .3s ease;-ms-transition:all .3s ease;-o-transition:all .3s ease;transition:all .3s ease}a:hover{color:#ffd54f}a img{-webkit-backface-visibility:hidden;-moz-backface-visibility:hidden;-ms-backface-visibility:hidden;backface-visibility:hidden;-webkit-transition:all .3s ease;-moz-transition:all .3s ease;-ms-transition:all .3s ease;-o-transition:all .3s ease;transition:all .3s ease}i.fa,i.icon{font-style:normal!important}.no-margin{margin:0!important}.alignleft{float:left!important}.alignright{float:right!important}.aligncenter{display:block;margin:0 auto}.textleft{text-align:left!important}.textright{text-align:right!important}.textcenter{text-align:center!important}.uppercase{text-transform:uppercase}.overflow{overflow:hidden}.mobile{display:none}.cover{background-repeat:no-repeat!important;background-position:center center!important;-webkit-background-size:cover!important;-moz-background-size:cover!important;-o-background-size:cover!important;background-size:cover!important}hr{border:0;border-top:1px solid #e5e5e5;height:1px;margin:0 0 20px}.grid-container{max-width:1200px}.grid-container.grid-small{max-width:780px}.grid-container.grid-medium{max-width:900px}.section{padding-top:50px;padding-bottom:50px}.section.bordered{border-top:1px solid #e5e5e5;margin:0 -60px;padding-left:30px;padding-right:30px}.fullwidth{display:block;width:100%;height:auto}.thumb{position:relative;z-index:1;min-height:80px}.full-link,.thumb .fullimage{position:absolute;left:0;top:0;width:100%;height:100%!important;z-index:1}.full-link{z-index:10}.content{box-shadow:0 0 5px 0 rgba(0,0,0,.3);background:#fff;margin-top:70px;border-top-left-radius:7px;border-top-right-radius:7px;position:relative;z-index:2}.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#ffd54f;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}.pace .pace-activity{display:block;position:fixed;z-index:2000;top:15px;left:15px;width:14px;height:14px;border:solid 2px transparent;border-top-color:#ffd54f;border-left-color:#ffd54f;border-radius:10px;animation:pace-spinner .4s linear infinite}@keyframes pace-spinner{0%{transform:rotate(0);transform:rotate(0)}100%{transform:rotate(360deg);transform:rotate(360deg)}}.ads{margin:50px auto 0}.ads img.img-ad{display:block;margin:0 auto}div.gallery{display:none;margin-bottom:5px}div.gallery p{padding:0;margin:0}div.gallery br{display:none}div.gallery a{display:block;position:relative;overflow:hidden;margin-bottom:20px}div.gallery a img{display:block;height:auto;-webkit-backface-visibility:hidden;-moz-backface-visibility:hidden;-ms-backface-visibility:hidden;backface-visibility:hidden}div.gallery a:before{font-family:FontAwesome;content:'\f065';display:block;width:30px;height:30px;color:#fff;text-align:center;line-height:30px;background:0 0;position:absolute;left:50%;top:50%;margin:-15px 0 0 -15px;z-index:5;border-radius:100%;opacity:0;visibility:hidden;-webkit-transition:all .3s ease;-moz-transition:all .3s ease;-ms-transition:all .3s ease;-o-transition:all .3s ease;transition:all .3s ease;transform:scale(1.5)}div.gallery a:hover:before{opacity:1;visibility:visible;transform:scale(1)}#search-results{position:relative;z-index:1;background:#fff;margin:20px auto}#search-results h2{padding:0 20px;text-align:center}#search-results div.box{margin-top:20px;padding:0 20px}#search-results article{background:#f9f9f9;padding:20px}#search-results article #single #comments .comment .comment-author,#search-results article .title,#single #comments .comment #search-results article .comment-author{margin-bottom:5px}#search-results article time{opacity:.75;font-size:13px}#search-results article iframe,#search-results article img{display:none}#archives .content{overflow:inherit;margin-top:0}.author-template #archives .content{margin-top:20px}#archives #author,.author-template #archives .content{margin-top:20px;border-top-left-radius:7px;border-top-right-radius:7px}#home .content{margin-top:0;border-radius:0}.tag-nosidebar #sidebar{display:none}.tag-nosidebar div.left-content{width:auto;border:0;margin-right:0}.tag-nosidebar div.left-content .featured-image{border-top-right-radius:7px;overflow:hidden}#author{padding:30px;position:relative;z-index:1;text-align:center;background:#92c94a;color:#fff;margin-top:50px}#author div.avatar{position:absolute;left:50%;top:0;z-index:2;width:80px;margin:-40px 0 0 -40px}#author div.avatar a{display:block;border-radius:50%;overflow:hidden}#author div.avatar img{display:block}#author #single.fullcover .featured-image .top,#author div.info,#single.fullcover .featured-image #author .top{font-size:16px;max-width:75%;margin:0 auto}#author div.social{margin-top:15px}#author div.social a{display:inline-block;margin:0 12px;color:#fff;font-size:22px}#author div.social a:hover{transform:translateY(-2px)}#author .author-name{margin-top:35px;margin-bottom:20px;line-height:1}#author #single #comments .comment .comment-author,#author .author-name a,#author .title,#single #comments .comment #author .comment-author{color:#fff}div.left-content{border-right:1px solid #e5e5e5;margin-right:-1px;padding:30px 25px}.grid-container div.text li{padding-bottom:0}.nice-select .list.right{right:0;left:inherit}.nice-select .list.left{left:0}.custom-tagging{margin-left:-5px}.custom-filter-tag .nice-select{width:100%;margin-left:0}.custom-filter-tag .nice-select:not(:first-of-type){margin-top:20px}.widget.search.custom-widget{border-radius:0}.widget .full-cus-width{width:100%}.custom-title{font-weight:700;font-size:24px;line-height:1.6;letter-spacing:.6px;color:#fff}.tag-description{color:#fff;padding-top:15px;text-align:center;font-size:15px}.cta-content{border-top:1px solid #e5e5e5;padding:15px 0 10px;margin-top:15px}.post-full-comments{padding:40px 0}div.text{font-size:17px;line-height:2;font-weight:400}div.text b,div.text strong{font-weight:600}div.text iframe{max-width:100%}div.text hr{display:inline-block;width:100%}div.text div#map_canvas img,div.text div.ep-map img{max-width:none!important;height:inherit}div.text img{max-width:100%;height:auto;border-radius:7px}div.text img.alignleft{margin:0 24px 24px 0}div.text img.alignright{margin:0 0 24px 24px}div.text img.aligncenter{margin-bottom:0}div.text h1,div.text h2,div.text h3,div.text h4,div.text h5,div.text h6{font-weight:700;font-family:Lato,sans-serif}div.text h1{font-size:34px;padding-top:19.84px;margin-bottom:12.16px;line-height:1.3}div.text h2{font-size:28px;padding-top:14.4px;margin-bottom:17.6px;line-height:1.4}div.text h3{font-size:24px;padding-top:20.8px;margin-bottom:14.4px;line-height:1.5}div.text h4{font-size:18px;padding-top:8px;margin-bottom:24px}div.text h5{font-size:16px;padding-top:8px;margin-bottom:24px}div.text h6{font-size:14px;padding-top:8px;margin-bottom:24px}div.text a:not([class]){color:#92c94a;word-break:break-all}div.text a:not([class]):hover{color:#494949;border-color:#494949}div.text .ep-shortcode a:hover,div.text a.ep-shortcode:hover{text-decoration:none}div.text ol,div.text ul{margin:0 0 0 25px}div.text ul,div.text ul li{list-style-type:disc;list-style-position:initial;position:relative}div.text ol,div.text ol li{list-style-type:decimal;list-style-position:initial}div.text ol ol{list-style:upper-alpha}div.text ol ol ol{list-style:lower-roman}div.text ol ol ol ol{list-style:lower-alpha}div.text ol ol,div.text ol ul,div.text ul ol,div.text ul ul{margin-bottom:0;padding-bottom:0;padding-top:10px}div.text dl{margin:0 1.5em}div.text dt{font-weight:600}div.text dd{margin-bottom:15px}div.text abbr,div.text acronym{border-bottom:1px dotted;cursor:help}div.text ins{text-decoration:none}div.text blockquote,div.text dd,div.text pre{margin-bottom:20px}div.text blockquote{padding:20px 50px;margin:0 0 25px 0;border-left:0;font-style:italic;color:#222;position:relative;z-index:1}div.text blockquote:before{content:'';position:absolute;left:0;top:0;width:6px;height:100%;background:#ffd54f;border-radius:6px}div.text blockquote cite{opacity:.85}div.text blockquote ul{padding-bottom:0}div.text blockquote p{padding-top:0}div.text blockquote p:last-of-type{margin-bottom:0}div.text pre{overflow:auto;max-width:100%;max-height:400px;font-size:15px}div.text code:not([class*=language-]),div.text pre:not([class*=language-]){font-family:Monaco,monospace;background:#f9f9f9;color:#555;border:1px solid #ddd;border-radius:3px}div.text code:not([class*=language-]){padding:3px 8px;margin:0 1px;font-size:16px;display:inline-block}div.text pre:not([class*=language-]){padding:25px;line-height:1.8;overflow:auto}div.text pre:not([class*=language-]) code:not([class*=language-]){border:0}div.text pre:not([class*=language-]) ol{margin:0 0 0 35px;padding:0;list-style:decimal;list-style-position:outside}div.text pre:not([class*=language-]) ol li{padding-bottom:0;list-style-position:outside}div.text table{text-align:center;border:1px solid #ccc;width:max-content;padding:0!important;max-width:100%;display:block;overflow-x:auto}div.text table,div.text table td,div.text table th{border:1px solid #ddd;padding:7px 15px;text-align:center}div.text table th{font-weight:600}div.text .gallery dl{margin:0}div.text address{font-style:italic;margin-bottom:25px}div.text .gallery-caption{color:#494949}div.text .bypostauthor{color:#494949}div.text .aligncenter,div.text div.aligncenter{display:block;margin-left:auto;margin-right:auto;margin-bottom:24px}div.text .alignright{float:right;margin:0 0 24px 24px}div.text .alignleft{float:left;margin:0 24px 24px 0}div.text .wp-caption{background:#fff;border:1px solid #e5e5e5;max-width:96%;padding:8px 3px 10px!important;text-align:center;margin-bottom:25px;border-radius:7px}div.text .wp-caption img{border:0 none;height:auto;margin:0;max-width:98.5%;padding:0;width:auto}div.text .wp-caption p.wp-caption-text{font-size:12px;line-height:17px;margin:0;padding:0 4px}div.text .attachment a:not(.button):not(.download-button),div.text .gallery a:not(.button):not(.download-button),div.text .wp-caption a:not(.button):not(.download-button),div.text div a:not(.button):not(.download-button){border:0}div.text .screen-reader-text{border:0;clip:rect(1px,1px,1px,1px);clip-path:inset(50%);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute!important;width:1px;word-wrap:normal!important}div.text .screen-reader-text:focus{background-color:#eee;clip:auto!important;clip-path:none;color:#444;display:block;font-size:1em;height:auto;left:5px;line-height:normal;padding:15px 23px 14px;text-decoration:none;top:5px;width:auto;z-index:100000}div.text .epcl-gallery ul{margin:0 -10px}div.text .epcl-gallery ul li{list-style:none;padding-bottom:20px;padding:0 5px 10px}div.text figure,div.text iframe,div.text p{padding-top:8px;margin-bottom:24px}div.text blockquote,div.text hr,div.text pre,div.text table{margin-top:8px;margin-bottom:24px}div.text li{padding-bottom:8px}div.text ol,div.text ul{margin-bottom:24px}div.text ol li:last-of-type,div.text ul li:last-of-type{padding-bottom:0}div.text>:first-child{padding-top:0}div.text figure{margin-bottom:25px}div.text figure figcaption{text-align:center;font-size:90%;opacity:.75;margin-top:5px}div.text .kg-image-card{width:60%;margin:0 auto 25px}div.text .kg-image-card.kg-width-wide{width:85%}div.text .kg-image-card.kg-width-full{width:100%}div.text .kg-embed-card twitterwidget{margin:0 auto!important}div.text .kg-embed-card iframe{margin-bottom:0;display:block;width:100%;height:400px}div.text .kg-embed-card figcaption{margin-top:10px}div.text .kg-gallery-container{display:flex;flex-direction:column}div.text .kg-gallery-container a{border-radius:7px;background:0 0}div.text .kg-gallery-container a:hover{background:#000}div.text .kg-gallery-row{display:flex;flex-direction:row;justify-content:center}div.text .kg-gallery-image img{display:block;margin:0;width:100%;height:100%}div.text .kg-gallery-row:not(:first-of-type){margin:.75em 0 0 0}div.text .kg-gallery-image:not(:first-of-type){margin:0 0 0 .75em}#header div.menu-mobile{display:none}#header div.menu-wrapper{color:#fff;padding:30px 0 0}#header .logo{max-width:375px;text-align:center;margin:5px auto;float:left}#header .logo a{display:block;font-size:28px;line-height:40px;color:#fff}#header .logo a i.fa{margin-right:10px;vertical-align:middle;position:relative;top:-3px}#header .logo a img{display:block;max-width:90px;height:auto;margin:0 auto}#header nav{position:relative;z-index:100;text-align:right;float:right;padding-top:13px}#header nav ul.menu{font-size:0}#header nav ul.menu li{display:inline-block;padding:20px 15px 20px;position:relative}#header nav ul.menu li a{display:block;font-family:Lato,sans-serif;font-size:18px;font-weight:700;line-height:1.45;letter-spacing:.5px;position:relative;z-index:1;color:#fff}#header nav ul.menu li a:hover,#header nav ul.menu li.current-menu-item>a{color:#ffd54f}#header .share-buttons{float:right;background:rgba(0,0,0,.1);color:#fff;padding:5px 25px;border-radius:25px;font-size:20px;margin:7px 0 0 15px;position:relative;z-index:101}#header .share-buttons a{display:inline-block;color:#fff;margin:0 7px;position:relative;z-index:2}#header .share-buttons a:hover{transform:translateY(-2px)}#header div.border{border-bottom:2px solid rgba(0,0,0,.05);margin-top:30px}#header .is-sticky div.menu-wrapper{padding:5px 0;z-index:1000;width:100%;background:#111;animation:headerPinnedSlideDown .5s}#header .is-sticky div.menu-wrapper .logo{float:left;margin:10px 0;padding-top:0;padding-bottom:0;max-width:160px}#header .is-sticky div.menu-wrapper .ads,#header .is-sticky div.menu-wrapper .clear.ad{display:none}#header .is-sticky div.menu-wrapper nav{text-align:right;float:right;margin-top:-3px}#header .is-sticky div.menu-wrapper .share-buttons{margin-top:5px;display:none}#header .is-sticky div.menu-wrapper div.border{display:none}@keyframes headerPinnedSlideDown{0%{top:-100%}100%{top:0}}.navbar{overflow:hidden;background-color:#333}.navbar a{float:left;font-size:16px;color:#fff;text-align:center;padding:14px 16px;text-decoration:none}.dropdown{display:inline-block;padding:20px 15px 20px;position:relative}.dropdown .dropbtn{background-color:transparent;display:block;font-size:18px;font-weight:700;line-height:1.45;letter-spacing:.5px;position:relative;z-index:1;color:#fff}.dropdown-content,.profile-content{display:none;position:absolute;background-color:#fff;width:17rem;box-shadow:0 20px 13px 0 rgba(0,0,0,.2);z-index:1;border-radius:5px;margin-top:10px}.dropdown-content .header-progress-bar,.profile-content .header-progress-bar{padding-bottom:7px;border-radius:5px}.dropdown-content .header-progress-bar:hover,.profile-content .header-progress-bar:hover{background-color:#ddd}.dropdown-content.right-align,.profile-content.right-align{right:0}.dropdown-content a,.profile-content a{float:none;color:#000!important;padding:12px 16px;text-decoration:none;display:block;text-align:left;font-size:14px!important;line-height:1.45;letter-spacing:.5px;border-radius:5px;font-weight:400!important}.dropdown-content a:hover,.profile-content a:hover{background-color:#ddd}.dropdown-content.show-block,.profile-content.show-block{display:block}.show-after-md{display:none!important}.profile-info{display:inline-block;position:relative;top:8px;padding:0 15px 20px!important}.profile-info .account-logo{width:32px;border-radius:50%}.progress-bar-section{margin:0 16px;border-radius:5px;background-color:#fff;display:none;box-shadow:0 2px 3px -1px rgba(153,147,153,.89)}.profile-progress-bar{height:8px;border-radius:5px;background-color:#92ca4a;z-index:1}.notification-circle{height:10px;width:10px;border-radius:5px;background-color:red;position:absolute;top:0;right:14px;display:none}.notification-circle-mobile{height:10px;width:10px;border-radius:5px;background-color:red;position:absolute;top:0;right:14px;display:none}.update-profile-link{color:#000;font-size:11px!important;position:absolute;right:16px;top:14px;text-decoration:underline;cursor:pointer;display:none}@media screen and (min-width:981px){.dropdown:hover .dropdown-content,.profile-info:hover .profile-content{display:block}.dropdown:hover .dropbtn,.navbar a:hover{color:#ffd54f}.main-nav.nav-tag{display:none}}@media screen and (max-width:980px){.dropdown{display:block;padding:5px 20px}.dropdown.show-block button{color:#ffd54f}.dropdown.show-block .dropdown-content{display:block}.dropdown .dropbtn{color:#494949}.dropdown-content{position:relative;border:none;width:13rem;box-shadow:none}.dropdown-content a{border-bottom:1px solid #f1f1f1;border-radius:0}.profile-info{position:absolute!important;top:20px}.show-after-md{display:block!important}.mobile-mar-header{margin-top:44px}.filters .filter-home{display:none}.update-profile-link{color:#f7672d;right:-30px;top:11px}.notification-circle-mobile{top:10px;right:-5px}}#footer .subscribe,.subscribe-custom .subscribe{background:#111 url(/assets/images/bg-subscribe.jpg) no-repeat bottom center;background-size:cover;color:rgba(255,255,255,.5);font-size:15px;position:relative;z-index:2;padding:80px 0;text-shadow:0 1px 0 #000}#footer .subscribe:before,.subscribe-custom .subscribe:before{content:'';display:block;position:absolute;left:0;top:0;width:100%;height:100%;z-index:1;background:#2c45a3;opacity:.5;z-index:-1}#footer .subscribe .left,.subscribe-custom .subscribe .left{padding-left:0!important;padding-right:0}#footer .subscribe .right,.subscribe-custom .subscribe .right{float:right;padding-right:0}#footer .subscribe .right #single #comments .comment .comment-author,#footer .subscribe .right .title,#single #comments .comment #footer .subscribe .right .comment-author,#single #comments .comment .subscribe-custom .subscribe .right .comment-author,.subscribe-custom .subscribe .right #single #comments .comment .comment-author,.subscribe-custom .subscribe .right .title{letter-spacing:.5px}#footer .subscribe .right p,.subscribe-custom .subscribe .right p{color:#fff;margin-top:3px;letter-spacing:.6px}#footer .subscribe form,.subscribe-custom .subscribe form{position:relative;z-index:1}#footer .subscribe form .inputbox,.subscribe-custom .subscribe form .inputbox{border-color:transparent;background:rgba(255,255,255,.35);color:#fff;height:50px;margin:0;padding:12px 30px;padding-right:45px;text-shadow:0 1px 0 rgba(0,0,0,.25)}#footer .subscribe form .inputbox::-webkit-input-placeholder,.subscribe-custom .subscribe form .inputbox::-webkit-input-placeholder{color:#fff;text-shadow:0 1px 0 rgba(0,0,0,.25)}#footer .subscribe form .inputbox:-moz-placeholder,.subscribe-custom .subscribe form .inputbox:-moz-placeholder{color:#fff;text-shadow:0 1px 0 rgba(0,0,0,.25)}#footer .subscribe form .inputbox::-moz-placeholder,.subscribe-custom .subscribe form .inputbox::-moz-placeholder{color:#fff;text-shadow:0 1px 0 rgba(0,0,0,.25)}#footer .subscribe form .inputbox:-ms-input-placeholder,.subscribe-custom .subscribe form .inputbox:-ms-input-placeholder{color:#fff;text-shadow:0 1px 0 rgba(0,0,0,.25)}#footer .subscribe form .submit,.subscribe-custom .subscribe form .submit{position:absolute;right:5px;top:50%;color:#fff;background:#92c94a;width:40px;height:40px;border-radius:20px;backface-visibility:hidden;margin-top:-20px;text-align:center;line-height:40px}#footer .subscribe form .submit img,#footer .subscribe form .submit svg,.subscribe-custom .subscribe form .submit img,.subscribe-custom .subscribe form .submit svg{width:15px;margin-top:12px;fill:#fff}#footer .subscribe form .submit:hover,.subscribe-custom .subscribe form .submit:hover{width:50px}#footer .subscribe #single #comments .comment .comment-author,#footer .subscribe .title,#single #comments .comment #footer .subscribe .comment-author,#single #comments .comment .subscribe-custom .subscribe .comment-author,.subscribe-custom .subscribe #single #comments .comment .comment-author,.subscribe-custom .subscribe .title{margin-bottom:0;line-height:1}#footer .subscribe #single #comments .comment .comment-author i.fa,#footer .subscribe .title i.fa,#single #comments .comment #footer .subscribe .comment-author i.fa,#single #comments .comment .subscribe-custom .subscribe .comment-author i.fa,.subscribe-custom .subscribe #single #comments .comment .comment-author i.fa,.subscribe-custom .subscribe .title i.fa{margin-right:5px;font-size:90%;vertical-align:middle;position:relative;top:-2px}#footer .widgets,.subscribe-custom .widgets{background:#92c94a;padding:50px 0 30px;color:#fff;border-bottom-left-radius:7px;border-bottom-right-radius:7px}#footer .widgets .default-sidebar,#footer .widgets .mobile-sidebar,.subscribe-custom .widgets .default-sidebar,.subscribe-custom .widgets .mobile-sidebar{display:flex;flex-flow:row wrap}#footer .widgets .grid-33,.subscribe-custom .widgets .grid-33{flex-grow:1}#footer .widgets a,.subscribe-custom .widgets a{color:#fff}#footer .logo,.subscribe-custom .logo{margin:50px 20px 20px;text-align:center}#footer .logo a i.fa,.subscribe-custom .logo a i.fa{margin-right:5px}#footer a#back-to-top,.subscribe-custom a#back-to-top{position:fixed;right:20px;bottom:20px;text-align:center;z-index:99;border:0;width:40px;height:40px;text-align:center;line-height:40px;padding:0}#footer a#back-to-top img,.subscribe-custom a#back-to-top img{vertical-align:middle}#footer a#back-to-top i.fa,.subscribe-custom a#back-to-top i.fa{margin:0}#footer .post .thumb,.subscribe-custom .post .thumb{min-height:80px}#footer .published,.subscribe-custom .published{text-align:center;color:rgba(255,255,255,.5);padding:50px;font-size:12px}#footer .published a,.subscribe-custom .published a{color:#fff}.subscribe-custom{margin:0 -31px!important}div.filters{padding:30px 0;background:#92c94a;border-top-left-radius:7px;border-top-right-radius:7px}div.articles{overflow:hidden;padding:0;display:flex;flex-flow:row wrap}div.articles .absolute.widget.tag-cloud,div.articles div.tags.absolute{text-align:right}div.articles .separator{height:1px;background:#e5e5e5;margin:0 -10px 0}div.articles .separator.last{margin-top:-1px}#single #comments .comment div.articles h3.comment-author,div.articles #single #comments .comment h3.comment-author,div.articles h3.title{margin-bottom:20px}div.articles article{padding-top:30px;position:relative;z-index:1;border-bottom:1px solid #e5e5e5}div.articles article div.border{content:'';position:absolute;left:-1px;top:0;width:1px;height:9999px;background:#e5e5e5}div.articles article.first-row div.border{display:none}div.articles article .featured-image{position:relative;z-index:1;overflow:hidden}div.articles article a.thumb{min-height:250px}div.articles article div.meta{margin:20px 0 13px}#single #comments .comment div.articles article .comment-author,div.articles article #single #comments .comment .comment-author,div.articles article .title{font-size:24px;margin-bottom:10px;line-height:1.35}div.articles article div.post-excerpt{margin-bottom:90px}div.articles article iframe{display:block;max-height:500px;width:100%}div.articles article.no-thumb div.meta{margin-top:5px}div.articles .featured-image{position:relative;z-index:2;border-radius:15px;overflow:hidden;box-shadow:0 3px 12px -1px rgba(7,10,25,.2),0 22px 27px -20px rgba(7,10,25,.2);margin-bottom:23px}time{text-transform:capitalize}div.meta{font-size:13px;color:#6f6f6f}div.meta .fa{font-size:15px;vertical-align:middle;margin-right:5px;position:relative;z-index:1}div.meta time{display:inline-block}div.meta svg{width:15px;height:15px;vertical-align:middle;margin-right:6px;fill:#6f6f6f;margin-top:-2px}div.meta .download{margin-left:12px}div.meta .download svg{width:15px;height:15px}div.meta a.comments{color:#6f6f6f}div.meta a.comments span.disqus-comment-count{font-size:12px}div.meta a.comments svg{width:15px;height:15px;margin-right:4px}div.meta a.comments i.fa{margin-right:3px;font-size:14px;top:-2px}div.meta a.comments:hover{color:#111}.author-meta{position:absolute;bottom:25px;right:30px;line-height:1}.author-meta .author-image{display:block;width:40px;height:40px;border-radius:50%;float:right;margin-left:13px;margin-top:3px;background-color:#111;box-shadow:2px 2px 5px 1px rgba(0,0,0,.25)}.author-meta a{float:right;display:block;line-height:33px;font-size:13px;color:#92c94a;text-align:right}.author-meta a .author-name{display:inline-block;min-width:100px;font-size:14px;font-weight:500;letter-spacing:.5px}.author-meta a .author-count{display:block;color:#7c7c7c;line-height:1;margin-top:-4px;letter-spacing:.75px}.author-meta a:hover{color:#494949}.author-meta.no-counter .author-name{margin-top:5px}.pagination{border-top:1px solid #e5e5e5;margin-top:-1px;text-align:center;background:#fff}#single .pagination{border:0;padding-top:0}.pagination div.nav{display:inline-block}.pagination div.nav>span{display:inline-block;margin:0 10px;background:#92c94a;height:40px;font-size:15px;color:#fff;line-height:40px;padding:0 25px;font-family:Lato,sans-serif;border-radius:25px}.pagination div.nav a{vertical-align:top;display:inline-block;padding:0 20px;height:36px;line-height:36px;border-radius:25px}.pagination div.nav a span{padding:0;margin:0}.pagination.link-pages div.nav a,.pagination.link-pages div.nav>span{margin:0 5px 5px}div.left-content{border-right:1px solid #e5e5e5;margin-right:-1px;padding:50px 60px;padding-bottom:0}.classic div.left-content{padding-top:0;padding-bottom:0}.grid-sidebar div.left-content{padding:0}.no-active-sidebar div.left-content{width:auto;float:none}aside{border-left:1px solid #e5e5e5}aside .widget{padding:45px 0 50px;border-bottom:1px solid #e5e5e5;position:relative}aside .widget:after{content:'';display:block;position:absolute;left:25px;bottom:0;right:30px}.grid-sidebar aside .widget:first-child{padding-top:25px}aside.is-affixed .inner-wrapper-sticky{padding:0 30px}.widget a{color:#222}.widget .widget-title{margin-bottom:40px}#footer .widget{margin-bottom:30px}.widget.search{background:#92c94a;border:0;padding:30px 25px!important;border-top-right-radius:7px}.widget.search .widget-title{color:#fff}aside .widget.search{margin:0 -31px!important}#footer .widget.search{padding:0!important}#single.fullcover .widget.search{border-radius:0}.widget.text-widget .widget-content{margin-top:-9px}.widget.text-widget p{margin-bottom:20px}.widget.text-widget p:last-of-type{margin-bottom:0}.widget.tag-cloud div.tagcloud{margin-left:-3px}.widget.tag-cloud a{font-size:14px!important;margin:0 3px 8px 0}.widget.tag-cloud a .tag-link-count{margin-left:2px}#footer .widget.tag-cloud a{color:#fff;background:rgba(0,0,0,.12);font-size:15px!important;padding:4px 20px}#footer .widget.tag-cloud a:before{display:none}#footer .widget.tag-cloud a:hover{color:#fff;background:rgba(0,0,0,.2)}.widget.recent-articles .info{padding-top:0}.widget.recent-articles .item{margin-bottom:20px;position:relative;padding-left:100px;min-height:80px}.widget.recent-articles .item.no-thumb{padding:0}#single #comments .comment .widget.recent-articles .item .comment-author,.widget.recent-articles .item #single #comments .comment .comment-author,.widget.recent-articles .item .title{margin-bottom:0}#footer .widget.recent-articles .item #single #comments .comment .comment-author,#footer .widget.recent-articles .item .title,#single #comments .comment #footer .widget.recent-articles .item .comment-author{font-size:18px}.widget.recent-articles .item .thumb{width:80px;height:80px;border-radius:15px;background:0 0;position:absolute;left:0;top:0;padding:0;box-shadow:0 3px 12px -1px rgba(7,10,25,.2),0 22px 27px -20px rgba(7,10,25,.2)}.widget.recent-articles .item time{font-size:12px;color:#6f6f6f}.widget.recent-articles .item time svg{margin-right:5px;width:14px;height:14px;vertical-align:middle;margin-top:-3px;fill:#6f6f6f}#footer .widget.recent-articles .item time{color:#fff}#footer .widget.recent-articles .item time svg{fill:#fff}.widget.recent-articles .item:last-of-type{margin-bottom:0}aside .widget.recent-articles .item a:before{border:none}.widget.ep-flickr div.loading{text-align:center;padding:20px 0}.widget.ep-flickr.loaded .loading{display:none}.widget.ep-flickr ul{margin:0 -5px}.widget.ep-flickr ul li{display:block;padding:0 5px 10px}.widget.ep-flickr ul li .wrapper{border-radius:15px;overflow:hidden}.widget.ep-flickr ul li a{display:block;overflow:hidden;width:100%;position:relative;z-index:1;background-color:transparent;background-position:center center;background-repeat:no-repeat;-webkit-background-size:cover!important;-moz-background-size:cover!important;-o-background-size:cover!important;background-size:cover!important;padding-top:80%}.widget.ep-flickr ul li a:hover{background-color:#000}.widget.ep-flickr ul li a:hover:before{opacity:1;visibility:visible;transform:scale(1)}.widget.ep-flickr ul li a span.cover{height:100%;width:101%;position:absolute;left:0;top:0}.custom-side-bar{margin:0 -30px}.custom-side-bar .custom-card-side-bar{background:#fff;position:relative;z-index:2;padding:20px 30px}.custom-side-bar .custom-card-side-bar:not(:first-child){border-top:2px solid #e3e3e3}.custom-side-bar .custom-card-side-bar ul{list-style:none;margin-left:0;padding-left:20px;text-indent:-21px}.custom-side-bar .custom-card-side-bar ul li{font-size:16px;padding:5px 0}.custom-side-bar .custom-card-side-bar ul li::before{content:'';display:inline-block;width:10px;height:10px;border-radius:2px;background-color:#92c94a;margin-right:10px}.custom-side-bar .custom-card-side-bar ul li a:hover{color:#222}.subscribe-custom .grid-container{padding:0}#page #single #comments .comment h2.comment-author,#page h2.title,#single #comments .comment #page h2.comment-author{margin-bottom:10px;font-size:28px}#page .content{border-top-left-radius:10px;border-top-right-radius:10px}#page .post-content{padding-top:0}#home .content{margin-top:0;border-radius:0}#home .module-wrapper.no-counter{margin-top:50px}#home .module-wrapper.no-filters .content{border-top-right-radius:7px;border-top-left-radius:7px}#archives .content{overflow:inherit;margin-top:0;border-radius:0}.author #archives .content{margin-top:20px;border-top-left-radius:7px;border-top-right-radius:7px}#archives #author{margin-top:40px;border-top-left-radius:7px;border-top-right-radius:7px}#page-404 div.not-found{background:#ffd54f;color:#fff;box-shadow:inset 0 0 150px 0 rgba(222,57,74,.15);text-align:center;margin-bottom:30px;margin-top:-10px;border-radius:25px}#page-404 div.not-found #single #comments .comment .comment-author,#page-404 div.not-found .title,#single #comments .comment #page-404 div.not-found .comment-author{color:#fff;margin:0}#page-404 div.not-found #single #comments .comment .comment-author strong,#page-404 div.not-found .title strong,#single #comments .comment #page-404 div.not-found .comment-author strong{font-size:150%}#page-404 div.not-found i.fa{font-size:120px;margin:0 0 20px}#page-404 div.text #single #comments .comment .comment-author,#page-404 div.text .title,#single #comments .comment #page-404 div.text .comment-author{padding-bottom:5px}#page-404 div.buttons{margin-top:10px;text-align:center}div.share-container{position:absolute;z-index:100;margin-left:-85px;margin-top:0;height:0!important}div.share{border-radius:25px;overflow:hidden;background:#fff;width:50px;padding:5px 2px;box-shadow:5px 0 10px rgba(0,0,0,.1)}div.share a{display:block;color:#ffd54f;height:45px;font-size:17px;line-height:45px;text-align:center}div.share a:hover{transform:translateX(2px)}div.share a:first-child{border:0}div.share a.location{color:#92c94a}div.share a.website{color:#6ca100}div.share a.whatsapp{color:#1fb381}div.share a.facebook{color:#3b5998}div.share a.linkdin{color:#2671b1}div.share a.twitter{color:#00aced}div.share a.googleplus{color:#dd4b39}.no-sidebar #sidebar{display:none}.no-sidebar div.left-content{width:auto;border:0;margin-right:0;float:none}.no-sidebar div.left-content .featured-image{border-top-right-radius:7px;overflow:hidden}#single .post-format-wrapper{margin-top:50px;position:relative;z-index:2}#single .post-format-image{margin-top:0!important}#single .post-format-audio,#single .post-format-gallery,#single .post-format-video{border-radius:15px;overflow:hidden}#single .post-format-audio iframe,#single .post-format-gallery iframe,#single .post-format-video iframe{display:block}#single .post-format-video iframe{display:block;width:100%;height:450px}#single .post-format-gallery{position:relative;z-index:2}#single .post-format-gallery div.item{display:block!important;height:450px}#single .post-format-gallery div.item .fullimage{background-size:contain}#single .post-format-gallery .slick-prev{left:30px}#single .post-format-gallery .slick-next{right:30px}#single .post-content{padding-bottom:50px}#single .section.widget.tag-cloud,#single div.tags.section{padding-top:0}#single .featured-image div.info,#single.fullcover .featured-image .top{position:absolute;left:0;bottom:0;padding:15px 20px;z-index:3;color:#fff;text-shadow:0 2px 0 rgba(0,0,0,.3)}#single .featured-image div.info>a,#single.fullcover .featured-image .top>a{color:#fff}#single #comments .comment .featured-image div.info .comment-author,#single .featured-image div.info #comments .comment .comment-author,#single .featured-image div.info .title,#single.fullcover #comments .comment .featured-image .top .comment-author,#single.fullcover .featured-image .top #comments .comment .comment-author,#single.fullcover .featured-image .top .title{margin-bottom:7px}#single .absolute.widget.tag-cloud,#single div.tags.absolute{position:absolute;left:30px;top:30px}#single .absolute.widget.tag-cloud a,#single div.tags.absolute a{margin-right:5px;margin-left:0}#single.fullcover .featured-image{height:400px;position:relative;z-index:1;background-color:#222;border-top-left-radius:7px;border-top-right-radius:7px}#single.fullcover .featured-image:before{content:'';position:absolute;left:0;bottom:0;width:100%;height:30%;background:linear-gradient(to bottom,rgba(0,0,0,0) 0,rgba(0,0,0,.5) 100%)}#single.fullcover .featured-image .top{position:absolute;left:0;top:0;z-index:2;font-size:14px}#single.fullcover .featured-image .top i{font-size:15px!important}#single.fullcover .featured-image .top,#single.fullcover .featured-image div.info{padding:40px 60px}#single.fullcover #comments .comment .featured-image .top .comment-author,#single.fullcover #comments .comment .featured-image div.info .comment-author,#single.fullcover .featured-image .top #comments .comment .comment-author,#single.fullcover .featured-image .top .title,#single.fullcover .featured-image div.info #comments .comment .comment-author,#single.fullcover .featured-image div.info .title{margin-bottom:0}#single.fullcover .featured-image .top .widget.tag-cloud,#single.fullcover .featured-image .top div.tags,#single.fullcover .featured-image div.info .widget.tag-cloud,#single.fullcover .featured-image div.info div.tags{text-shadow:none;margin-bottom:10px}#single.fullcover .featured-image .top .widget.tag-cloud a,#single.fullcover .featured-image .top div.tags a,#single.fullcover .featured-image div.info .widget.tag-cloud a,#single.fullcover .featured-image div.info div.tags a{margin-left:0;margin-right:5px}#single.fullcover .featured-image .top time,#single.fullcover .featured-image div.info time{opacity:1;margin-right:20px;color:#fff}#single.fullcover .featured-image .top time svg,#single.fullcover .featured-image div.info time svg{fill:#fff}#single.fullcover .widget_search{border-radius:0}#single.standard div.left-content{padding-top:0}#single.standard .featured-image{position:relative;z-index:1;height:400px;margin:0 -60px;border-top-left-radius:7px}#single.standard .main-article div.meta{position:relative;z-index:2;padding:40px 0 25px}#single.standard .main-article div.meta time{margin-right:0}#single.standard .main-article div.meta .left{margin-top:0}#single.standard .main-article div.meta a.comments i.fa{top:-1px}#single.standard .main-article div.meta a.comments span.disqus-comment-count{font-size:11px}#single #comments .comment .no-thumb.comment-author,#single .title.no-thumb{margin-bottom:10px;font-weight:700}#single div.meta .download{margin-left:20px}#single.fullcover div.meta .download{color:#fff}#single .share-buttons{text-align:center;border-top:1px solid #e5e5e5;border-bottom:1px solid #e5e5e5;margin-top:50px}#single .share-buttons.remove-margine{margin-top:0}#single #comments .comment .share-buttons .comment-author,#single .share-buttons #comments .comment .comment-author,#single .share-buttons .title{display:inline-block;margin-right:15px}#single #comments nav.pagination .share-buttons a,#single .share-buttons #comments nav.pagination a,#single .share-buttons .button,#single .share-buttons .download-button,#single .share-buttons .pagination div.nav a,#single .share-buttons div.download a,.pagination div.nav #single .share-buttons a,div.download #single .share-buttons a{margin:0 5px;border:0!important;background:#111}@media (max-width:365px){#single #comments nav.pagination .share-buttons a,#single .share-buttons #comments nav.pagination a,#single .share-buttons .button,#single .share-buttons .download-button,#single .share-buttons .pagination div.nav a,#single .share-buttons div.download a,.pagination div.nav #single .share-buttons a,div.download #single .share-buttons a{margin:0}}#single #comments nav.pagination .share-buttons a i.fa,#single .share-buttons #comments nav.pagination a i.fa,#single .share-buttons .button i.fa,#single .share-buttons .download-button i.fa,#single .share-buttons .pagination div.nav a i.fa,#single .share-buttons div.download a i.fa,.pagination div.nav #single .share-buttons a i.fa,div.download #single .share-buttons a i.fa{font-size:18px}#single #comments nav.pagination .share-buttons a:hover,#single .share-buttons #comments nav.pagination a:hover,#single .share-buttons .button:hover,#single .share-buttons .download-button:hover,#single .share-buttons .pagination div.nav a:hover,#single .share-buttons div.download a:hover,.pagination div.nav #single .share-buttons a:hover,div.download #single .share-buttons a:hover{color:#fff;transform:translateY(-2px)}#single #comments nav.pagination .share-buttons a.whatsapp,#single .share-buttons #comments nav.pagination a.whatsapp,#single .share-buttons .button.whatsapp,#single .share-buttons .pagination div.nav a.whatsapp,#single .share-buttons .whatsapp.download-button,#single .share-buttons div.download a.whatsapp,.pagination div.nav #single .share-buttons a.whatsapp,div.download #single .share-buttons a.whatsapp{background:#1fb381!important}#single #comments nav.pagination .share-buttons a.facebook,#single .share-buttons #comments nav.pagination a.facebook,#single .share-buttons .button.facebook,#single .share-buttons .facebook.download-button,#single .share-buttons .pagination div.nav a.facebook,#single .share-buttons div.download a.facebook,.pagination div.nav #single .share-buttons a.facebook,div.download #single .share-buttons a.facebook{background:#135cb6!important}#single #comments nav.pagination .share-buttons a.linkdin,#single .share-buttons #comments nav.pagination a.linkdin,#single .share-buttons .button.linkdin,#single .share-buttons .linkdin.download-button,#single .share-buttons .pagination div.nav a.linkdin,#single .share-buttons div.download a.linkdin,.pagination div.nav #single .share-buttons a.linkdin,div.download #single .share-buttons a.linkdin{background:#2671b1!important}#single #comments nav.pagination .share-buttons a.twitter,#single .share-buttons #comments nav.pagination a.twitter,#single .share-buttons .button.twitter,#single .share-buttons .pagination div.nav a.twitter,#single .share-buttons .twitter.download-button,#single .share-buttons div.download a.twitter,.pagination div.nav #single .share-buttons a.twitter,div.download #single .share-buttons a.twitter{background:#00aced!important}#single #comments nav.pagination .share-buttons a.googleplus,#single .share-buttons #comments nav.pagination a.googleplus,#single .share-buttons .button.googleplus,#single .share-buttons .googleplus.download-button,#single .share-buttons .pagination div.nav a.googleplus,#single .share-buttons div.download a.googleplus,.pagination div.nav #single .share-buttons a.googleplus,div.download #single .share-buttons a.googleplus{background:#dd4b39!important}#single .share-buttons .permalink{position:relative;z-index:1;display:inline-block;margin-top:25px}#single .share-buttons .permalink input{display:block;width:450px;text-align:center;padding-right:60px;margin:0}#single .share-buttons .permalink .copy{position:absolute;right:20px;top:8px;color:#92c94a;font-size:18px;width:20px;height:20px;cursor:pointer}#single .share-buttons .permalink .copy svg{width:20px;height:18px;fill:#92c94a}#single section.related{padding:0;border:0}#single section.related article{position:relative;z-index:1;height:275px;background:#111;overflow:hidden}#single section.related article .thumb{display:block;position:absolute;left:0;top:0;width:101%;height:101%;z-index:1;-webkit-transition:all .3s ease;-moz-transition:all .3s ease;-ms-transition:all .3s ease;-o-transition:all .3s ease;transition:all .3s ease}#single section.related article .thumb:before{content:'';position:absolute;left:0;bottom:0;width:101%;height:101%;z-index:2;background:linear-gradient(to bottom,rgba(0,0,0,0) 0,rgba(0,0,0,.25) 100%);-webkit-transition:all .3s ease;-moz-transition:all .3s ease;-ms-transition:all .3s ease;-o-transition:all .3s ease;transition:all .3s ease}#single section.related article div.info,#single.fullcover .featured-image section.related article .top,#single.fullcover section.related article .featured-image .top{position:absolute;left:0;top:20%;right:0;text-align:center;padding:30px;color:#fff;z-index:3;text-shadow:0 2px 0 rgba(0,0,0,.3)}#single #comments .comment section.related article div.info .comment-author,#single section.related article div.info #comments .comment .comment-author,#single section.related article div.info .title,#single.fullcover #comments .comment .featured-image section.related article .top .comment-author,#single.fullcover #comments .comment section.related article .featured-image .top .comment-author,#single.fullcover .featured-image section.related article .top #comments .comment .comment-author,#single.fullcover .featured-image section.related article .top .title,#single.fullcover section.related article .featured-image .top #comments .comment .comment-author,#single.fullcover section.related article .featured-image .top .title{line-height:1.4}#single section.related article div.info p,#single.fullcover .featured-image section.related article .top p,#single.fullcover section.related article .featured-image .top p{margin-bottom:5px}#single #comments nav.pagination section.related article a,#single section.related article #comments nav.pagination a,#single section.related article .button,#single section.related article .download-button,#single section.related article .pagination div.nav a,#single section.related article div.download a,.pagination div.nav #single section.related article a,div.download #single section.related article a{width:40px;height:40px;line-height:40px;padding:0;position:absolute;left:20px;bottom:20px;z-index:5;text-align:center}#single #comments nav.pagination section.related article a img,#single section.related article #comments nav.pagination a img,#single section.related article .button img,#single section.related article .download-button img,#single section.related article .pagination div.nav a img,#single section.related article div.download a img,.pagination div.nav #single section.related article a img,div.download #single section.related article a img{margin-top:12px}#single #comments nav.pagination section.related article:hover a,#single section.related article:hover #comments nav.pagination a,#single section.related article:hover .button,#single section.related article:hover .download-button,#single section.related article:hover .pagination div.nav a,#single section.related article:hover div.download a,.pagination div.nav #single section.related article:hover a,div.download #single section.related article:hover a{width:50px}#single section.related article.next{text-align:right}#single #comments nav.pagination section.related article.next a,#single section.related article.next #comments nav.pagination a,#single section.related article.next .button,#single section.related article.next .download-button,#single section.related article.next .pagination div.nav a,#single section.related article.next div.download a,.pagination div.nav #single section.related article.next a,div.download #single section.related article.next a{left:auto;right:20px}#single section.related article .related .fa{font-size:60%;vertical-align:middle;margin:0 3px}#single section.related article div.overlay{position:absolute;left:0;bottom:0;width:100%;height:100%;z-index:2;-webkit-transition:all .3s ease;-moz-transition:all .3s ease;-ms-transition:all .3s ease;-o-transition:all .3s ease;transition:all .3s ease;background:linear-gradient(to bottom,rgba(0,0,0,.2) 0,rgba(0,0,0,.35) 100%)}#single section.related article:hover div.overlay{opacity:.75}#single #comments.hosted{padding-bottom:0}#single #comments .comment{display:block;margin-top:30px;position:relative;border-bottom:1px solid #e5e5e5;padding-bottom:24px}#single #comments .comment .avatar{padding:0;border-radius:50%}#single #comments .comment .right{padding-left:20px}#single #comments .comment .right .text{font-size:15px;margin-top:10px}#single #comments .comment .right .text p{padding-top:0;margin-bottom:15px}#single #comments .comment .comment-reply-link{display:inline-block;font-size:12px;padding:4px 15px;margin-top:5px}#single #comments .children{padding-left:90px}#single #comments .children .children{padding-left:13%}#single #comments li a.comment-edit-link{text-decoration:underline;font-style:italic;font-size:12px}#single #comments li.no-avatar div.right{margin-left:0}#single #comments nav.pagination{border:0;padding-top:25px}#single #comments #respond{padding-top:50px}#single #comments #respond .logged-in-as a:last-child{font-weight:700}#single #comments #respond #reply-title a{color:#92c94a;font-size:14px}#single #comments #respond #reply-title a:hover{color:#ffd54f}#single #comments #respond #form-author{width:49%;float:left}#single #comments #respond #form-email{width:49%;float:right}#single #comments #respond input[type=text],#single #comments #respond textarea{font-weight:500}#single #comments #respond .form-submit{padding-top:10px}#single #comments .pingback .right{padding:0}#single #comments .pingback cite{font-weight:600}#single #comments .pingback .date{display:block;font-size:13px}#single #comments .pingback .text{padding-top:15px;font-size:15px}#single .tag-title{display:inline-block;margin-right:5px}@media screen and (max-width:1200px){body{min-width:inherit}img{max-width:100%;height:auto}.grid-container{padding-left:40px;padding-right:40px}#header .logo{float:none;margin:10px auto}#header nav{float:none;text-align:center;margin:20px 0 10px}div.filters .nice-select{margin-left:15px}}@media screen and (min-width:1024px){.filters.post-page-filter{display:none}}@media screen and (max-width:980px){.no-sidebar .default-sidebar{display:none!important}.sticky-wrapper{height:0!important}.one-sidebar .left-content{width:auto}#single #comments .comment .comment-author,.title{font-size:20px}#single #comments .comment .ularge.comment-author,.title.ularge{font-size:34px}#single #comments .comment .download-button.comment-author,#single #comments .comment .large.comment-author,#single #comments .comment div.download a.comment-author,.title.download-button,.title.large,div.download #single #comments .comment a.comment-author,div.download a.title{font-size:28px}#single #comments .comment .medium.comment-author,.title.medium{font-size:24px}#single #comments .comment .small.comment-author,.title.small{font-size:16px}#single #comments .comment .comment-author,.title.usmall{font-size:13px}div.left-content{margin:0;border:0}aside{border:0}aside .widget_search{margin:0!important;background:0 0;padding-left:0!important;padding-right:0!important}div.articles article{border-bottom:1px solid #ddd}#single #comments .comment div.articles.classic article h4.comment-author,div.articles.classic article #single #comments .comment h4.comment-author,div.articles.classic article h4.title{font-size:24px;margin-bottom:0}div.articles.classic article div.meta{margin-top:10px}div.articles.classic article .post-excerpt{font-size:13px}div.articles.classic article .right{padding-left:inherit}div.articles.classic article.no-thumb .bottom{margin-top:0}#header{position:relative}#header .logo{max-width:60%}#header div.menu-mobile{display:block;position:absolute;left:40px;top:50%;font-size:30px;color:#fff;cursor:pointer;transform:translateY(-50%);z-index:200;-webkit-transition:all .3s ease;-moz-transition:all .3s ease;-ms-transition:all .3s ease;-o-transition:all .3s ease;transition:all .3s ease}#header div.menu-mobile.link-tags{left:initial;right:40px}#header div.menu-mobile i{vertical-align:middle}#header.menu-open div.menu-mobile.side-menu i:before{content:'\f00d'}#header.tag-open div.menu-mobile.link-tags i:before{content:'\f00d'}#header nav{position:absolute;left:40px;top:90%;background:#fff;margin:0;opacity:0;visibility:hidden;padding:15px;border-radius:5px;box-shadow:0 5px 15px 0 rgba(0,0,0,.15);float:none;text-align:left;-webkit-transition:all .3s ease;-moz-transition:all .3s ease;-ms-transition:all .3s ease;-o-transition:all .3s ease;transition:all .3s ease}#header nav.nav-tag{left:inherit;right:20px}#header nav ul.menu>li{display:block;padding:5px 20px}#header nav ul.menu>li.menu-item-has-children:after{font-family:FontAwesome;content:'\f105';display:block;color:#494949;position:absolute;font-size:16px;right:0;top:6px;z-index:5}#header nav ul.menu>li>a{padding:5px 0;color:#494949}#header nav ul.menu>li a:before{display:none}#header nav ul.sub-menu{left:100%;top:0;min-width:150px;max-width:300px}#header.menu-open nav.nav-menu{opacity:1;visibility:visible;top:100%;max-height:400px;overflow:scroll}#header.tag-open nav.nav-tag{opacity:1;visibility:visible;top:100%;max-height:400px;overflow:scroll}#header div.menu-wrapper{padding-bottom:10px;padding-top:15px}#header.advertising .logo{float:none}#home .content{border-top-left-radius:0!important;border-top-right-radius:0!important}#single.standard .featured-image{border-top-right-radius:7px}#footer.hide-default .default-sidebar,#footer.no-sidebar .widgets{display:none}#footer .mobile-sidebar{width:100%;display:flex;flex-wrap:wrap}#footer .mobile-sidebar .widget{padding:0 30px;box-sizing:border-box;flex-grow:1;width:50%}#footer .mobile-sidebar .widget .widget-title{color:#fff}}@media screen and (min-width:768px) and (max-width:990px){body{font-size:14px}.grid-container{padding-left:40px;padding-right:40px}.np-tablet{padding-left:0;padding-right:0}.nofloat-tablet{float:none!important}.widget{margin-bottom:30px}aside .default-sidebar,aside .mobile-sidebar{display:flex;flex-flow:row wrap}aside .widget{width:50%;float:left;border:0;padding:0 30px;flex-grow:1;box-sizing:border-box}aside .widget.widget_search{background:0 0}#single.fullcover .featured-image{height:325px}#single.fullcover .featured-image .top,#single.fullcover .featured-image div.info{padding:30px}div.articles article{flex-grow:1;background:#fff}#header div.menu-wrapper{padding:0!important;margin:20px 0 0!important}#header .logo{padding:20px!important;margin:0 auto!important}}@media screen and (max-width:767px){.force-var{padding:30px;margin:20px}[class^=grid]{padding-left:20px;padding-right:20px}body{font-size:13px}.section{padding-top:30px;padding-bottom:30px}.section.bordered{margin:0 -20px;padding-left:20px;padding-right:20px}.grid-container{padding-left:20px;padding-right:20px}.np-mobile{padding-left:0;padding-right:0}.nofloat-mobile{float:none!important}.content{margin-top:30px;padding:0 20px;border-bottom-left-radius:7px!important;border-bottom-right-radius:7px!important}div.left-content{padding-left:0;padding-right:0}#single #comments .comment .comment-author,.title{font-size:18px}#single #comments .comment .ularge.comment-author,.title.ularge{font-size:26px}#single #comments .comment .download-button.comment-author,#single #comments .comment .large.comment-author,#single #comments .comment div.download a.comment-author,.title.download-button,.title.large,div.download #single #comments .comment a.comment-author,div.download a.title{font-size:22px}#single #comments .comment .medium.comment-author,.title.medium{font-size:20px}#single #comments .comment .small.comment-author,.title.small{font-size:14px}#single #comments .comment .comment-author,.title.usmall{font-size:12px}.pagination div.nav a,.pagination div.nav>span{padding:0 15px;font-size:13px;height:30px;line-height:30px;margin-bottom:10px}.pagination div.nav>span{height:34px;line-height:34px;margin:0 5px}.pagination div.nav a span{padding:0;margin:0}#search-results div.box{padding:0}div.map{min-height:250px}div.map div#map_canvas{height:250px}div.filters{margin:0}input[type=email],input[type=password],input[type=tel],input[type=text],input[type=url],textarea{padding:12px 25px}div.download a{font-size:16px}#header .logo{max-width:200px;margin:0 auto 0;padding:5px 10px!important}#header.classic .logo,#header.classic nav{margin-top:0}#header div.menu-mobile{left:20px;font-size:20px}#header div.menu-mobile.link-tags{left:initial;right:20px}#header div.menu-wrapper{padding:0!important;margin:20px 0 0!important}#header nav{left:20px}#header nav ul.menu li.menu-item-has-children{margin-right:0}#header nav ul.menu li.menu-item-has-children:after{font-family:FontAwesome;content:'\f107';display:block;color:#494949;position:absolute;font-size:14px;right:10px;top:7px;z-index:5}#header nav ul.menu li.menu-item-has-children:hover>ul.sub-menu{opacity:1;visibility:visible;max-height:50vh;padding:5px 0;overflow:auto}#header nav ul.sub-menu{position:relative!important;left:auto!important;top:auto!important;max-height:0;overflow:hidden;box-shadow:none;background:0 0;padding:0;transform:none!important;max-width:210px;margin-left:-10px;margin-right:-20px}#header nav ul.sub-menu li a{padding:10px}#header nav ul.sub-menu ul.sub-menu{margin-left:5px}#header nav ul.sub-menu ul.sub-menu li a{padding-left:10px}div.articles{display:block}div.articles article{padding-bottom:20px;padding-left:0;padding-right:0;min-height:inherit}div.articles article div.border{display:none}div.articles article div.post-excerpt{margin-bottom:0}div.articles article .post-format-gallery,div.articles article .post-format-gallery div.item,div.articles article a.thumb,div.articles article iframe{min-height:200px;height:200px!important}div.articles article div.meta a{margin-bottom:7px}div.articles .author-meta{position:relative;bottom:auto;right:auto;margin-top:20px}div.articles.classic article{padding:25px 0}div.articles.classic article .right{padding-top:10px}div.articles.classic article .bottom{padding:0}div.articles.classic article .bottom .meta{padding:0 15px;margin-bottom:15px}#single #comments nav.pagination div.articles.classic article .bottom a,.pagination div.nav div.articles.classic article .bottom a,div.articles.classic article .bottom #single #comments nav.pagination a,div.articles.classic article .bottom .button,div.articles.classic article .bottom .download-button,div.articles.classic article .bottom .pagination div.nav a,div.articles.classic article .bottom div.download a,div.download div.articles.classic article .bottom a{margin-top:20px}div.articles.classic article.no-thumb .bottom{margin-top:-5px}div.articles.classic .author-meta{margin-top:0}#author{padding:30px 20px 20px}#author #single.fullcover .featured-image .top,#author div.info,#single.fullcover .featured-image #author .top{max-width:inherit;font-size:13px}.ads{padding-bottom:0}.epcl-carousel{margin:20px 20px 0;padding:0}.epcl-carousel .slick-next,.epcl-carousel .slick-prev{width:40px!important;height:40px!important}.epcl-carousel .item article{margin:0}.epcl-carousel .item .img{min-height:250px!important}div.share-container{margin:0;height:auto!important;float:none}div.share{margin:20px 0;float:none}div.share a{display:inline-block;border-radius:7px;margin:0 1px}#single .featured-image{margin:0 -20px!important;height:250px!important}#single .featured-image div.info,#single.fullcover .featured-image .top{padding:10px 15px}#single.fullcover .featured-image .top,#single.fullcover .featured-image div.info{padding:20px}#single.fullcover #comments .comment .featured-image .top .comment-author,#single.fullcover #comments .comment .featured-image div.info .comment-author,#single.fullcover .featured-image .top #comments .comment .comment-author,#single.fullcover .featured-image .top .title,#single.fullcover .featured-image div.info #comments .comment .comment-author,#single.fullcover .featured-image div.info .title{font-size:22px}#single.fullcover div.left-content{padding-top:20px}#single.standard div.meta{padding:25px 0!important;text-align:center}#single.standard div.share{margin:0 0 25px;text-align:center}#single .post-format-wrapper{margin-top:20px}#single #comments .comment .share-buttons .comment-author,#single .share-buttons #comments .comment .comment-author,#single .share-buttons .title{display:block;margin-right:0}#single .share-buttons .permalink input{width:100%}#single .absolute.widget.tag-cloud,#single div.tags.absolute{left:15px;top:15px}#single section.related article{height:225px}#single .post-format-video iframe{max-height:250px}#single .post-format-gallery div.item{height:250px}#single .post-format-gallery .slick-prev{left:15px}#single .post-format-gallery .slick-next{right:15px}#single #comments #respond #form-author,#single #comments #respond #form-email{width:100%;float:none}#single #comments .children{padding-left:20px}#single #comments .comment .date{font-size:11px}#single #comments .comment .right{padding-left:20px;padding-right:20px}#single #comments .children{margin-left:0}#single #comments .comment .right .text{font-size:13px}#page #single .featured-image{height:200px!important}#page #single .post-content{padding-top:30px}#archives #author{margin:0 -20px}#footer{margin-top:30px}#footer .subscribe .left{padding-left:20px!important;padding-right:20px!important}#footer .subscribe .right{float:none;margin-bottom:20px;text-align:center;padding-right:20px}#footer .subscribe p{margin-top:5px}#footer .widgets{padding:30px 0}#footer .widgets>div{width:100%}#footer .widget{margin-top:30px}#footer .widget:first-child{margin-top:0}#footer .mobile-sidebar .widget{width:100%}#footer .logo{margin:20px}div.text{font-size:14px}div.text h1{font-size:24px}div.text h2{font-size:22px}div.text h3{font-size:20px}div.text h4{font-size:18px}div.text h5{font-size:16px}div.text h6{font-size:14px}div.text blockquote{padding:15px 25px}div.text iframe{max-width:100%;height:200px}div.text code[class*=language-],div.text pre,div.text pre[class*=language-]{max-height:300px;white-space:pre}div.text table{display:block;overflow:auto;padding:0}div.text table tbody{overflow:auto}div.text .kg-image-card{width:100%;margin:0 auto 25px}div.text .kg-image-card.kg-width-wide{width:100%}div.text .kg-image-card.kg-width-full{width:100%}div.text .kg-embed-card iframe{height:250px;margin-top:0!important}div.text .download a{font-size:16px;padding:5px 20px}.filters.post-page-filter{margin:0 -20px}#notificationDate{display:none}}.hide{display:none}.fixed-notification{position:fixed!important;top:0;left:0}#top-notification{position:relative;display:none;background:#fecd35;text-align:center;overflow:hidden;-webkit-box-shadow:0 0 5px #000;-moz-box-shadow:0 0 5px #000;box-shadow:0 0 5px #000;padding:5px 0;z-index:9000;line-height:2em;width:100%}.main-contain-non{padding:0 40px}#close{position:absolute;right:0;width:40px;height:40px;top:0;font-weight:600;cursor:pointer}#close i{margin-top:13px}.btn-campaign{padding:5px 20px;margin:5px 10px;background:#fff;border-radius:18px;white-space:nowrap}.btn-black-patch{padding:0 7px;background:#fff;color:#000;border-radius:3px;display:inline-block;min-width:30px}.time-count-container{margin-right:10px}.blog-iframe{width:100%;height:384px}@media screen and (max-width:765px){.blog-iframe{height:80vh}}@media screen and (max-width:900px) and (min-width:764px){.blog-iframe{height:54vh}}.header-pop-up{text-align:center;font-size:20px;margin-bottom:20px;padding-bottom:10px;border-bottom:1px solid grey}.pop-up-overlay{overflow-y:auto;background-color:rgba(0,0,0,.4);position:fixed;z-index:1060;right:0;bottom:0;justify-content:center;left:0;top:0;display:none;padding:0 10px}.pop-up-overlay.show{display:block}.pop-up-overlay .body-popup{position:relative;box-sizing:border-box;flex-direction:column;justify-content:center;width:50em;max-width:100%;border:none;border-radius:.3125em;background:#fff;font-family:inherit;font-size:1rem;margin:auto;margin-top:20vh;padding:10px 0}@media screen and (max-width:765px){.pop-up-overlay .body-popup{margin-top:5vh}}.pop-up-overlay .close-poup{position:absolute;height:35px;width:35px;top:0;right:0;text-align:center}.cookie-policy{display:none;color:#fff;bottom:0;text-align:left;z-index:9999;overflow:hidden;position:fixed;left:0;width:100%}.cookie-policy .cookie-policy-header{font-size:16px;padding:20px;background-color:#000;text-align:center}.cookie-policy .cookies-pull-tap{padding:5px 0}.cookie-policy .main-container-cookie{background-color:#000;padding:20px}.cookie-policy .cookie-content{width:calc(90% - 20px)}.cookie-policy .cookie-description{font-size:14px}.cookie-policy .last-cookie-panel{text-align:center;width:10%;display:inline-block;position:absolute;top:50%;right:0}.cookie-policy .read-more{color:#fff;text-decoration:underline}.cookie-pinned{position:fixed;bottom:0;background:green;border-radius:5px;padding:10px;z-index:9999}div.text a:not([class]){word-break:break-word}@media screen and (max-width:765px){.btn-black-patch{line-height:2em}.time-count-container{line-height:3em}.cookie-policy .cookie-content{display:block;width:100%}.cookie-policy .last-cookie-panel{position:relative;display:block;width:100%;padding-top:5px}}  </style>

  <link href="./Optimal Portfolio Construction Using Machine Learning_files/plugins.min.css" type="text/css" rel="stylesheet" as="style" onload="this.rel=&#39;stylesheet&#39;">


  <style type="text/css">
    /* Custom code changes here  */
  </style>

  <!--[if lt IE 9]>
  <link rel="stylesheet" type="text/css" href="/assets/dist/grids-ie.css?v=5048d44d27">
  <script src="/assets/js/html5shiv.min.js?v=5048d44d27"></script>
  <![endif]-->

  <meta name="description" content="This article talks about the Stereoscopic Portfolio Optimization framework and how it can be used to improve a quantitative trading strategy.">
    <link rel="shortcut icon" href="https://blog.quantinsti.com/favicon.png" type="image/png">
    <link rel="canonical" href="https://blog.quantinsti.com/optimal-portfolio-construction-machine-learning/">
    <meta name="referrer" content="no-referrer-when-downgrade">
    
    <meta property="og:site_name" content="QuantInsti">
    <meta property="og:type" content="article">
    <meta property="og:title" content="Optimal Portfolio Construction Using Machine Learning">
    <meta property="og:description" content="This article talks about the Stereoscopic Portfolio Optimization framework and how it can be used to improve a quantitative trading strategy. Concepts such as Gaussian Mixture Models, K-Means Clustering, and Random Forests have also been reviewed.">
    <meta property="og:url" content="https://blog.quantinsti.com/optimal-portfolio-construction-machine-learning/">
    <meta property="og:image" content="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/Optimal-Portfolio-Construction-Using-Machine-Learning.png">
    <meta property="article:published_time" content="2018-08-10T15:08:08.000Z">
    <meta property="article:modified_time" content="2020-04-03T07:43:18.000Z">
    <meta property="article:tag" content="Portfolio &amp;amp; Risk Management">
    <meta property="article:tag" content="Machine Learning">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Optimal Portfolio Construction Using Machine Learning">
    <meta name="twitter:description" content="This article talks about the Stereoscopic Portfolio Optimization framework and how it can be used to improve a quantitative trading strategy. Concepts such as Gaussian Mixture Models, K-Means Clustering, and Random Forests have also been reviewed.">
    <meta name="twitter:url" content="https://blog.quantinsti.com/optimal-portfolio-construction-machine-learning/">
    <meta name="twitter:image" content="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/Optimal-Portfolio-Construction-Using-Machine-Learning.png">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="QuantInsti">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="Portfolio &amp; Risk Management, Machine Learning">
    <meta property="og:image:width" content="900">
    <meta property="og:image:height" content="470">
    
    <script async="" src="./Optimal Portfolio Construction Using Machine Learning_files/fbevents.js.téléchargement"></script><script type="text/javascript" async="" src="./Optimal Portfolio Construction Using Machine Learning_files/f.txt"></script><script type="text/javascript" async="" src="./Optimal Portfolio Construction Using Machine Learning_files/analytics.js.téléchargement"></script><script async="" src="./Optimal Portfolio Construction Using Machine Learning_files/gtm.js.téléchargement"></script><script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "QuantInsti",
        "logo": "https://d1rwhvwstyk9gu.cloudfront.net/test/2019/05/current-QI.png"
    },
    "headline": "Optimal Portfolio Construction Using Machine Learning",
    "url": "https://blog.quantinsti.com/optimal-portfolio-construction-machine-learning/",
    "datePublished": "2018-08-10T15:08:08.000Z",
    "dateModified": "2020-04-03T07:43:18.000Z",
    "keywords": "Portfolio & Risk Management, Machine Learning",
    "description": "This article talks about the Stereoscopic Portfolio Optimization (SPO) framework and how it can be used to improve a quantitative trading strategy. Concepts such as Gaussian Mixture Models, K-Means Clustering, and Random Forests have also been reviewed.",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://blog.quantinsti.com/"
    }
}
    </script>

    <script src="./Optimal Portfolio Construction Using Machine Learning_files/ghost-sdk.min.js.téléchargement"></script>
<script>
ghost.init({
	clientId: "ghost-frontend",
	clientSecret: "2918ebbecb09"
});
</script>
    <meta name="generator" content="Ghost 2.21">
    <link rel="alternate" type="application/rss+xml" title="QuantInsti" href="https://blog.quantinsti.com/rss/">

  <script type="text/javascript">
    // Theme Config, check the documentation before edit this file
    var search_engine_key = '9d0d59c57631e7f96cb982502e';
    var search_api = "/ghost/api/v2/content/posts/?key=" + search_engine_key + "&limit=all&include=tags&fields=id,title,meta_title,meta_description,created_at,updated_at,published_at,custom_excerpt,primary_tag,url,slug,excerpt";
  </script>

  <!-- Google Tag Manager -->
  <script>(function (w, d, s, l, i) {
      w[l] = w[l] || []; w[l].push({
        'gtm.start':
          new Date().getTime(), event: 'gtm.js'
      }); var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
          'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-WHQTVCL');</script>
  <!-- End Google Tag Manager -->
<script src="./Optimal Portfolio Construction Using Machine Learning_files/OneSignalPageSDKES6.js.téléchargement" async=""></script><script src="./Optimal Portfolio Construction Using Machine Learning_files/f(1).txt"></script><style id="isso-style" type="text/css">#isso-thread * {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
}
#isso-thread .isso-comment-header a {
    text-decoration: none;
}

#isso-thread {
    padding: 0;
    margin: 0;
}
#isso-thread > h4 {
    color: #555;
    font-weight: bold;
}
#isso-thread > .isso-feedlink {
    float: right;
    padding-left: 1em;
}
#isso-thread > .isso-feedlink > a {
    font-size: 0.8em;
    vertical-align: bottom;
}
#isso-thread .textarea {
    min-height: 58px;
    outline: 0;
}
#isso-thread .textarea.placeholder {
    color: #757575;
    margin: 15px 0px;
}

#isso-root .isso-comment {
    max-width: 68em;
    padding-top: 0.95em;
    margin: 0.95em auto;
}
#isso-root .preview .isso-comment {
    padding-top: 0;
    margin: 0;
}
#isso-root .isso-comment:not(:first-of-type),
.isso-follow-up .isso-comment {
    border-top: 1px solid rgba(0, 0, 0, 0.1);
}
.isso-comment > div.avatar {
    display: block;
    float: left;
    width: 7%;
    margin: 3px 15px 0 0;
}
.isso-comment > div.avatar > svg {
    max-width: 48px;
    max-height: 48px;
    border: 1px solid rgba(0, 0, 0, 0.2);
    border-radius: 3px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}
.isso-comment > div.text-wrapper {
    display: block;
}
.isso-comment .isso-follow-up {
    padding-left: calc(7% + 20px);
}
.isso-comment > div.text-wrapper > .isso-comment-header, .isso-comment > div.text-wrapper > .isso-comment-footer {
    font-size: 0.95em;
}
.isso-comment > div.text-wrapper > .isso-comment-header {
    font-size: 0.85em;
}
.isso-comment > div.text-wrapper > .isso-comment-header .spacer {
    padding: 0 6px;
}
.isso-comment > div.text-wrapper > .isso-comment-header .spacer,
.isso-comment > div.text-wrapper > .isso-comment-header a.permalink,
.isso-comment > div.text-wrapper > .isso-comment-header .note,
.isso-comment > div.text-wrapper > .isso-comment-header a.parent {
    color: gray !important;
    font-weight: normal;
    text-shadow: none !important;
}
.isso-comment > div.text-wrapper > .isso-comment-header .spacer:hover,
.isso-comment > div.text-wrapper > .isso-comment-header a.permalink:hover,
.isso-comment > div.text-wrapper > .isso-comment-header .note:hover,
.isso-comment > div.text-wrapper > .isso-comment-header a.parent:hover {
    color: #606060 !important;
}
.isso-comment > div.text-wrapper > .isso-comment-header .note {
    float: right;
}
.isso-comment > div.text-wrapper > .isso-comment-header .author {
    font-weight: bold;
    color: #555;
}
.isso-comment > div.text-wrapper > .textarea-wrapper .textarea,
.isso-comment > div.text-wrapper > .textarea-wrapper .preview {
    margin-top: 0.2em;
}
.isso-comment > div.text-wrapper > div.text p {
    margin-top: 0.2em;
}
.isso-comment > div.text-wrapper > div.text p:last-child {
    margin-bottom: 0.2em;
}
.isso-comment > div.text-wrapper > div.text h1,
.isso-comment > div.text-wrapper > div.text h2,
.isso-comment > div.text-wrapper > div.text h3,
.isso-comment > div.text-wrapper > div.text h4,
.isso-comment > div.text-wrapper > div.text h5,
.isso-comment > div.text-wrapper > div.text h6 {
    font-size: 130%;
    font-weight: bold;
}
.isso-comment > div.text-wrapper > div.textarea-wrapper .textarea,
.isso-comment > div.text-wrapper > div.textarea-wrapper .preview {
    width: 100%;
    border: 1px solid #f0f0f0;
    border-radius: 2px;
    box-shadow: 0 0 2px #888;
}
.isso-comment > div.text-wrapper > .isso-comment-footer {
    font-size: 0.80em;
    color: gray !important;
    clear: left;
}
.isso-feedlink,
.isso-comment > div.text-wrapper > .isso-comment-footer a {
    font-weight: bold;
    text-decoration: none;
}
.isso-feedlink:hover,
.isso-comment > div.text-wrapper > .isso-comment-footer a:hover {
    color: #111111 !important;
    text-shadow: #aaaaaa 0 0 1px !important;
}
.isso-comment > div.text-wrapper > .isso-comment-footer > a {
    position: relative;
    top: .2em;
}
.isso-comment > div.text-wrapper > .isso-comment-footer > a + a {
    padding-left: 1em;
}
.isso-comment > div.text-wrapper > .isso-comment-footer .votes {
    color: gray;
}
.isso-comment > div.text-wrapper > .isso-comment-footer .upvote svg,
.isso-comment > div.text-wrapper > .isso-comment-footer .downvote svg {
    position: relative;
    top: .2em;
}
.isso-comment .isso-postbox {
    margin-top: 0.8em;
}
.isso-comment.isso-no-votes span.votes {
    display: none;
}

.isso-postbox {
    max-width: 68em;
    margin: 0 auto 2em;
    clear: right;
}
.isso-postbox > .form-wrapper {
    display: block;
    padding: 0;
}
.isso-postbox > .form-wrapper > .auth-section,
.isso-postbox > .form-wrapper > .auth-section .post-action {
    display: block;
}

.isso-postbox > .form-wrapper .textarea,
.isso-postbox > .form-wrapper .preview {
    margin: 0 0 .3em;
    padding: .4em .8em;
    border-radius: 3px;
    background-color: #fff;
    border: 1px solid rgba(0, 0, 0, 0.2);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}
.isso-postbox > .form-wrapper input[type=checkbox] {
    vertical-align: middle;
    position: relative;
    bottom: 1px;
    margin-left: 0;
}
.isso-postbox > .form-wrapper .notification-section {
    font-size: 0.90em;
    padding-top: .3em;
}
#isso-thread .textarea:focus,
#isso-thread input:focus {
    border-color: rgba(0, 0, 0, 0.8);
}
.isso-postbox > .form-wrapper > .auth-section .input-wrapper {
    display: inline-block;
    position: relative;
    max-width: 25%;
    margin: 0;
}
.isso-postbox > .form-wrapper > .auth-section .input-wrapper input {
    padding: .3em 10px;
    max-width: 100%;
    border-radius: 3px;
    background-color: #fff;
    line-height: 1.4em;
    border: 1px solid rgba(0, 0, 0, 0.2);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}
.isso-postbox > .form-wrapper > .auth-section .post-action {
    display: inline-block;
    float: right;
    margin: 0 0 0 5px;
}
.isso-postbox > .form-wrapper > .auth-section .post-action > input {
    font-size: 18px;
    border: 1px solid #CCC;
    cursor: pointer;
    outline: 0;
    line-height: 1.4em;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
    background-color: #92c94a;
    padding: 6px 15px;
    border-radius: 5px;
    color: #fff;
}

.post-action > input[type=submit]:hover, input[name=preview]:hover {
    opacity: 0.8;
    background-color: #92c94a !important;
}


.isso-postbox > .form-wrapper > .auth-section .post-action > input:active {
    opacity: 0.8;
}
.isso-postbox > .form-wrapper .preview,
.isso-postbox > .form-wrapper input[name="edit"],
.isso-postbox.preview-mode > .form-wrapper input[name="preview"],
.isso-postbox.preview-mode > .form-wrapper .textarea {
    display: none;
}
.isso-postbox.preview-mode > .form-wrapper .preview {
    display: block;
}
.isso-postbox.preview-mode > .form-wrapper input[name="edit"] {
    display: inline;
}
.isso-postbox > .form-wrapper .preview {
    background-color: #f8f8f8;
    background: repeating-linear-gradient(
        -45deg,
        #f8f8f8,
        #f8f8f8 10px,
        #fff 10px,
        #fff 20px
    );
}
.isso-postbox > .form-wrapper > .notification-section {
    display: none;
    padding-bottom: 10px;
}
@media screen and (max-width:600px) {
    .isso-postbox > .form-wrapper > .auth-section .input-wrapper {
        display: block;
        max-width: 100%;
        margin: 0 0 .3em;
    }
    .isso-postbox > .form-wrapper > .auth-section .input-wrapper input {
        width: 100%;
    }
}

.login-section {
    text-align: left;
    margin: 20px 0px;
}

.login-button-isso {
    padding: 10px 20px;
    background: #92c94a;
    border-radius: 5px;
    color: white;
}

.isso-comment > div.text-wrapper > .textarea-wrapper .preview {
    margin-top: 0.2em;
}

.isso-postbox > .form-wrapper .textarea.error-notify {
    border-color: #dd4245
}</style><script src="./Optimal Portfolio Construction Using Machine Learning_files/clipboard.min.js.téléchargement"></script><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><script type="text/javascript" src="./Optimal Portfolio Construction Using Machine Learning_files/WebTracker.aspx"></script><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><link rel="stylesheet" href="./Optimal Portfolio Construction Using Machine Learning_files/OneSignalSDKStyles.css"></head><span id="warning-container"><i data-reactroot=""></i></span>
<body class=" post-template tag-portfolio-risk-management tag-machine-learning  pace-done"><div id="MathJax_Message" style="display: none;"></div><div class="pace  pace-inactive"><div class="pace-progress" data-progress-text="100%" data-progress="99" style="transform: translate3d(100%, 0px, 0px);">
  <div class="pace-progress-inner"></div>
</div>
<div class="pace-activity"></div></div>
  
  <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display: none;">

	<symbol id="clock" viewBox="0 0 512 512">
		<path d="M347.216,301.211l-71.387-53.54V138.609c0-10.966-8.864-19.83-19.83-19.83c-10.966,0-19.83,8.864-19.83,19.83v118.978    c0,6.246,2.935,12.136,7.932,15.864l79.318,59.489c3.569,2.677,7.734,3.966,11.878,3.966c6.048,0,11.997-2.717,15.884-7.952    C357.766,320.208,355.981,307.775,347.216,301.211z"></path>
		<path d="M256,0C114.833,0,0,114.833,0,256s114.833,256,256,256s256-114.833,256-256S397.167,0,256,0z M256,472.341    c-119.275,0-216.341-97.066-216.341-216.341S136.725,39.659,256,39.659c119.295,0,216.341,97.066,216.341,216.341    S375.275,472.341,256,472.341z"></path>
	</symbol>

    <symbol id="comments-old" viewBox="0 0 31 31">
        <path d="M29.833,22.545c-0.034-0.028-0.075-0.044-0.112-0.068c-0.043-0.041-0.078-0.087-0.125-0.125l-2.187-1.774
		c2.356-1.741,3.774-4.021,3.774-6.558c0-5.591-6.849-9.97-15.592-9.97C6.849,4.05,0,8.43,0,14.02c0,2.94,1.937,5.649,5.351,7.534
		l-2.19,5.385l1.331,0.133c0.414,0.043,0.812,0.062,1.197,0.062c3.585,0,5.955-1.692,7.384-3.272
		c0.83,0.086,1.675,0.129,2.519,0.129c2.286,0,4.438-0.306,6.375-0.849l4.215,3.419c0.049,0.04,0.104,0.071,0.155,0.105
		c0.028,0.029,0.05,0.062,0.082,0.087c0.245,0.198,0.562,0.272,0.896,0.241c0.041,0.004,0.082,0.011,0.125,0.011
		c0.582,0,1.162-0.252,1.556-0.737l0.894-1.102c0.426-0.525,0.536-1.203,0.364-1.811C30.212,23.029,30.075,22.742,29.833,22.545z
		 M15.595,21.99c-0.944,0-1.888-0.058-2.806-0.172l-0.548-0.069l-0.35,0.427c-1.528,1.866-3.488,2.857-5.831,2.951l1.845-4.536
		l-0.848-0.407c-3.213-1.544-5.055-3.79-5.055-6.163c0-4.32,6.224-7.97,13.592-7.97c7.367,0,13.593,3.651,13.593,7.971
		c0,1.976-1.312,3.806-3.431,5.216l-7.153-5.806l-1.185-0.961c-0.088-0.093-0.188-0.179-0.31-0.252l-0.06-0.048l-0.009,0.011
		c-0.096-0.052-0.198-0.1-0.312-0.137l-5.011-1.632c-0.223-0.073-0.416-0.107-0.578-0.107c-0.598,0-0.758,0.47-0.326,1.221
		l2.629,4.567c0.06,0.104,0.13,0.192,0.2,0.276l-0.007,0.009l0.034,0.028c0.111,0.125,0.233,0.22,0.362,0.293l1.61,1.308
		l4.346,3.528C18.602,21.826,17.126,21.99,15.595,21.99z M15.701,16.275l0.28-0.345l6.191,5.024c-0.238,0.08-0.486,0.15-0.734,0.223
		l-5.871-4.766C15.612,16.367,15.658,16.328,15.701,16.275z M15.343,14.276l-1.049,1.292l-2.312-4.017l4.407,1.436l-0.599,0.738
		L15.343,14.276z M23.93,23.199l-0.603-0.489c0.233-0.083,0.46-0.173,0.685-0.263l0.318,0.259L23.93,23.199z M27.436,23.176
		l-0.894,1.103c-0.229,0.283-0.383,0.596-0.472,0.904l-1.484-1.205l2.154-2.654l1.484,1.205
		C27.939,22.678,27.666,22.892,27.436,23.176z"></path>
    </symbol>

    <symbol id="copy" viewBox="0 0 488.3 488.3">
        <g>
            <path d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124
                C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124
                c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z"></path>
            <path d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227
                c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6
                V38.6C439.65,17.3,422.35,0,401.05,0z"></path>
        </g>
    </symbol>

    <symbol id="download" viewBox="0 -15 512 511">
    <path d="m400.5625 144.59375h-.945312c-9.101563-79.101562-80.605469-135.847656-159.707032-126.742188-66.566406 7.660157-119.085937 60.175782-126.746094 126.742188h-.941406c-53.085937 0-96.117187 43.03125-96.117187 96.117188 0 53.082031 43.03125 96.113281 96.117187 96.113281h288.339844c53.085938 0 96.117188-43.03125 96.117188-96.113281 0-53.085938-43.035157-96.117188-96.117188-96.117188zm0 0" fill="#bddbff"></path><g fill="#3d9ae2"><path d="m413.492188 129.410156c-17.292969-86.765625-101.648438-143.082031-188.414063-125.789062-63.460937 12.648437-113.082031 62.238281-125.769531 125.691406-61.519532 7.089844-105.648438 62.707031-98.5625 124.230469 6.523437 56.621093 54.480468 99.339843 111.476562 99.300781h80.09375c8.847656 0 16.019532-7.171875 16.019532-16.019531 0-8.847657-7.171876-16.019531-16.019532-16.019531h-80.09375c-44.238281-.261719-79.886718-36.332032-79.625-80.566407.261719-44.238281 36.332032-79.886719 80.566406-79.625 8.167969 0 15.027344-6.140625 15.925782-14.257812 8.132812-70.304688 71.722656-120.707031 142.03125-112.574219 59.109375 6.835938 105.738281 53.464844 112.574218 112.574219 1.34375 8.261719 8.5 14.3125 16.867188 14.257812 44.238281 0 80.097656 35.859375 80.097656 80.097657 0 44.234374-35.859375 80.09375-80.097656 80.09375h-80.09375c-8.847656 0-16.019531 7.171874-16.019531 16.019531 0 8.847656 7.171875 16.019531 16.019531 16.019531h80.09375c61.929688-.386719 111.820312-50.902344 111.433594-112.828125-.347656-56.394531-42.527344-103.753906-98.503906-110.605469zm0 0"></path><path d="m313.019531 385.679688-40.609375 40.625v-201.613282c0-8.847656-7.171875-16.019531-16.019531-16.019531-8.84375 0-16.015625 7.171875-16.015625 16.019531v201.613282l-40.609375-40.625c-6.144531-6.363282-16.289063-6.539063-22.652344-.390626-6.363281 6.144532-6.539062 16.285157-.394531 22.648438.128906.132812.261719.265625.394531.394531l67.9375 67.953125c1.480469 1.480469 3.238281 2.65625 5.175781 3.460938 3.941407 1.664062 8.390626 1.664062 12.332032 0 1.9375-.804688 3.695312-1.980469 5.175781-3.460938l67.9375-67.953125c6.363281-6.144531 6.539063-16.285156.394531-22.652343-6.148437-6.363282-16.289062-6.539063-22.652344-.390626-.132812.128907-.265624.257813-.394531.390626zm0 0" fill="#3e3d42"></path></g>

    </symbol>

    <symbol id="comments-2" viewBox="1 -31 511.99999 511">
    <path d="m464 16.5h-416c-17.671875 0-32 14.328125-32 32v256c0 17.671875 14.328125 32 32 32h80v96l96-96h240c17.675781 0 32-14.328125 32-32v-256c0-17.671875-14.328125-32-32-32zm0 0" fill="#ffe477"></path><path d="m128 448.5c-8.835938 0-16-7.164062-16-16v-80h-64c-26.511719 0-48-21.492188-48-48v-256c0-26.511719 21.488281-48 48-48h416c26.511719 0 48 21.488281 48 48v256c0 26.507812-21.488281 48-48 48h-233.375l-91.3125 91.3125c-3 3-7.070312 4.6875-11.3125 4.6875zm-80-416c-8.835938 0-16 7.164062-16 16v256c0 8.835938 7.164062 16 16 16h80c8.835938 0 16 7.164062 16 16v57.375l68.6875-68.6875c3-3 7.070312-4.6875 11.3125-4.6875h240c8.835938 0 16-7.164062 16-16v-256c0-8.835938-7.164062-16-16-16zm0 0" fill="#3e3d42"></path>

    </symbol>

    <symbol id="calendar" viewBox="1 1 511.99999 511.99999">
    <g fill="#bddbff"><path d="m464 64h-64v32c0 8.835938-7.164062 16-16 16h-32c-8.835938 0-16-7.164062-16-16v-32h-160v32c0 8.835938-7.164062 16-16 16h-32c-8.835938 0-16-7.164062-16-16v-32h-64c-17.652344.054688-31.949219 14.347656-32 32v80h480v-80c-.054688-17.652344-14.347656-31.945312-32-32zm0 0"></path><path d="m160 272c0 17.671875-14.328125 32-32 32s-32-14.328125-32-32 14.328125-32 32-32 32 14.328125 32 32zm0 0"></path><path d="m416 272c0 17.671875-14.328125 32-32 32s-32-14.328125-32-32 14.328125-32 32-32 32 14.328125 32 32zm0 0"></path><path d="m288 272c0 17.671875-14.328125 32-32 32s-32-14.328125-32-32 14.328125-32 32-32 32 14.328125 32 32zm0 0"></path><path d="m160 400c0 17.671875-14.328125 32-32 32s-32-14.328125-32-32 14.328125-32 32-32 32 14.328125 32 32zm0 0"></path><path d="m416 400c0 17.671875-14.328125 32-32 32s-32-14.328125-32-32 14.328125-32 32-32 32 14.328125 32 32zm0 0"></path><path d="m288 400c0 17.671875-14.328125 32-32 32s-32-14.328125-32-32 14.328125-32 32-32 32 14.328125 32 32zm0 0"></path></g><path d="m464 48h-48v-16c0-17.671875-14.328125-32-32-32h-32c-17.671875 0-32 14.328125-32 32v16h-128v-16c0-17.671875-14.328125-32-32-32h-32c-17.671875 0-32 14.328125-32 32v16h-48c-26.507812 0-48 21.488281-48 48v368c0 26.507812 21.492188 48 48 48h416c26.507812 0 48-21.492188 48-48v-368c0-26.511719-21.492188-48-48-48zm-112-16h32v64h-32zm-224 0h32v64h-32zm-80 48h48v16c0 17.671875 14.328125 32 32 32h32c17.671875 0 32-14.324219 32-32v-16h128v16c0 17.671875 14.328125 32 32 32h32c17.671875 0 32-14.324219 32-32v-16h48c8.835938 0 16 7.164062 16 16v64h-448v-64c0-8.835938 7.164062-16 16-16zm416 400h-416c-8.835938 0-16-7.164062-16-16v-272h448v272c0 8.835938-7.164062 16-16 16zm0 0" fill="#3d9ae2"></path><path d="m128 224c-26.507812 0-48 21.492188-48 48s21.492188 48 48 48 48-21.492188 48-48-21.492188-48-48-48zm0 64c-8.835938 0-16-7.164062-16-16s7.164062-16 16-16 16 7.164062 16 16-7.164062 16-16 16zm0 0" fill="#3d9ae2"></path><path d="m384 224c-26.507812 0-48 21.492188-48 48s21.492188 48 48 48 48-21.492188 48-48-21.492188-48-48-48zm0 64c-8.835938 0-16-7.164062-16-16s7.164062-16 16-16 16 7.164062 16 16-7.164062 16-16 16zm0 0" fill="#3d9ae2"></path><path d="m256 224c-26.507812 0-48 21.492188-48 48s21.492188 48 48 48 48-21.492188 48-48-21.492188-48-48-48zm0 64c-8.835938 0-16-7.164062-16-16s7.164062-16 16-16 16 7.164062 16 16-7.164062 16-16 16zm0 0" fill="#3d9ae2"></path><path d="m128 352c-26.507812 0-48 21.492188-48 48s21.492188 48 48 48 48-21.492188 48-48-21.492188-48-48-48zm0 64c-8.835938 0-16-7.164062-16-16s7.164062-16 16-16 16 7.164062 16 16-7.164062 16-16 16zm0 0" fill="#3d9ae2"></path><path d="m384 352c-26.507812 0-48 21.492188-48 48s21.492188 48 48 48 48-21.492188 48-48-21.492188-48-48-48zm0 64c-8.835938 0-16-7.164062-16-16s7.164062-16 16-16 16 7.164062 16 16-7.164062 16-16 16zm0 0" fill="#3d9ae2"></path><path d="m256 352c-26.507812 0-48 21.492188-48 48s21.492188 48 48 48 48-21.492188 48-48-21.492188-48-48-48zm0 64c-8.835938 0-16-7.164062-16-16s7.164062-16 16-16 16 7.164062 16 16-7.164062 16-16 16zm0 0" fill="#3d9ae2"></path>

    </symbol>

    <symbol id="clock-2" viewBox="1 1 511.99998 511.99998">
        <path d="m256 0c-141.386719 0-256 114.613281-256 256s114.613281 256 256 256 256-114.613281 256-256c-.167969-141.316406-114.683594-255.832031-256-256zm16 479.183594v-31.183594c0-8.835938-7.164062-16-16-16s-16 7.164062-16 16v31.183594c-110.917969-8.054688-199.128906-96.265625-207.183594-207.183594h31.183594c8.835938 0 16-7.164062 16-16s-7.164062-16-16-16h-31.183594c8.054688-110.917969 96.265625-199.128906 207.183594-207.183594v31.183594c0 8.835938 7.164062 16 16 16s16-7.164062 16-16v-31.183594c110.917969 8.054688 199.128906 96.265625 207.183594 207.183594h-31.183594c-8.835938 0-16 7.164062-16 16s7.164062 16 16 16h31.183594c-8.054688 110.917969-96.265625 199.128906-207.183594 207.183594zm0 0"></path><path d="m352 240h-80v-96c0-8.835938-7.164062-16-16-16s-16 7.164062-16 16v112c0 8.835938 7.164062 16 16 16h96c8.835938 0 16-7.164062 16-16s-7.164062-16-16-16zm0 0"></path>

    </symbol>

    <symbol id="envelope" viewBox="1 -95 511.99998 511">
        <path d="m16 32.5v256c0 8.835938 7.164062 16 16 16h448c8.835938 0 16-7.164062 16-16v-256l-240 112zm0 0" fill="#333"></path><path d="m480 16.5h-448c-8.835938 0-16 7.164062-16 16l240 112 240-112c0-8.835938-7.164062-16-16-16zm0 0" fill="#333"></path><path d="m512 32.117188c0-.207032 0-.386719 0-.59375-.527344-17.289063-14.699219-31.03125-32-31.023438h-448c-17.261719.042969-31.378906 13.769531-31.9023438 31.023438v.59375c0 .207031-.0976562.253906-.0976562.382812v256c0 17.671875 14.328125 32 32 32h448c17.671875 0 32-14.328125 32-32v-256c0-.128906 0-.257812 0-.382812zm-53.839844.382812-202.160156 94.398438-202.160156-94.398438zm-426.160156 256v-230.878906l217.230469 101.375c4.292969 2.003906 9.246093 2.003906 13.539062 0l217.230469-101.375v230.878906zm0 0" fill="#fff"></path>

    </symbol>





</svg>


  <script>
    window.ssoBaseUrl = 'https://accounts.quantinsti.com';
    window.platform = 'blog';
    window.quantinstiBaseUrl = 'https://www.quantinsti.com'
  </script>

  <script src="./Optimal Portfolio Construction Using Machine Learning_files/aes.js.téléchargement"> </script>
  <script src="./Optimal Portfolio Construction Using Machine Learning_files/sso-script-notification_v5_obfuscate.js.téléchargement"></script><script type="text/javascript" id="" src="./Optimal Portfolio Construction Using Machine Learning_files/OneSignalSDK.js.téléchargement"></script>
<script type="text/javascript" id="">!function(b,e,f,g,a,c,d){b.fbq||(a=b.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},b._fbq||(b._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],c=e.createElement(f),c.async=!0,c.src=g,d=e.getElementsByTagName(f)[0],d.parentNode.insertBefore(c,d))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js");fbq("init","288106938026586");fbq("track","PageView");</script>
<noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=288106938026586&amp;ev=PageView&amp;noscript=1"></noscript>

<script type="text/javascript" id="" src="./Optimal Portfolio Construction Using Machine Learning_files/Tracker.js.téléchargement"></script>
<script type="text/javascript" id="">var OneSignal=window.OneSignal||[];OneSignal.push(function(){OneSignal.init({appId:"ff4e2fb7-9719-4987-92d2-13fa7f47bbe9"})});</script>


  <!-- start: #top-notification -->
<div id="top-notification">
  <div class="main-contain-non"> 
    <span class="time-count-container hide" id="notificationDate">
      <span class="days count font-16 btn-black-patch hide"></span>
      <span class="hours count font-16 btn-black-patch hide"></span>
      <span class="minutes count font-16 btn-black-patch hide"></span>
      <span class="seconds count font-16 btn-black-patch hide"></span>
    </span>
    <span class="campaign-message"></span>
    <a class="btn-campaign" id="notificationNavLink" target="_blank" href="https://blog.quantinsti.com/optimal-portfolio-construction-machine-learning/?fbclid=IwAR3qIUNFX9I-RaeefUokHS-OdM2uMvnsqn49ErN05pQybtU5EM68DH5P_iQ#"></a>
  </div>
  <div id="close">
    <i class="fa fa-close" aria-hidden="true"></i>
  </div>
</div>
<!-- end: #top-notification -->

  <!-- start: #wrapper -->
  <div id="wrapper">
    <!-- start: #header -->
<header id="header">

  <div class="menu-mobile side-menu">
    <i class="fa fa-bars"></i>
    <span class="notification-circle-mobile"></span>
  </div>

  <div class="menu-mobile link-tags">
    <i class="fa fa-ellipsis-v"></i>
  </div>

  <!-- start: .menu-wrapper -->
  <div id="undefined-sticky-wrapper" class="sticky-wrapper" style="height: 141px;"><div class="menu-wrapper" style="">

    <div class="grid-container">

      <div class="logo"><a href="https://blog.quantinsti.com/"><img src="./Optimal Portfolio Construction Using Machine Learning_files/current-QI.png" alt="QuantInsti" width="200"></a></div>

      <!-- start: .main-nav -->
      <nav class="main-nav nav-menu grid-container grid-parent">

        <ul id="menu-header" class="menu">
  <li class="nav-home"><a href="https://blog.quantinsti.com/">Home</a></li>
  <li class="dropdown">
    <button class="dropbtn" aria-label="dropdown-courses">Courses
      <i class="fa fa-caret-down"></i>
    </button>
    <div class="dropdown-content">
      <a href="https://www.quantinsti.com/epat" target="_blank" rel="noopener">Executive Programme in Algorithmic Trading</a>
      <a href="https://quantra.quantinsti.com/learning-track/algorithmic-trading-for-quants" target="_blank" rel="noopener">Algorithmic Trading for Quants</a>
      <a href="https://quantra.quantinsti.com/learning-track/quantitative-approach-in-options-trading" target="_blank" rel="noopener">
        Options Trading Strategies by NSE Academy</a>
      <a href="https://quantra.quantinsti.com/course/python-mean-reversion-strategies-ernest-chan" target="_blank" rel="noopener">Mean Reversion Strategies by Ernest Chan</a>
    </div>
  </li>
  <li class="nav-blueshift"><a href="https://quantra-blueshift.quantinsti.com/" rel="noopener" target="_blank">Trading Platform</a></li>
  <li class="nav-contact-us"><a href="https://www.quantinsti.com/contact-us" rel="noopener" target="_blank">Contact Us</a></li>

  <li class="nav-login-signup sso-login"><a href="javascript:;">Login/Sign Up</a></li>
</ul>

      </nav>
      <!-- end: .main-nav -->

      <!-- start: .main-nav -->
      <nav class="main-nav nav-tag grid-container grid-parent">

        <ul class="navi-tags menu">
          <li class="dropdown">
            <button class="dropbtn" aria-label="dropdown-courses">Career Growth
              <i class="fa fa-caret-down"></i>
            </button>
            <div class="dropdown-content">
              <a href="https://blog.quantinsti.com/tag/industry" target="_blank" rel="noopener">Industry</a>
              <a href="https://blog.quantinsti.com/tag/jobs-skills" target="_blank" rel="noopener">Jobs &amp; Skills</a>
              <a href="https://blog.quantinsti.com/tag/trading-desk-setup" target="_blank" rel="noopener">Trading Desk Setup</a>
              <a href="https://blog.quantinsti.com/tag/success-stories" target="_blank" rel="noopener">Success Stories</a>
              <a href="https://blog.quantinsti.com/tag/epat-trading-projects" target="_blank" rel="noopener">EPAT Trading Projects</a>
            </div>
          </li>
          <li class="dropdown">
            <button class="dropbtn" aria-label="dropdown-courses">Tutorials
              <i class="fa fa-caret-down"></i>
            </button>
            <div class="dropdown-content">
              <a href="https://blog.quantinsti.com/tag/automated-trading" target="_blank" rel="noopener">Automated Trading</a>
              <a href="https://blog.quantinsti.com/tag/excel-r-for-trading" target="_blank" rel="noopener">Excel &amp; R For
                Trading</a>
              <a href="https://blog.quantinsti.com/tag/forex-crypto-trading" target="_blank" rel="noopener">Forex &amp; Crypto
                Trading</a>
              <a href="https://blog.quantinsti.com/tag/machine-learning" target="_blank" rel="noopener">Machine Learning</a>
              <a href="https://blog.quantinsti.com/tag/mathematics-econometrics" target="_blank" rel="noopener">Maths and Econometrics</a>
              <a href="https://blog.quantinsti.com/tag/mean-reversion-statistical-arbitrage" target="_blank" rel="noopener">Mean
                Reversion &amp; Statistical Arbitrage</a>
              <a href="https://blog.quantinsti.com/tag/momentum-trading" target="_blank" rel="noopener">Momentum Trading</a>
              <a href="https://blog.quantinsti.com/tag/more-trading-strategies" target="_blank" rel="noopener">More Trading
                Strategies</a>
              <a href="https://blog.quantinsti.com/tag/options-trading" target="_blank" rel="noopener">Options Trading</a>
              <a href="https://blog.quantinsti.com/tag/portfolio-risk-management" target="_blank" rel="noopener">Portfolio &amp; Risk
                Management</a>
              <a href="https://blog.quantinsti.com/tag/python-for-trading" target="_blank" rel="noopener">Python For Trading</a>
              <a href="https://blog.quantinsti.com/tag/sentiment-trading" target="_blank" rel="noopener">Sentiment Trading</a>
              <a href="https://blog.quantinsti.com/tag/technical-indicators" target="_blank" rel="noopener">Technical Indicators</a>
            </div>
          </li>
        </ul>

      </nav>
      <!-- end: .main-nav -->

      <div class="clear"></div>

      <div class="border hide-on-tablet hide-on-mobile"></div>

    </div>

    <div class="clear"></div>

  </div></div>
  <!-- end: .menu-wrapper -->

  <div class="clear"></div>

</header>
<!-- end: #header -->

<div id="form-lang" data-results-title="Results for your search"></div>

    


<!-- start: #single -->
<main id="single" class="main grid-container standard" role="main">

  <!-- start: .center -->
  <div class="center content">

    <div class="filters post-page-filter">
      <div class="grid-50 tablet-grid-50">
        <form action="https://blog.quantinsti.com/optimal-portfolio-construction-machine-learning/?fbclid=IwAR3qIUNFX9I-RaeefUokHS-OdM2uMvnsqn49ErN05pQybtU5EM68DH5P_iQ" method="get" class="search-form">
          <input type="text" name="s" value="" class="search-field" aria-label="search-label" placeholder="Search in the blog..." required="">
          <button type="submit" class="submit" aria-label="search-tags"><i class="fa fa-search"></i></button>
        </form>
      </div>
      <div class="clear"></div>
    </div>


    <!-- start: .content -->
    <div class="left-content grid-70 np-mobile">

      <article class="main-article post tag-portfolio-risk-management tag-machine-learning">

        <header>


          <!-- start: .meta -->
          <div class="meta">
            <h1 class="title no-thumb large bold">Optimal Portfolio Construction Using Machine Learning</h1>
            <div class="tags grid-80 grid-parent custom-tagging">
              <a href="https://blog.quantinsti.com/tag/portfolio-risk-management/">Portfolio &amp; Risk Management</a><a href="https://blog.quantinsti.com/tag/machine-learning/">Machine Learning</a>
            </div>
            <div class="left grid-20 grid-parent">
              <p><time datetime="2018-08-10"><i class="fa fa-calendar" aria-hidden="true"></i>Aug 10, 2018</time></p>

              <p class="comments tooltip"><i class="fa fa-clock-o" aria-hidden="true"></i> 68 min read</p>
            </div>
            <div class="clear"></div>
          </div>
          <!-- end: .meta -->

          <div class="clear"></div>

        </header>

        <section class="post-content">

          <div class="share-container hide-on-mobile" style=""><div class="inner-wrapper-sticky" style="position: relative;">
            <div class="share">
              <a class="whatsapp hide-on-tablet hide-on-desktop" href="whatsapp://send?text=https://blog.quantinsti.com/optimal-portfolio-construction-machine-learning/" aria-label="share-post-whatsapp" data-action="share/whatsapp/share"><i class="fa fa-whatsapp"></i></a>
              <a class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.quantinsti.com/optimal-portfolio-construction-machine-learning/" aria-label="share-post-facebook" onclick="window.open(this.href, &#39;facebook-share&#39;,&#39;width=580,height=296&#39;);return false;"><i class="fa fa-facebook"></i></a>
              <a class="twitter" href="http://twitter.com/share?text=Optimal%20Portfolio%20Construction%20Using%20Machine%20Learning&amp;url=https://blog.quantinsti.com/optimal-portfolio-construction-machine-learning/" aria-label="share-post-twitter" onclick="window.open(this.href, &#39;twitter-share&#39;, &#39;width=550,height=235&#39;);return false;"><i class="fa fa-twitter"></i></a>
              <a class="linkdin" href="http://www.linkedin.com/shareArticle?mini=true&amp;url=https://blog.quantinsti.com/optimal-portfolio-construction-machine-learning/" aria-label="share-post-linkdin" onclick="window.open(this.href, &#39;linkdin-share&#39;, &#39;width=490,height=530&#39;);return false;"><i class="fa fa-linkedin"></i></a>
              <a href="mailto:?subject=Optimal%20Portfolio%20Construction%20Using%20Machine%20Learning&amp;body=https://blog.quantinsti.com/optimal-portfolio-construction-machine-learning/" class="email" target="_blank" aria-label="share-post-mail"><i class="fa fa-envelope"></i></a>
            </div>
          </div></div>

          <div class="text"><!--kg-card-begin: html-->By&nbsp;<strong>Lamarcus Coleman</strong><br><br>In this post, we will learn about the Stereoscopic Portfolio Optimization (SPO) framework and how it can be used to improve a quantitative trading strategy.<br><br>We'll also review concepts such as<ul style="margin-left: 40px;"><li>Gaussian Mixture Models,</li><li>K-Means Clustering, and</li><li>Random Forests.</li></ul>Our objective is to determine whether we can reject the null hypothesis that the Stereoscopic Portfolio Optimization (SPO) model is not a viable option for creating optimal short-term portfolios.<br><br><a data-cke-saved-href="https://quantra.quantinsti.com/machine-learning-for-trading-ebook" href="https://quantra.quantinsti.com/machine-learning-for-trading-ebook" target="_blank"><img alt="Machine Learning in Trading" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2019/07/ML-Ebook-CTA_2.png" src="./Optimal Portfolio Construction Using Machine Learning_files/ML-Ebook-CTA_2.png"></a><p><br></p><h3><strong>What is the Stereoscopic Portfolio Optimization (SPO) Framework?</strong></h3><p>The Stereoscopic Portfolio Optimization (SPO) Framework is an idea I introduced in a paper entitled "<strong>Applying Machine Learning Ensembles to Market Microstructure to Achieve Portfolio Optimization</strong>".</p><blockquote>You can download the paper and&nbsp;files at the end of the article.</blockquote><p>In the paper, I refer to traditional techniques such as the Efficient Frontier, as being top-down approaches to achieve an optimal portfolio.<br><br>Traditionally, a large part of <a data-cke-saved-href="https://blog.quantinsti.com/portfolio-optimization-methods/" target="_blank" href="https://blog.quantinsti.com/portfolio-optimization-methods/">portfolio optimization</a> has centred on finding the proper balance for allocations to different asset classes based on the mean-variance tradeoff.<br><br><strong>What the SPO Framework does:</strong><br>The Stereoscopic Portfolio Optimization Framework introduces the idea of bottom-up optimization via the use of machine learning ensembles applied to some market microstructure component.<br><br>In the text volatility was the microstructure component used but other components such as order arrival rates, liquidity, can be substituted into the framework.<br><br><strong>Creating an SPO Framework:</strong><br>These bottom-up techniques are combined with top-down approaches to creating the Stereoscopic Portfolio Optimization (SPO) Framework.<br><br><strong>Premise of the SPO Framework:</strong><br>The premise of the framework is that a portfolio is the sum of <strong>n</strong> market microstructures.<br><br>The equation below was given as a novel way of explaining this logic.</p><p style="text-align:center"><strong><img alt="1" class="aligncenter img-responsive size-full wp-image-13902" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/1.png" src="./Optimal Portfolio Construction Using Machine Learning_files/1.png" style="height:70px; width:219px"></strong></p><p>This equation is a novel way of stating that the static state of a portfolio is a product of the component market microstructures and their weights.<br><br>Where,</p><p style="margin-left: 40px;">'<strong>a<sub>n</sub></strong>' represents the n<sub>th</sub> asset's microstructure;<br>'w<strong><sub>n</sub></strong>' represents the weight of the <strong>n<sub>th</sub></strong> asset;<br>'<strong>e<sub>t</sub></strong>' is an error term and representative of randomness.</p><p>The absolute value signs were used as an indication of non-linearity.<br><br>The equation below was offered as a novel representation of the dynamic state of a portfolio.</p><p style="text-align:center"><img alt="2" class="aligncenter img-responsive size-full wp-image-13903" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/2.png" src="./Optimal Portfolio Construction Using Machine Learning_files/2.png" style="height:64px; width:228px"></p><p>The equation above is stating that the dynamic state of the portfolio is not only dependent upon the respective components' microstructures but their relative correlations as well.<br><br>The correlations in this context don't refer to prices but the relationships between the actual microstructure components. For instance, how does one asset respond when shocks occur in another asset, or when liquidity changes, etc.<br><br>The idea of the correlations of microstructure components can be written as a conditional probability. <img alt="3" class="aligncenter img-responsive size-full wp-image-13904" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/3.png" src="./Optimal Portfolio Construction Using Machine Learning_files/3.png" style="height:42px; width:94px"> where,</p><p style="margin-left: 40px;"><strong>a<sub>n</sub></strong> is the <strong>n<sub>th</sub></strong> asset's microstructure, and<br>q represents the q<strong><sub>th</sub></strong> asset's microstructure.</p><p>The correlation terms can thus be expressed in matrix form:</p><p style="text-align:center"><img alt="4" class="aligncenter img-responsive size-full wp-image-13905" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/4.png" src="./Optimal Portfolio Construction Using Machine Learning_files/4.png" style="height:45px; width:119px"></p><p>where,</p><p style="margin-left: 40px;"><strong>R</strong> is the correlation matrix, and<br><strong>m</strong> is a <strong>n×1</strong> vector of our microstructure components</p><p>We can thus update our novel equation to the following:</p><p style="text-align:center"><img alt="5" class="aligncenter img-responsive size-full wp-image-13906" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/5.png" src="./Optimal Portfolio Construction Using Machine Learning_files/5.png" style="height:62px; width:228px"></p><p>Ensembles were used consistent with the idea that a portfolio is the composition of n market microstructures.<br><br>The strength of ensembles is that they allow for the aggregation of multiple, sometimes weak models, to create a more robust model.</p><blockquote><ul><li><em>The goal of the ensemble is to minimize the cost function.</em></li><li><em>The goal of portfolio optimization is to minimize risk.</em></li></ul></blockquote><p>Thus, in this context, the risk is the cost function of portfolio optimization and creates a parallel objective to that of ensembles.<br><br>In the paper, the Stereoscopic Portfolio Optimization (SPO) framework was created by combining the traditional mean-variance optimization with Gaussian Mixture Models and Random Forests. K-Means Clustering was used to identify subgroups within the S&amp;P 500.<br><br>Before we dive into applying the Stereoscopic Portfolio Optimization (SPO) Framework to an intraday strategy, let's review some of the components used. &nbsp;</p><h3><strong>What are the Gaussian Mixture Models and How are They Related to K-Means Clustering?</strong></h3><p>An important part of conducting research is understanding how your data is distributed. The distribution of your data gives you insight into the probabilities surrounding seeing certain observations.<br><br>In a <strong>prior post on K-Means Clustering</strong>, we learned what K-Means is and how it can be applied to statistical arbitrage. In short, unsupervised learning methods allow us to explore our data and identify patterns or relationships.<br><br>K-Means is a machine learning technique that seeks to identify subgroups within our data. This means that we can find relationships within our stock universe and then test to see if those relationships have some statistical significance.<br><br>For a more thorough review of K-Means, visit the series entitled "<strong>Using K-Means Clustering for Pair Selection</strong>".<br><br>Gaussian Mixture Models are similar to K-Means in that they too are a clustering technique. One key difference between GMM and K-Means is that K-Means is a hard clustering method while GMMs are referred to as being a soft clustering technique.<br><br>In K-Means an observation only has a probability of 0 or 1 of being in the <strong>k<sub>th</sub></strong> class.</p><blockquote><p><em>Gaussian Mixture Models don't assign a hard probability of being in a specific class but rather assigns a probability between 0 and 1 that observation came from a specific class.</em></p></blockquote><p>Recall that in K-Means we begin by randomly assigning cluster centres placing each observation into a specific cluster.<br><br>We then compute the centroid or mean of the clusters. We then reassign points to each cluster based on their distance from the mean of each cluster.<br><br>This process is repeated until there are no more cluster reassignments. Our cost function in K-Means is to minimize the within-cluster variation or in laymen's terms ensure that the observations within each cluster are highly similar.<br><br>Below is the objective function for K-Means.</p><p style="text-align:center"><img alt="6" class="aligncenter img-responsive size-full wp-image-13907" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/6.png" src="./Optimal Portfolio Construction Using Machine Learning_files/6.png" style="height:68px; width:349px"></p><p>Where,</p><p style="margin-left: 40px;">m<strong><sub>k</sub></strong> is the Mu of the <strong>k<sub>th</sub></strong> cluster,<br><strong>x<sup>(n)</sup></strong> are our observations,<br><strong>r<sup>(n)</sup><sub>k</sub></strong> is the probability of the <strong>n<sub>th</sub></strong> observation belonging to the k<sub>th</sub> class.</p><p>Essentially in our K-Means objective function, we are multiplying the probabilities by the squared distances of each observation from the mean of the <strong>k<sub>th</sub></strong> class.<br><br>Similar to K-Means, Gaussian Mixture Models begin by assigning random values for the parameters. It then calculates the probabilities of an observation coming from each of the <strong>k<sub>th</sub></strong> distributions.<br><br>Unlike in K-Means in which we would set the probability to 1 or 0, Gaussian Mixture Models will calculate a probability of the observation coming from each of the <strong>k</strong> distributions.</p><blockquote><p><em>Note that the sum of these probabilities must equal 1.</em></p></blockquote><p>Below is an equation for the Gaussian Mixture Model:</p><p style="text-align:center"><img alt="7" class="aligncenter img-responsive size-full wp-image-13908" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/7.png" src="./Optimal Portfolio Construction Using Machine Learning_files/7.png" style="height:45px; width:439px"></p><p>Where,<br><strong>π<sub>k</sub></strong> is the probability of an observation belonging to the <strong>k<sub>th</sub></strong> distribution;<br><strong>N(μ<sub>k</sub>,σ<sub>k</sub>)</strong> represents a <strong>Gaussian</strong> distribution with a mean of <strong>μ<sub>k </sub></strong> and sigma of <strong>σ<sub>k</sub></strong>.</p><blockquote><p><em>Note here that <strong>σ<sub>k</sub></strong> is a matrix composed of the product of the sum of the distances and the transpose of the distances multiplied by the probability that<strong> k<sub>th</sub> Gaussian</strong> generated the <strong>n<sub>th</sub></strong> observation.</em></p></blockquote><p>This is then averaged across the number of distributions.<br><br>Below is the equation for the <strong>σ<sub>k</sub></strong> term:</p><p style="text-align:center"><img alt="8" class="aligncenter img-responsive size-full wp-image-13910" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/8.png" src="./Optimal Portfolio Construction Using Machine Learning_files/8.png" style="height:67px; width:356px"></p><p>The gamma,<strong> γ</strong>, the term is the responsibility of the <strong>k<sub>th</sub></strong> Gaussian for generating the <strong>n<sub>th</sub></strong> point.<br><br>By responsibility, we are referring to the extent that the <strong>k<sub>th</sub></strong> Gaussian contributed to the creation of the <strong>n<sub>th</sub></strong> point.<br><br>We can compute the gamma, <strong>γ</strong>, term by the following equation.</p><p style="text-align:center"><img alt="9" class="aligncenter img-responsive size-full wp-image-13911" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/9.png" src="./Optimal Portfolio Construction Using Machine Learning_files/9.png" style="height:78px; width:274px"></p><p>The above equation is the quotient of the <strong>k<sub>th</sub></strong> Gaussian and all of the Gaussians, or in other words the proportion of the<strong> k<sub>th</sub></strong> Gaussian. &nbsp;</p><h3><strong>Let's Review Random Forests</strong></h3><p><strong>Random Forests</strong> is a machine learning ensemble that combines several decision trees to make a single prediction. Recall that decision trees are known for their simplicity and ease of interpretation.<br><br><strong>Bagging and boosting</strong> are alternatives to Random Forests that produce multiple trees. Trees can be applied to both regression and classification problems.<br><br>A decision tree divides the feature space into separate regions and every observation that falls into a specific region is given a prediction of the mean of that region.<br><br>The goal is to minimize the following cost function:</p><p style="text-align:center"><img alt="10" class="aligncenter img-responsive size-full wp-image-13912" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/10.png" src="./Optimal Portfolio Construction Using Machine Learning_files/10.png" style="height:74px; width:176px"></p><p>The above cost function is the Residual Sum of Squares and denotes the sum of the squared distances from the mean of the <strong>i<sub>th</sub></strong> observation from the mean of the<strong> j<sub>th</sub> </strong>region, <strong>R</strong>.<br><br><strong>Recursive binary splitting</strong> is conducted to minimize the RSS.</p><ul style="margin-left: 40px;"><li>The process considers every possible cutpoint, or point to split the space, of every feature with the aim of minimizing the cost function.</li><li>This process is continued across the two new regions.</li><li>These regions then undergo the same binary splitting as well.</li><li>This is continued until a specific criterion is met.</li></ul><p>One major consideration of decision trees is that if we grow a tree significantly large, it could overfit our data.<br><br>A smaller tree could lead to a better bias-variance tradeoff. A viable approach is to grow a large tree and then prune it, selecting only a subset of the tree. This is achieved via a process known as <strong>cost-complexity pruning</strong>.<br><br>Within cost-complexity pruning, we use a tuning parameter to select a sequence of subtrees.<br><br>Once we have a subset of trees we can then use k-fold cross-validation to choose the best value of the tuning parameter.<br><br>The tuning parameter <em><strong>a</strong></em> corresponds to a specific partition of the original tree. Thus when we perform k-fold cross-validation to find the value of <em><strong>a</strong></em> that achieves the best MSE, we can then select the corresponding subtree from our original tree.<br><br>Another key consideration of decision trees is that they can be non-robust. This means that a small change in the data can cause a large change in the tree. They can also lag in performance compared to other machine learning methods.<br><br>Random Forests is one method of improving the use of decision trees. Random Forests are similar to bagging decision trees in that they both resample the data and apply the model to the resamples and then average the results.<br><br>However, in Random Forests, when splitting is performed, a random sample of the features are selected as the split candidates. This is done to limit the influence of any one feature. So when splitting in Random Forests, we only consider <strong>m ∈ p</strong> possible features.<br><br>The reason Random Forests selects a fraction of the feature space at each split is that if there is a very strong feature in the space, it is likely to be chosen as the root node of every tree.<br><br>This would mean that each tree would likely be closely correlated and thus defeats the purpose of reducing variance.</p><h3><strong>Problem Statement</strong></h3><p>We need to construct a portfolio of statistical arbitrage strategies in the most efficient manner possible.<br><br>We will be trading on an intraday basis in the U.S. equities market, namely across stocks within the S&amp;P 500.<br><br>We will design multiple portfolios that use various methods of addressing the portfolio optimization problem. To assess our efforts we will create the Sharpe Ratio of each portfolio and make relative comparisons.<br><br>Each portfolio will be composed of the same relationships to ensure apples to apple comparison.</p><h3><strong>Data</strong></h3><p>We will be using 5minute data over the period of 2018, beginning 1/4/18. Though at this point, we're unsure as to exactly which stocks we will be trading, we know that we will have the following four portfolios:</p><ol style="margin-left: 40px;"><li>Equally Weighted,</li><li>Efficient Frontier,</li><li>Bottom Up Optimization and</li><li>Stereoscopic Portfolio Optimization (SPO)&nbsp;Framework.</li></ol><p>The <strong>Equally Weighted Portfolio</strong> is the simplest to construct but because the remaining portfolios will require a training period, our test or assessment period will be the second half of 2018, indicating that our equally weighted portfolio will be constructed over the second half of our 2018 data.<br><br>This period will begin on May 1 and end June 12 2018. The remainder of our portfolios will be constructed using the first half of 2018 as a training period and the second half as the test or assessment period.<br><br>As we shall see, this is necessary to compare each portfolio over the same period. In short, in order to compose the Efficient Frontier, Bottom-Up, and SPO Portfolios, we first must have some period to train over (i.e. the first half of our 2018 data).<br><br>We need this training period so that we can make predictions over the period that we would like to compare all of the portfolios over (i.e. May 1 to June 12, 2018).<br><br>Our <strong>Equally Weighted Portfolio</strong> doesn't need a training period to be created so we will just create it over the period that will be used as the test period for the remaining portfolios.</p><h3><strong>Finding Tradable Relationships</strong></h3><p>As we have covered in prior posts, a key initial problem to solve with developing a statistical arbitrage strategy is that of pair selection. We will once again use K-Means clustering to solve this problem.<br><br>We will apply K-Means to the S&amp;P 500, create subgroups, and then choose five tradeable relationships to construct our portfolios.<br><br>To get started, let's import our usual libraries.</p><pre>#data analysis and manipulation
import numpy as np
import pandas as pd
#data visualization
import matplotlib.pyplot as plt
import seaborn as sns
sns.set_style('whitegrid')
#statistics and machine learning
from statsmodels.tsa.api import adfuller
from sklearn.cluster import KMeans
from sklearn.mixture import GaussianMixture as GM
from sklearn.ensemble import RandomForestClassifier as RF
from sklearn.metrics import confusion_matrix, classification_report</pre><pre>import warnings
warnings.simplefilter('ignore')</pre><p>We're going to use the P/E, EPS, and Market Cap as our features to identify subgroups within the S&amp;P 500.<br><br>Let's import our features data now.</p><pre>#importing the Excel file that contains our features data
fundamentals=pd.ExcelFile('SPO_Data.xlsx')</pre><pre>#parsing the Fundamentals sheet from our Excel file of which holds our P/E, EPS, and MarketCap data
features=fundamentals.parse('Fundamentals')</pre><p>Now that we have our features for our K-Means algorithm, let's check the head of our feature space.</p><pre>#checking the head of our features dataframe
features.head()
</pre><table border="1" class="dataframe"><thead><tr><th>No.</th><th>Symbol</th><th>Name</th><th>P/E</th><th>EPS</th><th>MarketCap</th></tr></thead><tbody><tr><th>0</th><td>MMM</td><td>3M Company</td><td>23.17</td><td>8.16</td><td>112.74</td></tr><tr><th>1</th><td>ABT</td><td>Abbott Laboratories</td><td>48.03</td><td>0.94</td><td>77.76</td></tr><tr><th>2</th><td>ABBV</td><td>AbbVie</td><td>17.55</td><td>3.63</td><td>101.52</td></tr><tr><th>3</th><td>ACN</td><td>Accenture plc</td><td>18.37</td><td>6.76</td><td>77.29</td></tr><tr><th>4</th><td>ATVI</td><td>Activision Blizzard</td><td>37.55</td><td>1.28</td><td>36.13</td></tr></tbody></table><p>We're now ready to create our K-Means method and find subgroups within the S&amp;P 500.<br><br>Before we do so, let's drop the Name column from our features data.</p><pre>#dropping name column
features.drop('Name',axis=1,inplace=True)</pre><pre>#rechecking our data
features.head()
</pre><table border="1" class="dataframe"><thead><tr><th>&nbsp;No.</th><th>Symbol</th><th>P/E</th><th>EPS</th><th>MarketCap</th></tr></thead><tbody><tr><th>0</th><td>MMM</td><td>23.17</td><td>8.16</td><td>112.74</td></tr><tr><th>1</th><td>ABT</td><td>48.03</td><td>0.94</td><td>77.76</td></tr><tr><th>2</th><td>ABBV</td><td>17.55</td><td>3.63</td><td>101.52</td></tr><tr><th>3</th><td>ACN</td><td>18.37</td><td>6.76</td><td>77.29</td></tr><tr><th>4</th><td>ATVI</td><td>37.55</td><td>1.28</td><td>36.13</td></tr></tbody></table><p>Recall, an early consideration for implementing K-Means Clustering is determining the value of K that should be used. We'll use the elbow technique here to determine what value of K we should use. This technique will compare our value for K with the respective error.<br><br>Our goal is to choose the value for K that minimizes the error or cost function.</p><pre>from scipy.spatial.distance import cdist</pre><pre>#creating our elbow technique method
def find_k(features):
#intializing a list to hold costs or errors
costs=[]
#iterating over possible values for k
for k in range(1,51):
model=KMeans(n_clusters=k)
model.fit(features)
costs.append(sum(np.min(cdist(features,model.cluster_centers_,'euclidean'),axis=1)))
#plotting our elbow graph
with plt.style.context(['classic','ggplot']):
plt.figure(figsize=(10,6))
plt.plot(costs)
plt.xlabel('Clusters')
plt.ylabel('Errors')
plt.title('Finding K')
plt.show()</pre><p>Now that we have our method let's use it to find the optimal value for K. First, let's update our dataframe by making using our Symbols as our index.<br><br>We'll first make a copy of our original dataframe.</p><pre>#making a copy of our original features dataframe
features_copy=features.copy()</pre><p>Now we can reindex our features dataframe by our Symbol column.</p><pre>#reindexing our features dataframe
features_copy=features_copy.reindex(index=features_copy['Symbol'],columns=features_copy.columns)</pre><pre>features_copy.head()
</pre><table border="1" class="dataframe"><thead><tr><th>Symbol</th><th>Symbol</th><th>P/E</th><th>EPS</th><th>MarketCap</th></tr></thead><tbody><tr><th>MMM</th><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td></tr><tr><th>ABT</th><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td></tr><tr><th>ABBV</th><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td></tr><tr><th>ACN</th><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td></tr><tr><th>ATVI</th><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td></tr></tbody></table><p>Now that we have reindexed our features_copy dataframe, let's add back the values to our columns and drop the Symbol column.</p><pre>#adding our data back to their respective columns
features_copy['P/E']=features['P/E'].values
features_copy['EPS']=features['EPS'].values
features_copy['MarketCap']=features['MarketCap'].values</pre><p>Okay. Let's recheck our dataframe.</p><pre>features_copy.head()
</pre><table border="1" class="dataframe" data-cke-table-faked-selection-table=""><thead><tr><th>Symbol</th><th>Symbol</th><th>P/E</th><th>EPS</th><th>MarketCap</th></tr></thead><tbody><tr><th>MMM</th><td>NaN</td><td>23.17</td><td>8.16</td><td>112.74</td></tr><tr><th>ABT</th><td>NaN</td><td>48.03</td><td>0.94</td><td>77.76</td></tr><tr><th>ABBV</th><td>NaN</td><td>17.55</td><td>3.63</td><td>101.52</td></tr><tr><th>ACN</th><td>NaN</td><td>18.37</td><td>6.76</td><td>77.29</td></tr><tr><th>ATVI</th><td>NaN</td><td>37.55</td><td>1.28</td><td>36.13</td></tr></tbody></table><p>&nbsp; Now we're ready to drop the Symbol column from our dataframe.</p><pre>#dropping symbol column
features_copy.drop('Symbol',axis=1,inplace=True)</pre><p>Let's recheck our dataframe by calling the head method.</p><pre>features_copy.head()
</pre><table border="1" class="dataframe" data-cke-table-faked-selection-table=""><thead><tr><th>Symbol</th><th>P/E</th><th>EPS</th><th>MarketCap</th></tr></thead><tbody><tr><th>MMM</th><td>23.17</td><td>8.16</td><td>112.74</td></tr><tr><th>ABT</th><td>48.03</td><td>0.94</td><td>77.76</td></tr><tr><th>ABBV</th><td>17.55</td><td>3.63</td><td>101.52</td></tr><tr><th>ACN</th><td>18.37</td><td>6.76</td><td>77.29</td></tr><tr><th>ATVI</th><td>37.55</td><td>1.28</td><td>36.13</td></tr></tbody></table><p>Now let's use our find_k method to find the optimal value for K.</p><pre>#finding K
find_k(features_copy.fillna(0))</pre><p><img alt="Fnding K" class="aligncenter img-responsive size-full wp-image-13892" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/Fnding-K.png" src="./Optimal Portfolio Construction Using Machine Learning_files/Fnding-K.png" style="height:461px; width:709px"></p><p>Okay, we will use 15 as our value for K. Now we're ready to implement our K-Means Clustering algorithm with K equal to 15 and look for tradable relationships.<br><br>Let's begin by initializing our model.</p><pre>#initialzing K-Means algorithm
kmeans=KMeans(n_clusters=15,random_state=101)</pre><p>Notice that I used random_state=101. This is so that you can recreate the same results posted here. We will now fit our K-Means Algorithm to our features data.</p><pre>#fitting kmeans to our features data
kmeans.fit(features_copy.fillna(0))</pre><pre>KMeans(algorithm='auto', copy_x=True, init='k-means++', max_iter=300,
    n_clusters=15, n_init=10, n_jobs=1, precompute_distances='auto',
    random_state=101, tol=0.0001, verbose=0)</pre><p>Note that we called the fillna method on our features_copy dataframe and replaced NaNs values with 0. We can now review our clusters.<br><br>Let's start by checking our labels.</p><pre>#getting cluster labels
kmeans.labels_</pre><pre>array([ 6,  6,  6,  6, 12,  3,  0,  3, 13,  0,  3,  3, 12, 12, 12,  3,  3,
        7,  3,  6, 12,  3,  3,  1,  1,  5, 14,  3,  3, 12,  6,  0, 12,  3,
        3,  3,  3,  6,  3, 13,  3,  0,  3, 13,  3,  8,  0,  3, 13,  3,  3,
        2, 13,  0, 13,  3,  3,  3, 13, 12,  2, 12, 13,  0,  0, 13, 13,  3,
        0,  0,  3,  6,  7, 12,  7,  6,  6, 13,  3,  3, 13, 12,  0,  3,  3,
        0,  0, 12,  3,  3,  6,  3,  3,  3,  3, 13,  0,  6, 13,  5, 10,  0,
        3,  0, 13,  3,  3,  5,  5,  3,  3,  0,  3,  3,  5,  0,  0,  5,  3,
        3, 13,  0,  3,  3,  3,  6, 13,  7,  3,  0,  3,  6,  3,  0,  3,  3,
        0,  3,  0, 12, 13, 12,  3,  3,  3,  3,  3,  0,  3,  6,  3,  3,  0,
        0, 12,  3,  3,  0,  0,  0,  3, 12,  3,  0, 13, 13,  0, 13, 12, 11,
       13, 12,  3,  3,  0,  7,  3,  0,  3,  9,  3,  9,  3, 12,  0, 12,  3,
       13, 13,  3,  3, 12,  3, 12,  3,  3,  0,  3,  3,  3, 13, 13,  3,  3,
        0,  2,  3,  0,  0,  3,  6, 12,  6, 13,  3,  0,  3,  3,  3,  3,  3,
        3,  0,  3, 13,  3, 13,  0, 12,  5,  6,  3,  3,  3, 12,  3, 12,  0,
       12, 11,  3,  5,  3,  5,  3,  3,  3, 12, 12,  3,  7,  3,  3,  3,  9,
        0,  9,  3,  3, 12,  3,  0,  3,  7,  3,  3,  6,  3,  3,  3,  3,  3,
        3,  3,  7,  3,  6,  3, 12,  3,  6,  3,  6,  0,  3,  3,  3,  3, 13,
        3, 12,  0, 12,  3,  6,  3,  3,  6,  0,  3,  6,  5,  7, 12, 13, 11,
       13,  1, 12,  3,  3,  0,  0, 12,  7,  6,  3, 13, 12,  7, 13, 13, 12,
        4, 12, 13, 13, 13, 13,  0, 12,  6,  3, 13,  3,  0,  3,  0, 13,  3,
        0,  3,  0,  3, 12,  5, 12,  3,  3,  3,  0,  3,  3,  5,  3, 13,  5,
        0,  5,  0,  3, 13,  0, 12, 12,  3,  0,  6,  3,  2,  3,  3,  0,  3,
        0,  3,  3, 13,  6,  3,  3, 13,  0, 12, 12, 12, 12,  3, 12,  6,  3,
        3,  3, 12,  3,  3,  3,  0,  4,  3,  6,  3,  3,  3,  3,  3, 13,  0,
        3, 12,  3,  0,  0, 13,  3, 13,  6,  3, 12,  0,  3, 13,  3,  3,  3,
        3,  3,  3, 12,  3,  6,  3,  0,  3, 12, 12, 12,  0,  5,  0,  3,  6,
        0,  3, 12,  3,  3, 13, 12,  0,  0,  3,  6, 12, 12, 12, 12,  6,  3,
        5,  6,  3,  6,  3,  3,  3,  3,  3,  3, 12,  3,  3,  5, 13,  3,  5,
        3, 12,  5,  6,  0,  3,  3,  2,  3, 13, 12,  7,  3,  3,  3, 13, 12,
        3, 12,  3, 13,  3,  3, 12,  0,  3,  7,  3, 12])</pre><p>We will now add our cluster assignments back to our dataframe.</p><pre>#adding cluster labels to dataframe
features_copy['Cluster']=kmeans.labels_</pre><p>Let's now review our features dataframe</p><pre>#reviewing features dataframe
features_copy.head()
</pre><table border="1" class="dataframe" data-cke-table-faked-selection-table=""><thead><tr><th>Symbol</th><th>P/E</th><th>EPS</th><th>MarketCap</th><th>Cluster</th></tr></thead><tbody><tr><th>MMM</th><td>23.17</td><td>8.16</td><td>112.74</td><td>6</td></tr><tr><th>ABT</th><td>48.03</td><td>0.94</td><td>77.76</td><td>6</td></tr><tr><th>ABBV</th><td>17.55</td><td>3.63</td><td>101.52</td><td>6</td></tr><tr><th>ACN</th><td>18.37</td><td>6.76</td><td>77.29</td><td>6</td></tr><tr><th>ATVI</th><td>37.55</td><td>1.28</td><td>36.13</td><td>12</td></tr></tbody></table><pre>#calling tail method our dataframe
features_copy.tail()
</pre><table border="1" class="dataframe" data-cke-table-faked-selection-table=""><thead><tr><th>Symbol</th><th>P/E</th><th>EPS</th><th>MarketCap</th><th>Cluster</th></tr></thead><tbody><tr><th>YHOO</th><td>NaN</td><td>-0.23</td><td>43.74</td><td>0</td></tr><tr><th>YUM</th><td>15.83</td><td>4.04</td><td>22.65</td><td>3</td></tr><tr><th>ZBH</th><td>77.53</td><td>1.51</td><td>23.54</td><td>7</td></tr><tr><th>ZION</th><td>22.75</td><td>1.99</td><td>9.17</td><td>3</td></tr><tr><th>ZTS</th><td>32.16</td><td>1.65</td><td>26.11</td><td>12</td></tr></tbody></table><p>Now that we have our cluster assignments, let's group our data by the cluster assignments.</p><pre>#creating dataframe to hold data
clusters_df=pd.DataFrame()
#grouping our data by cluster for clusters with atleast 2 stocks in it.
clusters_df=pd.concat(i for clusters_df, i in features_copy.groupby(features_copy['Cluster']) if len(i) &gt;1)</pre><p>Let's now check of our new dataframe.</p><pre>#checking the head of clusters df
clusters_df.head()
</pre><table border="1" class="dataframe" data-cke-table-faked-selection-table=""><thead><tr><th>Symbol</th><th>P/E</th><th>EPS</th><th>MarketCap</th><th>Cluster</th></tr></thead><tbody><tr><th>ADBE</th><td>51.72</td><td>2.32</td><td>59.28</td><td>0</td></tr><tr><th>AET</th><td>20.37</td><td>6.41</td><td>45.93</td><td>0</td></tr><tr><th>AIG</th><td>NaN</td><td>-0.78</td><td>62.15</td><td>0</td></tr><tr><th>ANTM</th><td>18.02</td><td>9.21</td><td>43.89</td><td>0</td></tr><tr><th>AMAT</th><td>19.02</td><td>1.94</td><td>39.92</td><td>0</td></tr></tbody></table><pre>#checking the tail of our cluster df
clusters_df.tail()
</pre><table border="1" class="dataframe" data-cke-table-faked-selection-table=""><thead><tr><th>Symbol</th><th>P/E</th><th>EPS</th><th>MarketCap</th><th>Cluster</th></tr></thead><tbody><tr><th>RIG</th><td>6.09</td><td>2.10</td><td>4.67</td><td>13</td></tr><tr><th>VRTX</th><td>NaN</td><td>-0.46</td><td>22.69</td><td>13</td></tr><tr><th>WDC</th><td>NaN</td><td>-1.59</td><td>22.12</td><td>13</td></tr><tr><th>WMB</th><td>NaN</td><td>-0.57</td><td>24.30</td><td>13</td></tr><tr><th>XRX</th><td>NaN</td><td>-0.49</td><td>7.48</td><td>13</td></tr></tbody></table><p>Now that we have our data organized by cluster assignment, we're ready to check for tradeable relationships.<br><br>To do this, we will create every possible pair combination within a respective cluster. We can then later run the CADF test on specific pairs from our clusters.<br><br>Let's create a method that will take the symbols from a specific cluster as an input, compute the possible pair combinations of a respective cluster and store our pairs into a separate list.</p><pre>#creating method to identify each possible pair
 def create_pairs(symbolList):
 #creating a list to hold each possible pair
 pairs=[]
 #initializing placeholders for the symbols in each pair
 x=0
 y=0
 for count,symbol in enumerate(symbolList):
 for nextCount,nextSymbol in enumerate(symbolList):
 x=symbol
 y=nextSymbol
 if x !=y:
 pairs.append([x,y])

return pairs</pre><p>We will now create a list of symbols. Let's use the stock symbols from cluster 0.</p><pre>#creating list of symbols from cluster 0
symbol_list_0=['ADBE','AET','AIG','ANTM','AMAT']</pre><p>We will now use our create pairs method above to create a list of lists of the possible pair combinations.</p><pre>#list of lists of pairs
all_pairs=create_pairs(symbol_list_0)</pre><p>Let's check our pair combinations.</p><pre>#printing list of all_pairs from cluster 0
all_pairs</pre><pre>[['ADBE', 'AET'],
['ADBE', 'AIG'],
['ADBE', 'ANTM'],
['ADBE', 'AMAT'],
['AET', 'ADBE'],
['AET', 'AIG'],
['AET', 'ANTM'],
['AET', 'AMAT'],
['AIG', 'ADBE'],
['AIG', 'AET'],
['AIG', 'ANTM'],
['AIG', 'AMAT'],
['ANTM', 'ADBE'],
['ANTM', 'AET'],
['ANTM', 'AIG'],
['ANTM', 'AMAT'],
['AMAT', 'ADBE'],
['AMAT', 'AET'],
['AMAT', 'AIG'],
['AMAT', 'ANTM']]</pre><p>Okay. Now that we have our possible pair combinations from cluster 0, let's import our intraday data for these stocks.</p><pre>#initializing our stock variables
adbe=pd.read_csv('ADBE_5min.csv')
aet=pd.read_csv('AET_5min.csv')
aig=pd.read_csv('AIG_5min.csv')
antm=pd.read_csv('ANTM_5min.csv')
amat=pd.read_csv('AMAT_5min.csv')</pre><p>Let's check our data.</p><pre>#checking head of ADBE
adbe.head()
</pre><table border="1" style="width:50%"><thead><tr><th><br></th><th>Date</th><th>Time</th><th>Open</th><th>High</th><th>Low</th><th>Close</th><th>Volume</th><th>NumberOfTrades</th><th>BidVolume</th><th>AskVolume</th></tr></thead><tbody><tr><th>0</th><td>2018/01/04</td><td>08:30:00</td><td>181.93</td><td>183.74</td><td>181.84</td><td>183.13</td><td>83862</td><td>396</td><td>22941</td><td>60921</td></tr><tr><th>1</th><td>2018/01/04</td><td>08:35:00</td><td>183.05</td><td>183.48</td><td>182.66</td><td>182.89</td><td>31593</td><td>238</td><td>17840</td><td>13753</td></tr><tr><th>2</th><td>2018/01/04</td><td>08:40:00</td><td>182.84</td><td>183.35</td><td>182.70</td><td>183.22</td><td>49654</td><td>345</td><td>26962</td><td>22692</td></tr><tr><th>3</th><td>2018/01/04</td><td>08:45:00</td><td>183.25</td><td>183.73</td><td>183.06</td><td>183.73</td><td>51108</td><td>314</td><td>21566</td><td>29542</td></tr><tr><th>4</th><td>2018/01/04</td><td>08:50:00</td><td>183.66</td><td>184.00</td><td>183.56</td><td>183.90</td><td>27476</td><td>196</td><td>15287</td><td>12189</td></tr></tbody></table><pre>#checking tail of AIG
aig.tail()
</pre><table border="1" class="dataframe" style="width:50%"><thead><tr><th><br></th><th>Date</th><th>Time</th><th>Open</th><th>High</th><th>Low</th><th>Close</th><th>Volume</th><th>NumberOfTrades</th><th>BidVolume</th><th>AskVolume</th></tr></thead><tbody><tr><th>8574</th><td>2018/06/12</td><td>14:30:00</td><td>54.54</td><td>54.56</td><td>54.51</td><td>54.55</td><td>60902</td><td>357</td><td>20106</td><td>40796</td></tr><tr><th>8575</th><td>2018/06/12</td><td>14:35:00</td><td>54.55</td><td>54.61</td><td>54.53</td><td>54.60</td><td>74483</td><td>425</td><td>29354</td><td>45129</td></tr><tr><th>8576</th><td>2018/06/12</td><td>14:40:00</td><td>54.60</td><td>54.60</td><td>54.55</td><td>54.58</td><td>67539</td><td>414</td><td>20687</td><td>46852</td></tr><tr><th>8577</th><td>2018/06/12</td><td>14:45:00</td><td>54.57</td><td>54.58</td><td>54.54</td><td>54.56</td><td>82122</td><td>439</td><td>24925</td><td>57197</td></tr><tr><th>8578</th><td>2018/06/12</td><td>14:50:00</td><td>54.56</td><td>54.62</td><td>54.56</td><td>54.60</td><td>120328</td><td>779</td><td>46340</td><td>73988</td></tr></tbody></table><p>We can see that we have 5 min bar data for our stocks ranging from January 3, 2018, to the first half of the session on June 11, 2018.<br><br>We can now test our pairs for cointegration. Recall that we are going to use part of our data as our assessment period so we don't want to include it in our test.<br><br>We'll use January to May as our training period and assess our portfolios over the remainder of our data. Let's create variables to hold our training period data.<br><br>We'll store use our Close column. So that we can parse out our data by our training period, we'll make our date column the index of our data.<br><br>We begin by making a copy of our data. Let's create a method to perform this across our symbols data.<br><br>We'll store our original symbols data in a dictionary and pass it into our function.</p><pre>#creating list to hold original data
original_data={'ADBE':adbe,'AET':aet,'AIG':aig,'ANTM':antm,'AMAT':amat}</pre><p>We can now create our function to copy our original data and create a dataframe for our training period data.</p><pre>#function to parse out training period data
def get_training_data(original_data,symbol_list,start,end):
'''
PARAMETERS:

original_data - the dictionary we created that holds our dataframes
symbol_list - the list of symbols; data type are strings
start - the beginning date of our training period as a string
end - the ending date of our training period as a string
'''
#creating a dataframe to hold our parsed series
training_df=pd.DataFrame()
#iterating over our symbol list
for count, symbol in enumerate(symbol_list):

try:
#making a copy of our original data for each symbol
copy=original_data[symbol].copy()
#reindexing our copied data by Date column
copy=copy.reindex(index=copy['Date'],columns=copy.columns)
#restoring values of close column from our original data
copy[' Close']=original_data[symbol][' Close'].values
#parsing out our training period
copy=copy.loc[start:end][' Close']
#adding training data to dataframe
training_df[str(symbol)]=copy.values

except:
print(str(symbol),'Threw an Exception')
print('Current Symbol Length:')
print(len(copy.loc[start:end]))
print("")
print('training_df Length:')
print(len(training_df))
continue

return training_df
</pre><p>We're now ready to create our training data.<br><br>We'll use our get_training_data function to parse out our training data and then use this dataframe to parse out the respective series for our pair combinations to perform our CADF test.</p><pre>#creating our training data dataframe using our training period start and end dates
training_df=get_training_data(original_data,symbol_list_0,'2018/01/04','2018/04/30')</pre><p>Let's check our training_df.</p><pre>training_df.head()
</pre><table border="1" class="dataframe"><thead><tr><th><br></th><th>ADBE</th><th>AET</th><th>AIG</th><th>ANTM</th><th>AMAT</th></tr></thead><tbody><tr><th>0</th><td>183.13</td><td>183.45</td><td>60.36</td><td>229.62</td><td>54.67</td></tr><tr><th>1</th><td>182.89</td><td>183.68</td><td>60.61</td><td>229.63</td><td>54.51</td></tr><tr><th>2</th><td>183.22</td><td>183.80</td><td>60.77</td><td>229.70</td><td>54.25</td></tr><tr><th>3</th><td>183.73</td><td>183.82</td><td>60.81</td><td>229.65</td><td>54.08</td></tr><tr><th>4</th><td>183.90</td><td>183.93</td><td>60.80</td><td>229.70</td><td>54.27</td></tr></tbody></table><p>After checking our dataframe, we find that we have our training period data for all of our stocks. This means that we should have 20 possible pairs.<br><br>We can write a method to check our math.</p><pre>#creating method to check possible pair combinations
def possitrainingnations(n):
#Parameters#
############
#n- represents the number of items or in our case stocks

possible_pairs=(n*(n-1))

return possible_pairs</pre><p>Now let's check our possible pair combinations.</p><pre>#checking possible pair combinations
possible_combinations(5) # we pass in 5 for our 5 stocks</pre><pre>20</pre><p>We're now ready to check our pairs for cointegration.<br><br>We'll create a method that will allow us to iterate over our pairs, compute the slope and then perform the CADF test. The pairs that are cointegrated will be stored in a list.<br><br>Let's import our OLS method.</p><pre>from scipy.stats import linregress</pre><p>Now we'll write our method to create our cointegrated pairs.</p><pre>def get_cointegrated(all_pairs,training_df):
'''
PARAMETERS
#########

all_pairs - the list of all possible pair combinations from Cluster 0
training_df - our dataframe holding our stock data for stocks in Cluster 0 over the training period

'''
#creating a list to hold cointegrated pairs
cointegrated=[]
#iterate over each pair in possible pairs list; pair is a list of our 2 stock symbols
for count, pair in enumerate(all_pairs):
try:
#getting data for each stock in pair from training_df
ols=linregress(training_df[str(pair[1])],training_df[str(pair[0])]) #note scipy's linregress takes in Y then X
#storing slope or hedge ratio in variable
slope=ols[0]
#creating spread
spread=training_df[str(pair[1])]-(slope*training_df[str(pair[0])])
#testing spread for cointegration
cadf=adfuller(spread,1)
#checking to see if spread is cointegrated, if so then store pair in cointegrated list
if cadf[0] &lt; cadf[4]['1%']:
print('Pair Cointegrated at 99% Confidence Interval')
#appending the X and Y of pair
cointegrated.append([pair[0],pair[1]])
elif cadf[0] &lt; cadf[4]['5%']:
print('Pair Cointegrated at 95% Confidence Interval')
#appending the X and Y of pair
cointegrated.append([pair[0],pair[1]])
elif cadf[0] &lt; cadf[4]['10%']:
print('Pair Cointegrated at 90% Confidence Interval')
cointegrated.append(pair[0],pair[1])
else:
print('Pair Not Cointegrated ')
continue
except:
print('Exception: Symbol not in Dataframe')
continue

return cointegrated
</pre><p>Let's initialize our get_cointegrated function and find our cointegrated pairs.</p><pre>#getting our cointegrated pairs
cointegrated_from_cluster_0=get_cointegrated(all_pairs,training_df)</pre><pre>Pair Not Cointegrated
Pair Not Cointegrated
Pair Cointegrated at 95% Confidence Interval
Pair Not Cointegrated
Pair Not Cointegrated
Pair Not Cointegrated
Pair Cointegrated at 95% Confidence Interval
Pair Not Cointegrated
Pair Not Cointegrated
Pair Not Cointegrated
Pair Not Cointegrated
Pair Not Cointegrated
Pair Not Cointegrated
Pair Cointegrated at 95% Confidence Interval
Pair Not Cointegrated
Pair Not Cointegrated
Pair Not Cointegrated
Pair Not Cointegrated
Pair Not Cointegrated
Pair Not Cointegrated</pre><p>Let's check our cointegrated list.</p><pre>cointegrated_from_cluster_0</pre><pre>[['ADBE', 'ANTM'], ['AET', 'ANTM'], ['ANTM', 'AET']]</pre><p>Okay. We've found that 3 of our possible 20 pairs are cointegrated each at the 90% confidence interval.<br><br>Recall that we called the head method on our clusters_df dataframe of which returns only the first five rows.<br><br>Let's use the Counter method to get an idea of how our symbols are distributed across all our clusters.</p><pre>#importing the Counter method
from collections import Counter</pre><pre>#calling Counter method on our clusters
Counter(clusters_df['Cluster'])</pre><pre>Counter({0: 76,
1: 3,
2: 5,
3: 215,
4: 2,
5: 19,
6: 39,
7: 13,
9: 4,
11: 3,
12: 69,
13: 54})</pre><p>We can see that Cluster 0 actually contains a total of 76 symbols. Given that we found 3 tradeable relationships, we'll use these.<br><br>However, I will illustrate how, in the event that none of the symbols in our first cluster were cointegrated, we would go about checking the symbols in a specific cluster.<br><br>We'll need to create a method that will allow us to iterate over our clusters column and return the symbols that are within a specific cluster.<br><br>To begin we'll add our symbols back to our dataframe as a column so that we can retrieve them if our cluster condition is met.</p><pre>#adding Symbol Column back to cluster_df
clusters_df['Symbol']=clusters_df.index</pre><p>Let's recheck our dataframe.</p><pre>#checking update to cluster_df
clusters_df.head()
</pre><table border="1" class="dataframe" data-cke-table-faked-selection-table=""><thead><tr><th>Symbol</th><th>P/E</th><th>EPS</th><th>MarketCap</th><th>Cluster</th><th>Symbol</th></tr></thead><tbody><tr><th>ADBE</th><td>51.72</td><td>2.32</td><td>59.28</td><td>0</td><td>ADBE</td></tr><tr><th>AET</th><td>20.37</td><td>6.41</td><td>45.93</td><td>0</td><td>AET</td></tr><tr><th>AIG</th><td>NaN</td><td>-0.78</td><td>62.15</td><td>0</td><td>AIG</td></tr><tr><th>ANTM</th><td>18.02</td><td>9.21</td><td>43.89</td><td>0</td><td>ANTM</td></tr><tr><th>AMAT</th><td>19.02</td><td>1.94</td><td>39.92</td><td>0</td><td>AMAT</td></tr></tbody></table><p>Now we're ready to create our method of retrieving and storing our symbols in a list based on our cluster.<br><br>For this task, we'll use a list comprehension. We'll apply our method to cluster 9.</p><pre>symbols_cluster_9=[ clusters_df['Symbol'][count] for count,value in enumerate(clusters_df['Cluster'].values) if value == 9]</pre><p>Let's check the length of our symbols_cluster_9 list to ensure that our method worked correctly.<br><br>Recall that our Counter method returned a value of 4 for the number of symbols in this cluster.</p><pre>#getting the length of our cluster 9 list
len(symbols_cluster_9)</pre><pre>4</pre><p>Great! We see that our list comprehension is working properly. Now we can use this list of symbols to create every possible pair combination for cluster 9.<br><br>Let's check what symbols are in cluster 9.</p><pre>#checking the symbols in cluster 9
symbols_cluster_9</pre><pre>['XOM', 'FB', 'JNJ', 'JPM']</pre><p>We'll now use this list to create our pair combinations for cluster 9 using our create_pairs method from earlier.</p><pre>#getting pair combinations for cluster 9
cluster_9_pairs=create_pairs(symbols_cluster_9)</pre><p>Let's check our pair combinations for cluster 9.</p><pre>#checking cluster 9 pair combinations.
cluster_9_pairs</pre><pre>[['XOM', 'FB'],
['XOM', 'JNJ'],
['XOM', 'JPM'],
['FB', 'XOM'],
['FB', 'JNJ'],
['FB', 'JPM'],
['JNJ', 'XOM'],
['JNJ', 'FB'],
['JNJ', 'JPM'],
['JPM', 'XOM'],
['JPM', 'FB'],
['JPM', 'JNJ']]</pre><p>Okay. We've learned that we have three tradeable relationships from Cluster 0 from the first five symbols we tested. We've also walked through how we would find other pairs in other clusters if we had not found these three pairs.<br><br>After finding the pairs above, we would apply the same method to check for cointegration as was used to identify our three pairs.<br><br>From here we are ready to begin constructing our portfolios.</p><h3><strong>Brief Recap</strong></h3><p>Let's take a step back and review what we've accomplished thus far.</p><ul style="margin-left: 40px;"><li>We began by gaining an understanding of the Stereoscopic Portfolio Optimization (SPO) Framework.</li><li>We then performed K-Means Clustering on the S&amp;P 500.</li><li>We found optimal value for <strong>K</strong> by creating the elbow graph using our fundamental data features.</li><li>After finding K, we created our <strong>K-Means algorithm</strong> and selected stocks from Cluster 0 to test whether or not we could identify tradeable relationships.</li></ul><p>Out of the first five symbols in Cluster 0, we found that 3 of the 20 possible combinations were cointegrated.<br><br>To illustrate how we would proceed had we not found any tradeable relationships, we created a method that would allow us to select all of the stocks from within a specific cluster and use these to create all possible pair combinations.<br><br>With these pairs in hand, we could then test these pairs to see if we could find tradeable relationships.</p><h3><strong>Portfolio Construction: Equal Weighted</strong></h3><p>Now that we have found some likely tradeable relationships, we're ready to construct our portfolio. In this section, we're going to create a portfolio that equally weighs our strategy.<br><br>We'll assume that we have a portfolio value of $100k USD with 10% in cash. We will allocate $30k USD to each of our pairs. To begin we will create a class that will allow us to create our StatArb strategies.<br><br>Recall, our training period for our portfolios that will be employing the use of machine learning is 1/4/2018 to 4/30/2018, thus because this portfolio will not be employing the use of an optimization method, we will construct it over the period beginning 5/1/2018 so that it is consistent with the test period of our remaining portfolios.<br><br>Let's now create the variables of each of our symbols that will hold the data beginning 5/1/2018.<br><br>We'll make a copy of our data and set our date as the index so that we can parse out our test period.</p><pre>#creating copies of our data
adbe_copy=adbe.copy()
aet_copy=aet.copy()
antm_copy=antm.copy()</pre><pre>#reindexing our data
adbe_copy=adbe_copy.reindex(index=adbe_copy['Date'],columns=adbe_copy.columns)
aet_copy=aet_copy.reindex(index=aet_copy['Date'],columns=aet_copy.columns)
antm_copy=antm_copy.reindex(index=antm_copy['Date'],columns=antm_copy.columns)</pre><p>Okay. Let's check our dataframe.</p><pre>#checking dataframe after reindexing
adbe_copy.head()
</pre><table border="1" class="dataframe" data-cke-table-faked-selection-table=""><thead><tr><th>Date</th><th>Date</th><th>Time</th><th>Open</th><th>High</th><th>Low</th><th>Close</th><th>Volume</th><th>NumberOfTrades</th><th>BidVolume</th><th>AskVolume</th></tr></thead><tbody><tr><th>2018/01/04</th><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td></tr><tr><th>2018/01/04</th><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td></tr><tr><th>2018/01/04</th><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td></tr><tr><th>2018/01/04</th><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td></tr><tr><th>2018/01/04</th><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td><td>NaN</td></tr></tbody></table><p>Now let's restore the values back to our columns. We'll also drop the date column.</p><pre>#dropping date columns
adbe_copy.drop('Date',axis=1,inplace=True)
aet_copy.drop('Date',axis=1,inplace=True)
antm_copy.drop('Date',axis=1,inplace=True)</pre><pre>#restoring our column values back to our data
adbe_copy[[' Time',' Open',' High',' Low',' Close',' Volume',' NumberOfTrades',' BidVolume',' AskVolume']]=adbe[[' Time',' Open',' High',' Low',' Close',' Volume',' NumberOfTrades',' BidVolume',' AskVolume']].values
aet_copy[[' Time',' Open',' High',' Low',' Close',' Volume',' NumberOfTrades',' BidVolume',' AskVolume']]=aet[[' Time',' Open',' High',' Low',' Close',' Volume',' NumberOfTrades',' BidVolume',' AskVolume']].values
antm_copy[[' Time',' Open',' High',' Low',' Close',' Volume',' NumberOfTrades',' BidVolume',' AskVolume']]=antm[[' Time',' Open',' High',' Low',' Close',' Volume',' NumberOfTrades',' BidVolume',' AskVolume']].values</pre><p>Let's recheck our dataframe.</p><pre>#rechecking our dataframe
adbe_copy.head()
</pre><table border="1" class="dataframe" data-cke-table-faked-selection-table=""><thead><tr><th>Date</th><th>Time</th><th>Open</th><th>High</th><th>Low</th><th>Close</th><th>Volume</th><th>NumberOfTrades</th><th>BidVolume</th><th>AskVolume</th></tr></thead><tbody><tr><th>2018/01/04</th><td>08:30:00</td><td>181.93</td><td>183.74</td><td>181.84</td><td>183.13</td><td>83862</td><td>396</td><td>22941</td><td>60921</td></tr><tr><th>2018/01/04</th><td>08:35:00</td><td>183.05</td><td>183.48</td><td>182.66</td><td>182.89</td><td>31593</td><td>238</td><td>17840</td><td>13753</td></tr><tr><th>2018/01/04</th><td>08:40:00</td><td>182.84</td><td>183.35</td><td>182.70</td><td>183.22</td><td>49654</td><td>345</td><td>26962</td><td>22692</td></tr><tr><th>2018/01/04</th><td>08:45:00</td><td>183.25</td><td>183.73</td><td>183.06</td><td>183.73</td><td>51108</td><td>314</td><td>21566</td><td>29542</td></tr><tr><th>2018/01/04</th><td>08:50:00</td><td>183.66</td><td>184.00</td><td>183.56</td><td>183.90</td><td>27476</td><td>196</td><td>15287</td><td>12189</td></tr></tbody></table><p>Now we're ready to slice out our test period.</p><pre>#creating variables to hold testing period data
adbe_test=adbe_copy.loc['2018/05/01':]
aet_test=aet_copy.loc['2018/05/01':]
antm_test=antm_copy.loc['2018/05/01':]</pre><p>Let's check the head and tail of our data.</p><pre>#checking beginning of test period
adbe_test.head()
</pre><table border="1" class="dataframe" data-cke-table-faked-selection-table=""><thead><tr><th>Date</th><th>Time</th><th>Open</th><th>High</th><th>Low</th><th>Close</th><th>Volume</th><th>NumberOfTrades</th><th>BidVolume</th><th>AskVolume</th></tr></thead><tbody><tr><th>2018/05/01</th><td>08:30:00</td><td>220.77</td><td>221.28</td><td>220.33</td><td>220.88</td><td>52351</td><td>233</td><td>39904</td><td>12447</td></tr><tr><th>2018/05/01</th><td>08:35:00</td><td>220.95</td><td>221.34</td><td>219.78</td><td>220.09</td><td>31969</td><td>242</td><td>15350</td><td>16619</td></tr><tr><th>2018/05/01</th><td>08:40:00</td><td>220.10</td><td>220.15</td><td>219.38</td><td>219.64</td><td>26163</td><td>175</td><td>14622</td><td>11541</td></tr><tr><th>2018/05/01</th><td>08:45:00</td><td>219.52</td><td>220.55</td><td>219.52</td><td>220.34</td><td>22756</td><td>117</td><td>10890</td><td>11866</td></tr><tr><th>2018/05/01</th><td>08:50:00</td><td>220.31</td><td>220.82</td><td>220.24</td><td>220.51</td><td>23994</td><td>89</td><td>18044</td><td>5950</td></tr></tbody></table><pre>#checking the end of test period
adbe_test.tail()
</pre><table border="1" class="dataframe" data-cke-table-faked-selection-table=""><thead><tr><th>Date</th><th>Time</th><th>Open</th><th>High</th><th>Low</th><th>Close</th><th>Volume</th><th>NumberOfTrades</th><th>BidVolume</th><th>AskVolume</th></tr></thead><tbody><tr><th>2018/06/12</th><td>14:30:00</td><td>252.26</td><td>252.35</td><td>252.25</td><td>252.34</td><td>35644</td><td>285</td><td>15996</td><td>19648</td></tr><tr><th>2018/06/12</th><td>14:35:00</td><td>252.35</td><td>252.35</td><td>252.05</td><td>252.27</td><td>32074</td><td>261</td><td>14746</td><td>17328</td></tr><tr><th>2018/06/12</th><td>14:40:00</td><td>252.27</td><td>252.32</td><td>252.12</td><td>252.20</td><td>25809</td><td>222</td><td>13909</td><td>11900</td></tr><tr><th>2018/06/12</th><td>14:45:00</td><td>252.19</td><td>252.36</td><td>252.06</td><td>252.36</td><td>43128</td><td>340</td><td>19684</td><td>23444</td></tr><tr><th>2018/06/12</th><td>14:50:00</td><td>252.40</td><td>252.53</td><td>252.29</td><td>252.47</td><td>53480</td><td>450</td><td>25475</td><td>28005</td></tr></tbody></table><p>We can now parse out our closing values from our test period dataframes.</p><pre>#Closing price series for data
adbe_test_price_series=np.array(adbe_test[' Close'])
aet_test_price_series=np.array(aet_test[' Close'])
antm_test_price_series=np.array(antm_test[' Close'])</pre><p>Let's check one of our price series. We'll use AET.</p><pre>#checking head of AET price series
aet_test_price_series[0:5]</pre><pre>array([ 180.42, 179.7 , 179.3 , 179.53, 179.7 ])</pre><p>We can now construct our StatArb class and create our individual strategies. We will then combine these individual strategies into an equally weighted portfolio.</p><pre>class statarb(object):

def __init__(self,df1, df2,ma,floor, ceiling,beta_lookback,start,end,exit_zscore=0):
#setting the attributes
self.df1=df1 #array of prices for X
self.df2=df2 #array of prices for Y
self.ma=ma# the lookback period
self.floor=floor #the buy threshold for the z-score
self.ceiling=ceiling #the sell threshold for the z-score
self.Close='Close Long' #used as close signal for longs
self.Cover='Cover Short' #used as close signal for shorts
self.exit_zscore=exit_zscore #the z-score
self.beta_lookback=beta_lookback #the lookback for hedge ratio
self.start=start #the beginning of test period as a string
self.end=end # the end of test period as a string
#create price spread
def create_spread(self):
#creating new dataframe
self.df=pd.DataFrame(index=range(0,len(self.df1)))

try:
self.df['X']=self.df1
self.df['Y']=self.df2

except:
print('Length of self.df:')
print(len(self.df))
print('')
print('Length of self.df1:')
print(len(self.df1))
print('')
print('Length of self.df2:')
print(len(self.df2))
#calculating the beta of the pairs
ols=linregress(self.df['Y'],self.df['X'])
self.df['Beta']=ols[0]
#calculating the spread
self.df['Spread']=self.df['Y']-(self.df['Beta'].rolling(window=self.beta_lookback).mean()*self.df['X'])

return self.df.head()

def generate_signals(self):
#creating the z-score
self.df['Z-Score']=(self.df['Spread']-self.df['Spread'].rolling(window=self.ma).mean())/self.df['Spread'].rolling(window=self.ma).std()
#prior z-score
self.df['Prior Z-Score']=self.df['Z-Score'].shift(1)
#Creating Buy and Sell Signals; when to be long, short, exit
self.df['Longs']=(self.df['Z-Score']&lt;=self.floor)*1.0 #buy the spread
self.df['Shorts']=(self.df['Z-Score']&gt;=self.ceiling)*1.0 #short the spread
self.df['Exit']=(np.abs(self.df['Z-Score'])&lt;=self.exit_zscore)*1.0 
#tracking positions via for loop implementation
self.df['Long_Market']=0.0
self.df['Short_Market']=0.0 
#Setting Variables to track whether or not to be long while iterating over df
self.long_market=0
self.short_market=0 
#Determining when to trade
for i,value in enumerate(self.df.iterrows()): 
#Calculate longs
if value[1]['Longs']==1.0:
self.long_market=1
if value[1]['Shorts']==1.0:
self.short_market=1
if value[1]['Exit']==1.0:
self.long_market=0
self.short_market=0
self.df.iloc[i]['Long_Market']=self.long_market
self.df.iloc[i]['Short_Market']=self.short_market

return

def create_returns(self, allocation,pair_number): 
'''
PARAMETERS
##########
allocation - the amount of capital alotted for pair
pair_number - string to annotate the plots
'''
self.allocation=allocation
self.pair=pair_number

self.portfolio=pd.DataFrame(index=self.df.index)
self.portfolio['Positions']=self.df['Long_Market']-self.df['Short_Market']
self.portfolio['X']=-1.0*self.df['X']*self.portfolio['Positions']
self.portfolio['Y']=self.df['Y']*self.portfolio['Positions']
self.portfolio['Total']=self.portfolio['X']+self.portfolio['Y']
#creating a percentage return stream
self.portfolio['Returns']=self.portfolio['Total'].pct_change()
self.portfolio['Returns'].fillna(0.0,inplace=True)
self.portfolio['Returns'].replace([np.inf,-np.inf],0.0,inplace=True)
self.portfolio['Returns'].replace(-1.0,0.0,inplace=True)
#calculating metrics
self.mu=(self.portfolio['Returns'].mean())
self.sigma=(self.portfolio['Returns'].std())
self.portfolio['Win']=np.where(self.portfolio['Returns']&gt;0,1,0)
self.portfolio['Loss']=np.where(self.portfolio['Returns']&lt;0,1,0)
self.wins=self.portfolio['Win'].sum()
self.losses=self.portfolio['Loss'].sum()
self.total_trades=self.wins+self.losses
#calculating sharpe ratio with interest rate of
#interest_rate_assumption=0.75
#self.sharp=(self.mu-interest_rate_assumption)/self.sigma
#win loss ratio;
self.win_loss_ratio=(self.wins/self.losses)
#probability of win
self.prob_of_win=(self.wins/self.total_trades)
#probability of loss
self.prob_of_loss=(self.losses/self.total_trades)
#average return of wins
self.avg_win_return=(self.portfolio['Returns']&gt;0).mean()
#average returns of losses
self.avg_loss_return=(self.portfolio['Returns']&lt;0).mean()
#calculating payout ratio
self.payout_ratio=(self.avg_win_return/self.avg_loss_return)
#calculate equity curve
self.portfolio['Returns']=(self.portfolio['Returns']+1.0).cumprod()
self.portfolio['Trade Returns']=(self.portfolio['Total'].pct_change()) #non cumulative Returns
self.portfolio['Portfolio Value']=(self.allocation*self.portfolio['Returns'])
self.portfolio['Portfolio Returns']=self.portfolio['Portfolio Value'].pct_change()
self.portfolio['Initial Value']=self.allocation

with plt.style.context(['ggplot','seaborn-paper']):
#Plotting Portfolio Value
plt.plot(self.portfolio['Portfolio Value'])
plt.plot(self.portfolio['Initial Value'])
plt.title('%s Strategy Returns '%(self.pair))
plt.legend(loc=0)
plt.show()

return
</pre><p>Okay! We're ready to apply our StatArb class to create our strategies. Recall that our pairs are ADBE &amp; ANTM, ANTM &amp; AET and AET &amp; ANTM.<br><br>You may be wondering why we're using ANTM &amp; AET and AET &amp; ANTM. This is because though both pairs use the same symbols, they are in fact two completely different relationships.<br><br>In the first pair, ANTM is the X and AET is the Y. In a sense, we're asking what degree of variation in AET can be explained by a unit change in ANTM.<br><br>In contrast, in the AET &amp; ANTM pair, we're asking what degree of variation in ANTM can be explained by a unit change in AET.<br><br>When we compute the slope or derivative, we get two completely different numbers, and thus two different relationships.<br><br>Let's now apply our StatArb class to our first pair.</p><pre>#ADBE &amp; ANTM statarb initialization
#passing in X, Y, MA, Floor, Ceiling, Beta Lookback, Start, End
adbe_antm=statarb(adbe_test_price_series,antm_test_price_series,17,-2,2,17,adbe_test.iloc[0],adbe_test.iloc[-1])</pre><p>Let's now create our spread and generate our signals.</p><pre>#creating spread
adbe_antm.create_spread()
</pre><table border="1" class="dataframe"><thead><tr><th><br></th><th>X</th><th>Y</th><th>Beta</th><th>Spread</th></tr></thead><tbody><tr><th>0</th><td>220.88</td><td>236.05</td><td>-0.763772</td><td>NaN</td></tr><tr><th>1</th><td>220.09</td><td>236.74</td><td>-0.763772</td><td>NaN</td></tr><tr><th>2</th><td>219.64</td><td>237.11</td><td>-0.763772</td><td>NaN</td></tr><tr><th>3</th><td>220.34</td><td>237.26</td><td>-0.763772</td><td>NaN</td></tr><tr><th>4</th><td>220.51</td><td>236.76</td><td>-0.763772</td><td>NaN</td></tr></tbody></table><p>We can now generate our signals and compute our returns on our allocation of $30k USD.</p><pre>#generating signals
adbe_antm.generate_signals()</pre><pre>#creating returns and passing in our allocation amount
adbe_antm.create_returns(30000,'ADBE_ANTM')</pre><p><img alt="g1" class="aligncenter img-responsive size-full wp-image-13915" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/g1.png" src="./Optimal Portfolio Construction Using Machine Learning_files/g1.png" style="height:313px; width:452px"><br>We can repeat this process for our remaining pairs. Note, our create_spread method returned the head of our dataframe containing our spread.<br><br>We used a lookback of 17 which explains why those values are NaNs.</p><pre>#repeating process for ANTM and AET
antm_aet=statarb(antm_test_price_series,aet_test_price_series,6,-2,2,6,antm_test.iloc[0],antm_test.iloc[-1])
antm_aet.create_spread()
antm_aet.generate_signals()
antm_aet.create_returns(30000,'ANTM &amp; AET')</pre><p><img alt="g2" class="aligncenter img-responsive size-full wp-image-13916" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/g2.png" src="./Optimal Portfolio Construction Using Machine Learning_files/g2.png" style="height:316px; width:444px"></p><pre>#repeating process for AET and ANTM
aet_antm=statarb(aet_test_price_series,antm_test_price_series,12,-2,2,12,aet_test.iloc[0],aet_test.iloc[-1])
aet_antm.create_spread()
aet_antm.generate_signals()
aet_antm.create_returns(30000,'AET &amp; ANTM')</pre><p><img alt="g3" class="aligncenter img-responsive size-full wp-image-13917" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/g3.png" src="./Optimal Portfolio Construction Using Machine Learning_files/g3.png" style="height:313px; width:444px"> Okay. Not that we have created our individual StatArb implementations, we can combine these into a portfolio, calculate our portfolio returns, mu, sigma, and Sharpe ratio.</p><blockquote><p><em>Note, to compute the Sharpe we will need to make an assumption about the level of interest rates.</em></p></blockquote><p>In as of December 2017, the fed funds rate was 1.5%. We'll use this as our interest rate assumption. Recall that we started with a portfolio value of 100k USD.<br><br>We allocated 10k USD to cash and equally weighted our StatArb strategies.</p><h3><strong>Creating the Equally Weighted Portfolio</strong></h3><p>We included a portfolio value variable in our statarb class. We'll use this to create our total equally weighted portfolio.</p><pre>#creating dataframe for equally weighted portfolio
equally_weighted=pd.DataFrame()
equally_weighted['ADBE_ANTM']=adbe_antm.portfolio['Portfolio Value']
equally_weighted['ANTM_AET']=antm_aet.portfolio['Portfolio Value']
equally_weighted['AET_ANTM']=aet_antm.portfolio['Portfolio Value']
equally_weighted['Cash']=10000
equally_weighted['Total Portfolio Value']=equally_weighted['ADBE_ANTM']+equally_weighted['ANTM_AET']+equally_weighted['AET_ANTM']+equally_weighted['Cash']</pre><p>Let's check our equally_weighted portfolio dataframe.</p><pre>equally_weighted.head()
</pre><table border="1" class="dataframe"><thead><tr><th><br></th><th>ADBE_ANTM</th><th>ANTM_AET</th><th>AET_ANTM</th><th>Cash</th><th>Total Portfolio Value</th></tr></thead><tbody><tr><th>0</th><td>30000.0</td><td>30000.0</td><td>30000.0</td><td>10000</td><td>100000.0</td></tr><tr><th>1</th><td>30000.0</td><td>30000.0</td><td>30000.0</td><td>10000</td><td>100000.0</td></tr><tr><th>2</th><td>30000.0</td><td>30000.0</td><td>30000.0</td><td>10000</td><td>100000.0</td></tr><tr><th>3</th><td>30000.0</td><td>30000.0</td><td>30000.0</td><td>10000</td><td>100000.0</td></tr><tr><th>4</th><td>30000.0</td><td>30000.0</td><td>30000.0</td><td>10000</td><td>100000.0</td></tr></tbody></table><p>We can now add our returns column and then use it to compute our Mu, Sigma and Sharpe ratio.</p><pre>#adding returns column
equally_weighted['Returns']=np.log(equally_weighted['Total Portfolio Value']/equally_weighted['Total Portfolio Value'].shift(1))
#rechecking our dataframe
equally_weighted.head()</pre><table border="1" class="dataframe"><thead><tr><th><br></th><th>ADBE_ANTM</th><th>ANTM_AET</th><th>AET_ANTM</th><th>Cash</th><th>Total Portfolio Value</th><th>Returns</th></tr></thead><tbody><tr><th>0</th><td>30000.0</td><td>30000.0</td><td>30000.0</td><td>10000</td><td>100000.0</td><td>NaN</td></tr><tr><th>1</th><td>30000.0</td><td>30000.0</td><td>30000.0</td><td>10000</td><td>100000.0</td><td>0.0</td></tr><tr><th>2</th><td>30000.0</td><td>30000.0</td><td>30000.0</td><td>10000</td><td>100000.0</td><td>0.0</td></tr><tr><th>3</th><td>30000.0</td><td>30000.0</td><td>30000.0</td><td>10000</td><td>100000.0</td><td>0.0</td></tr><tr><th>4</th><td>30000.0</td><td>30000.0</td><td>30000.0</td><td>10000</td><td>100000.0</td><td>0.0</td></tr></tbody></table><p>We'll now get our Mu, Sigma, and Sharpe and store them in variables.</p><pre>#initializing Equally_Weighted portfolio metrics
equally_weighted_mu=equally_weighted['Returns'].mean()
equally_weighted_sigma=equally_weighted['Returns'].std()
#initializing interest rate assumption of 1.5%
rate=0.015
#computing Sharpe
equally_weighted_Sharpe=round((equally_weighted_mu-rate)/equally_weighted_sigma,2)</pre><p>Okay, let's check the Sharpe Ratio of our Equally Weighted Portfolio.</p><pre>#getting Equally Weighted Portfolio Sharpe

print('Equally Weighted Portfolio Sharpe:',equally_weighted_Sharpe)</pre><pre>Equally Weighted Portfolio Sharpe: -2.1</pre><p>Let's plot our portfolio equity curve.</p><pre>#plotting Equally Weighted Equity Curve
plt.figure(figsize=(10,6))
plt.plot(equally_weighted['Total Portfolio Value'])
plt.title('Equally Weighted Portfolio Equity Curve')
plt.show()</pre><p><img alt="g4" class="aligncenter img-responsive size-full wp-image-13919" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/g4.png" src="./Optimal Portfolio Construction Using Machine Learning_files/g4.png" style="height:418px; width:684px"><br>We can see that even though our equally weighted portfolio value increased, it still had a negative Sharpe.<br><br>We can repeat this process for our remaining portfolios and compare our Sharpe ratios.</p><h3><strong>Portfolio Construction: Efficient Frontier</strong></h3><p>Thus far we've created our Equally Weighted Portfolio and checked our Sharpe Ratio and Equity Curve.<br><br>We are now interested in what our Sharpe might be if we found the optimal weights for each of our StatArb implementations as well as the resulting effect on our equity curve.<br><br>We will now turn our attention to simulating our portfolio's mean and variance by assigning random weights to each of our pairs. We will store our portfolio's mean return and sigma and create a scatter plot that will aid us in selecting the most efficient weights for each of our strategy implementations.<br><br>To best decipher how we should weight our strategy implementations we will include logic that computes the Sharpe Ratios for each portfolio created. We can then create new instances of our StatArb implementations using updated allocations and survey the effects on our Sharpe Ratio and equity curve.<br><br>Though our Bottom Up Portfolio will be an extension of our Equally Weighted Portfolio in that it will only apply our machine learning concepts to the microstructure components, our Stereoscopic Portfolio Optimization (SPO)&nbsp;Framework will combine the weights found within this portfolio construction process and combine it with the process of constructing the Bottom Up Portfolio.<br><br>To begin, let's retrieve the MUs and Sigmas of our pairs. Recall that we created a method within the&nbsp;class that stores our mean and sigma.<br><br>We can use our strategy objects to retrieve these variables.</p><pre>#initialzing Mus and Sigmas
#ADBE &amp; ANTM
adbe_antm_mu=adbe_antm.mu
adbe_antm_sigma=adbe_antm.sigma
#ANTM &amp; AET
antm_aet_mu=antm_aet.mu
antm_aet_sigma=antm_aet.sigma
#AET &amp; ANTM
aet_antm_mu=aet_antm.mu
aet_antm_sigma=aet_antm.sigma</pre><p>The return of our portfolio can be expressed as</p><p style="text-align:center"><img alt="1.1" class="aligncenter img-responsive size-full wp-image-13938" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/1.1.png" src="./Optimal Portfolio Construction Using Machine Learning_files/1.1.png" style="height:67px; width:174px">or as <img alt="1.2" class="aligncenter img-responsive size-full wp-image-13939" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/1.2.png" src="./Optimal Portfolio Construction Using Machine Learning_files/1.2.png" style="height:26px; width:192px"></p><p>where,</p><p style="margin-left: 40px;"><strong>w<sub>i</sub></strong> is the weight of the <strong>i<sub>th</sub></strong> asset, and<br><strong>r<sub>i</sub></strong> is the return of the i<sub>th</sub> asset.</p><p>Let's create a method to compute returns.</p><pre>#computing log returns for our portfolio values
returns=np.log(equally_weighted[['ADBE_ANTM','ANTM_AET','AET_ANTM']]/equally_weighted[['ADBE_ANTM','ANTM_AET','AET_ANTM']].shift(1))</pre><p>Let's check our returns.</p><pre>#checking returns
returns.head()
</pre><table border="1" class="dataframe"><thead><tr><th><br></th><th>ADBE_ANTM</th><th>ANTM_AET</th><th>AET_ANTM</th></tr></thead><tbody><tr><th>0</th><td>NaN</td><td>NaN</td><td>NaN</td></tr><tr><th>1</th><td>0.0</td><td>0.0</td><td>0.0</td></tr><tr><th>2</th><td>0.0</td><td>0.0</td><td>0.0</td></tr><tr><th>3</th><td>0.0</td><td>0.0</td><td>0.0</td></tr><tr><th>4</th><td>0.0</td><td>0.0</td><td>0.0</td></tr></tbody></table><p>We can now create our mean returns an annualize them.</p><pre>avg_returns_252=returns.mean()*252</pre><p>Let's check our average annualized returns.</p><pre>#checking average annualized returns
avg_returns</pre><pre>[0.00045914208401620995, 3.3720231332227273e-06, 0.00016147773221808213]</pre><p>The variance of our portfolio can be expressed as</p><p style="text-align:center"><img alt="1.3" class="aligncenter img-responsive size-full wp-image-13940" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/1.3.png" src="./Optimal Portfolio Construction Using Machine Learning_files/1.3.png" style="height:68px; width:149px"></p><p>where,</p><p style="margin-left: 40px;"><strong>w<sub>i</sub></strong> is the weight of the <strong>i<sub>th</sub></strong> asset,<br><strong>w<sub>j</sub></strong> is the weight of the<strong> j<sub>th</sub></strong> asset.</p><p>Now we will use our returns to create our annualized covariance matrix.</p><pre>covariance_matrix=returns.cov()*252</pre><p>Let's check our covariance matrix.</p><pre>covariance_matrix
</pre><table border="1" class="dataframe"><thead><tr><th><br></th><th>ADBE_ANTM</th><th>ANTM_AET</th><th>AET_ANTM</th></tr></thead><tbody><tr><th>ADBE_ANTM</th><td>0.156866</td><td>1.205435e-04</td><td>-2.591987e-03</td></tr><tr><th>ANTM_AET</th><td>0.000121</td><td>1.834339e-05</td><td>-1.338726e-07</td></tr><tr><th>AET_ANTM</th><td>-0.002592</td><td>-1.338726e-07</td><td>1.212121e-03</td></tr></tbody></table><p>We can now create a variable to hold our weights for each strategy.</p><pre>#assigning weights
weights=np.random.random(len(returns.columns))
weights/=np.sum(weights)</pre><pre>#reviewing weights
weights</pre><pre>array([ 0.22235774, 0.15788307, 0.61975919])</pre><p>The following method is an adaptation from <strong>Dr. Yves J. Hilpisch's "Python for Finance"</strong>.<br><br>We'll use it to plot our Efficient Frontier and find the most optimal weights for our strategies.</p><pre>#importing optimization function
import scipy.optimize as sco</pre><pre>def efficient_frontier(returns,rate=0.015):
#creating a list to hold our portfolio returns, variance and Sharpe values
portfolio_returns=[]
portfolio_volatility=[]
p_sharpes=[]
# returns=returns_df

for i in range(500):
#assigning weights
weights=np.random.random(len(returns.columns))
weights/=np.sum(weights)
#getting returns
current_return=np.sum(returns.mean()*weights)*252
portfolio_returns.append(current_return)
#getting variances
variance=np.dot(weights.T,np.dot(returns.cov()*252,weights))
#getting volatility
volatility=np.sqrt(variance)
portfolio_volatility.append(volatility)
#getting Sharpe ratios
ratio=(current_return-rate)/volatility
#storing Sharpe in list
p_sharpes.append(ratio)

p_returns=np.array(portfolio_returns)
p_volatility=np.array(portfolio_volatility)
p_sharpes=np.array(p_sharpes)
#plotting
plt.figure(figsize=(10,6))
plt.scatter(p_volatility,p_returns,c=p_sharpes, marker='o')
plt.xlabel('Expected Volatility')
plt.ylabel('Expected Return')
plt.title('Efficient Frontier')
plt.colorbar(label='Sharpe Ratio')
plt.show()

return</pre><pre>efficient_frontier(returns.fillna(0))</pre><p><img alt="g5" class="aligncenter img-responsive size-full wp-image-13920" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/g5.png" src="./Optimal Portfolio Construction Using Machine Learning_files/g5.png" style="height:423px; width:639px"></p><pre>def stats(weights,rate=0.015):
weights=np.array(weights)
p_returns=np.sum(returns.mean()*weights)*252
p_volatility=np.sqrt(np.dot(weights.T,np.dot(returns.cov()*252,weights)))
p_sharpe=(p_returns-rate)/p_volatility

return np.array([p_returns,p_volatility,p_sharpe])</pre><pre>#testing stats method
stats(weights)</pre><pre>array([ 0.0325289 , 0.08669494, 0.20219057])</pre><pre>#creating function for optimization
def minimize_func(weights):
return -stats(weights)[2]</pre><pre>#testing optimization function
minimize_func(weights)</pre><pre>-0.20219056844039546</pre><pre>def get_optimal_weights(weights):
#Finding Most Optimal Weights
#variables for optimization
constraints=({'type':'eq','fun':lambda x: np.sum(x)-1})
bounds=tuple((0,1) for x in range(len(returns.columns)))

starting_weights=len(returns.columns)*[1./len(returns.columns)]
most_optimal=sco.minimize(minimize_func,starting_weights, method='SLSQP', bounds=bounds, constraints=constraints)
best_weights=most_optimal['x'].round(3)

return best_weights, print('Weights:',best_weights)</pre><pre>#storing optimal weights in a variable
optimal_weights=get_optimal_weights(weights)</pre><pre>Weights: [ 0.022 0. 0.978]</pre><p>Okay. We can see that the most optimal weights are to allocate 2% of our capital to ADBE_ANTM, 0% to ANTM_AET and 97.8% to AET_ANTM.<br><br>Recall that our method was designed to optimize our Sharpe ratio. We can now implement another instance of our strategies using these weights and create our portfolio and compute its equity curve.<br><br>Let's create our second instance of the ADBE_ANTM pair.<br><br>We'll create a total_allocation variable that we can use to compute our allocation to our strategies.</p><pre>#total allocation variable
total_allocation=90000 #100k less 10k cash
#ADBE_ANTM Allocation
adbe_antm_allocation=round(total_allocation*optimal_weights[0][0],2)
#AET_ANTM Allocation
aet_antm_allocation=round(total_allocation*optimal_weights[0][2],2)</pre><pre>#creating 2nd instance of first pair
adbe_antm_2=statarb(adbe_test_price_series,antm_test_price_series,17,-2,2,17,adbe_test.iloc[0],adbe_test.iloc[-1])
adbe_antm_2.create_spread()
adbe_antm_2.generate_signals()
#notice here we're using our updated allocation
adbe_antm_2.create_returns(adbe_antm_allocation,'ADBE_ANTM_Portfolio _2')</pre><p><img alt="g6" class="aligncenter img-responsive size-full wp-image-13921" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/g6.png" src="./Optimal Portfolio Construction Using Machine Learning_files/g6.png" style="height:312px; width:439px"><br>Recall that our second pair received a 0% allocation. We will thus create our 3rd pair with the updated weight and create our new portfolio.</p><pre>#AET_ANTM 2nd implementation
aet_antm_2=statarb(aet_test_price_series,antm_test_price_series,12,-2,2,12,aet_test.iloc[0],aet_test.iloc[-1])
aet_antm_2.create_spread()
aet_antm_2.generate_signals()
aet_antm_2.create_returns(aet_antm_allocation,'AET &amp; ANTM')</pre><p><img alt="g7" class="aligncenter img-responsive size-full wp-image-13922" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/g7.png" src="./Optimal Portfolio Construction Using Machine Learning_files/g7.png" style="height:310px; width:447px"><br>We are now ready to compose our <strong>Efficient Frontier Portfolio</strong>. &nbsp;</p><h3><strong>Creating the Efficient Frontier Portfolio</strong></h3><p>Let's create our Efficient Frontier Portfolio.</p><pre>#creating dataframe for Efficient Frontier Portfolio
efficient_frontier_portfolio=pd.DataFrame()
efficient_frontier_portfolio['ADBE_ANTM']=adbe_antm_2.portfolio['Portfolio Value']
efficient_frontier_portfolio['AET_ANTM']=aet_antm_2.portfolio['Portfolio Value']
efficient_frontier_portfolio['Cash']=10000
efficient_frontier_portfolio['Total Portfolio Value']=efficient_frontier_portfolio['ADBE_ANTM']+efficient_frontier_portfolio['AET_ANTM']+efficient_frontier_portfolio['Cash']</pre><p>We can now add our returns column to our Efficient Frontier Dataframe.</p><pre>#adding returns column to Efficient Frontier Dataframe
efficient_frontier_portfolio['Returns']=np.log(efficient_frontier_portfolio['Total Portfolio Value']/efficient_frontier_portfolio['Total Portfolio Value'].shift(1))</pre><p>We can now check our Efficient Frontier Portfolio Dataframe.</p><pre>#checking head of Efficient Frontier Portfolio dataframe
efficient_frontier_portfolio.head()
</pre><table border="1" class="dataframe"><thead><tr><th><br></th><th>ADBE_ANTM</th><th>AET_ANTM</th><th>Cash</th><th>Total Portfolio Value</th><th>Returns</th></tr></thead><tbody><tr><th>0</th><td>1980.0</td><td>88020.0</td><td>10000</td><td>100000.0</td><td>NaN</td></tr><tr><th>1</th><td>1980.0</td><td>88020.0</td><td>10000</td><td>100000.0</td><td>0.0</td></tr><tr><th>2</th><td>1980.0</td><td>88020.0</td><td>10000</td><td>100000.0</td><td>0.0</td></tr><tr><th>3</th><td>1980.0</td><td>88020.0</td><td>10000</td><td>100000.0</td><td>0.0</td></tr><tr><th>4</th><td>1980.0</td><td>88020.0</td><td>10000</td><td>100000.0</td><td>0.0</td></tr></tbody></table><p>We'll now plot the equity curve for our Efficient Frontier Portfolio.</p><pre>#plotting Equity Curve for Efficient Frontier Portfolio
plt.figure(figsize=(10,6))
plt.plot(efficient_frontier_portfolio['Total Portfolio Value'])
plt.title('Efficient Frontier Portfolio Equity Curve')
plt.show()</pre><p><img alt="g8" class="aligncenter img-responsive size-full wp-image-13923" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/g8.png" src="./Optimal Portfolio Construction Using Machine Learning_files/g8.png" style="height:406px; width:676px"><br>We can now store our Mu, Sigma, and Sharpe for our Efficient Frontier Portfolio in variables.</p><pre>efficient_frontier_portfolio_mu=efficient_frontier_portfolio['Returns'].mean()
efficient_frontier_portfolio_sigma=efficient_frontier_portfolio['Returns'].std()
#recall that we initialized our interest assumption earlier
efficient_frontier_portfolio_sharpe=(efficient_frontier_portfolio_mu-rate)/efficient_frontier_portfolio_sigma</pre><p>Okay. We've just finished our second portfolio. Two down and two to go.<br><br>We can now begin constructing our <strong>Bottom Up Optimization Portfolio</strong>.</p><h3><strong>Portfolio Construction: Bottom Up Optimization</strong></h3><p>The Bottom Up Portfolio applies machine learning to the composition of the equally weighted portfolio.<br><br>This means that we will use equal weights but instead of optimizing using the Efficient Frontier, we will use bottom-up optimization.</p><blockquote><ul><li><em>The idea is to have our GMM identify specific regimes or distributions.</em></li><li><em>We can then use our GMM's predictions as labels for our Random Forests.</em></li><li><em>Our signal generator will then trade based only when our strategy is within a regime in which it historically has not underperformed. </em></li></ul></blockquote><p>Recall that our assessment period is from 5/1/18 to 6/12/18. In our prior portfolios, we were able to create our portfolios using this period.<br><br>In this portfolio, however, we will be using machine learning. That means that we will need to create our models over the period beginning 1/4/18 and ending 4/30/18 and actually construct on portfolio using these models over our test period.<br><br><strong>Let's begin by creating our training period variables.</strong><br><br>Recall that we created a dataframe earlier called training_df that held our data over our training period.<br><br>We initially created this dataframe so that we could test for cointegration over our training period. We can now reuse it here.<br><br>Let's review our training_df dataframe.</p><pre>training_df.head()
</pre><table border="1" class="dataframe"><thead><tr><th><br></th><th>ADBE</th><th>AET</th><th>AIG</th><th>ANTM</th><th>AMAT</th></tr></thead><tbody><tr><th>0</th><td>183.13</td><td>183.45</td><td>60.36</td><td>229.62</td><td>54.67</td></tr><tr><th>1</th><td>182.89</td><td>183.68</td><td>60.61</td><td>229.63</td><td>54.51</td></tr><tr><th>2</th><td>183.22</td><td>183.80</td><td>60.77</td><td>229.70</td><td>54.25</td></tr><tr><th>3</th><td>183.73</td><td>183.82</td><td>60.81</td><td>229.65</td><td>54.08</td></tr><tr><th>4</th><td>183.90</td><td>183.93</td><td>60.80</td><td>229.70</td><td>54.27</td></tr></tbody></table><p>We have the prices of our symbols from 1/4/18 to 4/30/18. No pair containing AMAT was found to be cointegrated at least 90% confidence interval so we won't be using it.<br><br>We can now recreate our equally weighted strategy implementations using our training period data.<br><br>Once we have the returns for our implementations we can then engineer some features to use in training our Gaussian Mixture Model. We will then use these predictions as labels for our Random Forests.<br><br>Once we've trained our Random Forests to predict the regimes found by our Gaussian Mixture Model, we can then use those predictions to augment our signal generator, avoiding troublesome regimes.<br><br>Let's begin creating our strategy implementations. &nbsp;</p><h4><strong>Step 1: Feature Engineering</strong></h4><p>We are now ready to engineer our features. In order to predict what regime our strategy is in based on its historical performance, we will need features or explanatory variables.<br><br>Market-Microstructure encompasses a vast array of components including liquidity, volatility, market depth, etc. For this illustration, we will use volatility.<br><br>We will track the volatility of each of our underlying components, our spread, and our z-score.<br><br>These features will be used within our Random Forests to predict the regimes identified by our Gaussian Mixture Model. &nbsp;</p><h4><strong>Step 2: Creating Strategies Over Historical Period</strong></h4><p>We'll begin with our first pair, ADBE_ANTM. Before we begin our implementation we need to split our historical period.<br><br>Recall that we imported intraday data from 1/4/18 to 6/12/18. Our assessment period or the period in which we are comparing our Sharpe ratios is from 5/1/18 to 6/12/18. In our first two portfolios, we simply applied our strategies to our assessment period.<br><br>However, in our later two portfolios, we need to first apply it to our historical period to train our models then apply it to our assessment period.<br><br>To assess our models before applying them to our true testing or assessment period we need to split our historical period into a historical training and testing set.<br><br>This will enable us to train our models on part of our total training data and then test it on our historical testing data. We can then apply them to our overall testing or assessment period.<br><br>For simplicity, we'll manually calculate an 80/20 train_test_split.</p><pre>#checking length of training_df
len(training_df)</pre><pre>6240</pre><pre>#computing 80% of training_df length
len(training_df)*.80</pre><pre>4992.0</pre><pre>#computing 20% of training_df length
len(training_df)*-.20</pre><pre>-1248.0</pre><p>Okay now that we have the index values that represent the 80% and 20% marks of our training_df dataframe, we can use them to slice our data.<br><br>The way that we can do this is for our 80%, or the first 4992 rows we can simply use the notation [0:4992]. For our testing period over our historical training period, we can parse the last 20% by using the notation [-1248].<br><br>These notations will be used to split the returns we generate over our entire historical period.<br><br>Let's create our ADBE_ANTM implementation.</p><pre>adbe_antm_3_historical=statarb(training_df['ADBE'],training_df['ANTM'],17,-2,2,17,adbe_test.iloc[0],adbe_test.iloc[-1])
adbe_antm_3_historical.create_spread()
adbe_antm_3_historical.generate_signals()
#notice that we are equally weighing our strategy
adbe_antm_3_historical.create_returns(30000,'ADBE_ANTM_3 Over Training Period')</pre><p><img alt="g9" class="aligncenter img-responsive size-full wp-image-13924" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/g9.png" src="./Optimal Portfolio Construction Using Machine Learning_files/g9.png" style="height:313px; width:446px"><br>Okay now that we've created our strategy, let's check our returns.</p><pre>adbe_antm_3_historical_rets=adbe_antm_3_historical.portfolio['Returns']</pre><pre>#checking head of returns
adbe_antm_3_historical_rets.head()</pre><pre>0 1.0
1 1.0
2 1.0
3 1.0
4 1.0
Name: Returns, dtype: float64</pre><p>We will now repeat this process for our remaining pairs.</p><pre>#ANTM_AET Bottom Up Historical Implementation
antm_aet_3_historical=statarb(training_df['ANTM'],training_df['AET'],6,-2,2,6,antm_test.iloc[0],antm_test.iloc[-1])
antm_aet_3_historical.create_spread()
antm_aet_3_historical.generate_signals()
antm_aet_3_historical.create_returns(30000,'ANTM &amp; AET_3 Over Hist. Train Period')</pre><p><img alt="g10" class="aligncenter img-responsive size-full wp-image-13925" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/g10.png" src="./Optimal Portfolio Construction Using Machine Learning_files/g10.png" style="height:310px; width:445px"><br>Let's store our returns from the ANTM_AET training period in a variable</p><pre>antm_aet_3_historical_rets=antm_aet_3_historical.portfolio['Returns']</pre><p>Okay, now we finish up with our AET_ANTM pair.</p><pre>aet_antm_3_historical=statarb(training_df['AET'],training_df['ANTM'],12,-2,2,12,aet_test.iloc[0],aet_test.iloc[-1])
aet_antm_3_historical.create_spread()
aet_antm_3_historical.generate_signals()
aet_antm_3_historical.create_returns(30000,'AET &amp; ANTM')</pre><p><img alt="g11" class="aligncenter img-responsive size-full wp-image-13926" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/g11.png" src="./Optimal Portfolio Construction Using Machine Learning_files/g11.png" style="height:310px; width:445px"><br>Let's store our AET_ANTM returns in a variable.</p><pre>aet_antm_3_historical_rets=aet_antm_3_historical.portfolio['Returns']</pre><pre>#checking AET_ANTM returns over the training period
aet_antm_3_historical_rets.head()</pre><pre>0 1.0
1 1.0
2 1.0
3 1.0
4 1.0
Name: Returns, dtype: float64
</pre><h4><strong>Step 3: Using Gaussian Mixture Model to Identify Historical Regimes</strong></h4><p>We now have the returns of our StatArb strategies over our historical period.<br><br>Our next task is to identify our historical regimes. Our goal is to identify the regimes in which our stratetgies have not performed well on a risk to reward basis and avoid these periods.<br><br>To achieve this, we must:</p><ol style="margin-left: 40px;"><li>identify our historical regimes and</li><li>engineer features that can be used to predict these regimes.</li></ol><p>We can then augment our signal generator and thus optimize our portfolio from the microstructure level up.<br><br>We'll begin by splitting our returns data into an 80/20 train test split.</p><pre>#splitting historical returns data
#ADBE_ANTM
#getting length of returns data
adbe_antm_3_rets_len=len(adbe_antm_3_historical_rets)
adbe_antm_3_rets_train=adbe_antm_3_historical_rets[0:4992]
adbe_antm_3_rets_test=adbe_antm_3_historical_rets[-1248:]
#ANTM_AET
#getting length of returns data
antm_aet_3_rets_len=len(antm_aet_3_historical_rets)
antm_aet_3_rets_train=antm_aet_3_historical_rets[0:4992]
antm_aet_3_rets_test=antm_aet_3_historical_rets[-1248:]
#AET_ANTM
#getting length of returns data
aet_antm_3_rets_len=len(aet_antm_3_historical_rets)
aet_antm_3_rets_train=aet_antm_3_historical_rets[0:4992]
aet_antm_3_rets_test=aet_antm_3_historical_rets[-1248:]</pre><p>Now that we have created our train and test splits we're ready to identify our regimes. We'll start by training our GMM on our training period data, then we'll apply it to our testing period data.<br><br><strong>We'll create a method that we can use for our GMM and Random Forests.</strong></p><pre>class gmm_randomForests(object):
def __init__(self,historical_rets_train,historical_rets_test,base_portfolio_rets,gmm_components,df,base_portfolio_df,
internal_test_start,internal_test_end):

'''
PARAMETERS
##########
The first 3 parameters should have already been sliced from the
entire sample; ie specific dates parsed from dataframe that contains
trade history, returns, and features; other features will be added
later in development within the object

historical_rets_train- the returns data over the historical period used to train on
this is the internal train of the internal 80/20 split;the 80%
of the total historical training set

historical_rets_test- retuns data for 20% of internal training test set

base_portfolio_rets - this is our figurative live data;ie returns; 5/01/18-6/12/18 from either
Equally Weighted or Efficient Frontier Portfolios dependent upon implementation
of Bottom Up or Stereoscopic Portfolio Optimization (SPO) Framework

ex. data over 01/04/18-04/30/18
we would first split this 80/20
the 80% is our training set
the 20% is our testing set

we would then do another split on our training set created above
this is so that if we can better understand the historical
regimes and recalibrate our models if necessary before actually
predicting our 5/1/18-6/12/18 testing set

in this ex. our gmm_training_train is 80% of the period 01/04/18-4/30/18
our gmm_training_test is 20% of the period 01/04/18-4/30/18 and our
gmm_test_actual is 05/01/18-6/12/18

gmm_components - type:int; for number of components for GMM

df - the entire dataframe containing prior trading history; the dataframe from either Equally Weighted or
Efficient Frontier Portfolios; Our Random Forests Implementation will take this dataframe created by
our statarb class(i.e. from the prior portfolios) and add our features to it. It will then use these
features to predict the regimes of our test period. Recall that our Equally Weighted and Efficient
Frontier Portfolios were constructed over our assessment period of 5/1/18 to 6/12/18. We will then
be able to store our predictions in a varible for our test period. These predictions will be passed
into a new statarb object as a parameter and be used to create the Bottom Up and SPO Framework Portfolios.

total_training_start- type: string; the beginning of the historical period for analysis; input as string
from example above would be 2012

total_training_end - type:string; the end of the historical period for analysis; input as string;
from example above would be 2017

base_portfolio_df - (i.e.adbe_antm.df,etc)Note: for the Bottom Up Implementation this df would be the Equally Weighted df but for the
SPO Framework df this would be the df from the Efficient Frontier implementation

internal_test_start- type:int; this is the testing period for the total training period; in the example,
this is the assessment period of 05/01/18-06/12/18; start thus is len(strategy_object)*.80

internal_test_end - type:int; this is the end of the assessment period; ie. the 20% testing split
of the broader split...this value is -len(strategy_object)*.20...Note this value is
is negative because we want the last 20% of the data

The last two methods are created as such because our Equally Weighted and Efficient Frontier
Portfolios are not indexed by dates but are indexed by a sequence of ints. This means
that in a later method(i.e. Random Forests) we have to pass in the int value of the index
position we want to parse
'''
self.historical_rets_train=historical_rets_train
self.historical_rets_test=historical_rets_test
self.base_portfolio_rets=base_portfolio_rets
self.gmm_components=gmm_components
self.max_iter=300
self.random_state=101
self.df=df
#self.total_training_start=total_training_start
#self.total_training_end=total_training_end
self.base_portfolio_df=base_portfolio_df
self.internal_test_start=internal_test_start
self.internal_test_end=internal_test_end
#creating volatility
self.volatility=self.historical_rets_train.rolling(window=5).std()
self.negative_volatility=np.where(self.historical_rets_train&lt;0,self.historical_rets_train.rolling(window=5).std(),0)

def make_gmm(self):
model_kwds=dict(n_components=self.gmm_components,max_iter=self.max_iter,n_init=100,random_state=self.random_state)

gmm=GM(**model_kwds)

return gmm

def analyze_historical_regimes(self):
#Creating a Gaussian Mixture Model
self.gmm=self.make_gmm()
#instantiating the XTrain as the gmm_training_train; (i.e. the 80% of total training period)
self.gmm_XTrain=np.array(self.historical_rets_train).reshape(-1,1)
#Fitting the GMM on the Training Set(note this is the internal training set within the broader training set)
self.gmm.fit(self.gmm_XTrain.astype(int))
#Making predictions on the historical period; ie. the gmm_training_train
self.gmm_historical_predictions=self.gmm.predict(self.gmm_XTrain.astype(int))
#Making Predictions on the gmm_training_test (i.e. the 20% of total training period;)
self.gmm_XTest=np.array(self.historical_rets_test).reshape(-1,1)
self.gmm_training_test_predictions=self.gmm.predict(self.gmm_XTest.astype(int))
#Fitting the Model on ACTUAL data we want to Predict Regimes For
self.gmm_Actual=np.array(self.base_portfolio_rets).reshape(-1,1)
self.base_portfolio_predictions=self.gmm.predict(self.gmm_Actual)

return

def historical_regime_returns_volatility(self,plotTitle):
self.plotTitle=plotTitle
data=pd.DataFrame({'Volatility':self.volatility,'Regime':self.gmm_historical_predictions,'Returns':self.historical_rets_train})

with plt.style.context(['classic','seaborn-paper']):
fig,ax=plt.subplots(figsize=(15,10),nrows=1, ncols=2)

left = 0.125 # the left side of the subplots of the figure
right = 0.9 # the right side of the subplots of the figure
bottom = .125 # the bottom of the subplots of the figure
top = 0.9 # the top of the subplots of the figure
wspace = .5 # the amount of width reserved for blank space between subplots
hspace = 1.1 # the amount of height reserved for white space between subplots
# function that adjusts subplots using the above paramters
plt.subplots_adjust(
left = left,
bottom = bottom,
right = right,
top = top,
wspace = wspace,
hspace = hspace
)
# The amount of space above titles
y_title_margin = 2

plt.suptitle(self.plotTitle, y = 1, fontsize=20)

plt.subplot(121)
sns.swarmplot(x='Regime',y='Volatility',data=data)#,ax=ax[0][0])
plt.title('Regime to Volatility')

plt.subplot(122)
sns.swarmplot(x='Regime',y='Returns',data=data)#, ax=ax[0][1])
plt.title('Regime to Returns')
plt.tight_layout()
plt.show()

return

def train_random_forests(self):
#adding Features to the DataFrame
#assumption is that this is the df
#over the entire period

'''CAN UNCOMMENT THE SELF.VIX CODE TO INCLUDE VIX IN ANALYSIS..NOTE CHANGES TO PANDAS_DATAREADER API'''
#getting vix to add as feature
#self.VIX=pdr.get_data_yahoo('^VIX',start=self.total_training_start,end=self.total_training_end)
#creating features
#self.df['VIX']=self.VIX['Close']
self.df['6 X Vol']=self.df['X'].rolling(window=6).std()
self.df['6 Y Vol']=self.df['Y'].rolling(window=6).std()
self.df['6 Spread Vol']=self.df['Spread'].rolling(window=6).std()
self.df['6 Z-Score Vol']=self.df['Z-Score'].rolling(window=6).std()

self.df['12 X Vol']=self.df['X'].rolling(window=12).std()
self.df['12 Y Vol']=self.df['Y'].rolling(window=12).std()
self.df['12 Spread Vol']=self.df['Spread'].rolling(window=12).std()
self.df['12 Z-Score Vol']=self.df['Z-Score'].rolling(window=12).std()

self.df['15 X Vol']=self.df['X'].rolling(window=15).std()
self.df['15 Y Vol']=self.df['Y'].rolling(window=15).std()
self.df['15 Spread Vol']=self.df['Spread'].rolling(window=15).std()
self.df['15 Z-Score Vol']=self.df['Z-Score'].rolling(window=15).std()
#adding features to our historical df
#self.base_portfolio_df['VIX']=self.VIX['Close']
self.base_portfolio_df['6 X Vol']=self.df['X'].rolling(window=6).std()
self.base_portfolio_df['6 Y Vol']=self.df['Y'].rolling(window=6).std()
self.base_portfolio_df['6 Spread Vol']=self.df['Spread'].rolling(window=6).std()
self.base_portfolio_df['6 Z-Score Vol']=self.df['Z-Score'].rolling(window=6).std()

self.base_portfolio_df['12 X Vol']=self.df['X'].rolling(window=12).std()
self.base_portfolio_df['12 Y Vol']=self.df['Y'].rolling(window=12).std()
self.base_portfolio_df['12 Spread Vol']=self.df['Spread'].rolling(window=12).std()
self.base_portfolio_df['12 Z-Score Vol']=self.df['Z-Score'].rolling(window=12).std()

self.base_portfolio_df['15 X Vol']=self.df['X'].rolling(window=15).std()
self.base_portfolio_df['15 Y Vol']=self.df['Y'].rolling(window=15).std()
self.base_portfolio_df['15 Spread Vol']=self.df['Spread'].rolling(window=15).std()
self.base_portfolio_df['15 Z-Score Vol']=self.df['Z-Score'].rolling(window=15).std()
#replacing na values
self.df.fillna(0, inplace=True)
#Creating X_Train for RF over the Historical Period; Will train
#over Historical period, ie. self.historical_training_start/end
#then predict
self.RF_X_TRAIN=self.df[0:4992][['6 X Vol','6 Y Vol','6 Spread Vol','6 Z-Score Vol','12 X Vol','12 Y Vol',
'12 Spread Vol','12 Z-Score Vol','15 X Vol','15 Y Vol','15 Spread Vol','15 Z-Score Vol']]
#dropping unnecessary columns from train data
#self.RF_X_TRAIN.drop(['X','Y','Longs','Shorts','Exit','Long_Market','Short_Market'],inplace=True,axis=1)
#setting Y_Train for the RF to the predictions of GMM over historical period
self.RF_Y_TRAIN=self.gmm_historical_predictions
#Creating X_Test for the RF; ie the gmm_training_test period
#our features for RF
#that haven't been seen by the model
self.RF_X_TEST=self.base_portfolio_df[['6 X Vol','6 Y Vol','6 Spread Vol','6 Z-Score Vol','12 X Vol','12 Y Vol',
'12 Spread Vol','12 Z-Score Vol','15 X Vol','15 Y Vol','15 Spread Vol','15 Z-Score Vol']]\
#dropping unnecessary columns from train data
#self.RF_X_TEST.drop(['X','Y','Longs','Shorts','Exit','Long_Market','Short_Market'],inplace=True,axis=1)
#predictions for the x test over the internal testing period
self.RF_Y_TEST=self.base_portfolio_predictions #regime predictions for base portfolio
#build the RandomForest and check precision
self.RF_MODEL=RF(n_estimators=100) #Recall imported RandomForestsClassifier as RF
#training the random forests model on assessment period data
self.RF_MODEL.fit(self.RF_X_TRAIN.fillna(0),self.RF_Y_TRAIN)
#Making predictions for base portfolio period
self.RF_BASE_PORTFOLIO_PREDICTIONS=self.RF_MODEL.predict(self.RF_X_TEST.fillna(0))
#Checking Precision of Predictions
#print(confusion_matrix(self.RF_Y_TEST,self.RF_BASE_PORTFOLIO_PREDICTIONS))
#print('\n')
#print(classification_report(self.RF_Y_TEST,self.RF_BASE_PORTFOLIO_PREDICTIONS))

return
</pre><p>Okay. Though I've heavily commented on the above object, I'd like to reiterate the most important inputs to our <strong>gmm_randomForests method</strong>.<br><br>The most critical parameters are:</p><ul style="margin-left: 40px;"><li>gmm_training_train,</li><li>gmm_training_test,</li><li>gmm_test_actual, and</li><li>df. gmm_training_train</li></ul><p>Elaborating:</p><ul style="margin-left: 40px;"><li>df. gmm_training_train is the 80% split of the historical period returns we created earlier.</li><li>gmm_training_test is the 20% slice of the historical period returns we created.</li><li>mm_test actual is are the returns from either our Equally Weighted or Efficient Frontier Portfolios.</li></ul><p>The Bottom Up Optimization builds on the Equally Weighted Portfolio in that though it offers an optimization technique, the allocations remain equally weighted.<br><br>This means that we can use the returns from our Equally Weighted Portfolio, predict the regimes, and create a new statarb object that uses the regimes (i.e. Bottom Up Optimization).<br>The same logic is true for our Efficient Frontier Portfolio.<br><br>The SPO Framework builds on the Efficient Frontier Portfolio. Thus when we design our SPO Framework Portfolio, we will get the regime predictions from our Efficient Frontier implementation.<br><br>We will then create a new statarb object that takes those regime predictions in as a parameter and use it to create our SPO Framework Portfolio.<br><br>An important thing to keep mind is that our GMM and Random Forests models are trained using our historical data. So when we provide the models with data from our Efficient Frontier and Equally Weighted Portfolios, it's data that our models have not seen.<br><br>This was the purpose of separating our data.<br><br><strong>ADBE_ANTM GMM Implementation</strong><br>We'll begin with our first pair. Let's initialize our method.</p><pre>#initializing GMM Random Forests method
#passing in the 1)returns for 80% of the training period(i.e.01/04/18-04/30/18),2)returns for 20% of the training period(i.e.01/04/18-04/30/18)
#3) Returns for actual or overall test period; (i.e. 05/01/18-06/12/18) for Equally Weighted, 4) count for GMMs,
#5)Dataframe for Equally Weighted, 6)
adbe_antm_gmm_rf=gmm_randomForests(adbe_antm_3_rets_train,adbe_antm_3_rets_test,adbe_antm.portfolio['Returns'],5,
adbe_antm_3_historical.df, adbe_antm.df,1871,-468)</pre><p>Now that we have initiated our object, let's use it to get the regimes of our adbe_antm pair. Note these are based on our historical data.</p><pre>#calling our analyze historical regimes method
adbe_antm_gmm_rf.analyze_historical_regimes()</pre><p>We can now plot our regimes using our historical_regime_returns_volatility method.</p><pre>#Note this method takes in a string to title our plot
adbe_antm_gmm_rf.historical_regime_returns_volatility('ADBE_ANTM GMM Analysis')</pre><p><img alt="g12" class="aligncenter img-responsive size-full wp-image-13927" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/g12.png" src="./Optimal Portfolio Construction Using Machine Learning_files/g12.png" style="height:740px; width:1094px"><br>From looking at the above plot, we can see that the regime most favourable for our strategy is Regime 1. This regime has the lowest relative volatility but also yields the highest return.<br><br>We will make a note of this and incorporate this into our updated statarb implementation.</p><blockquote><ul><li><em>One thing to note is that we created these regimes over our historical or training period.</em></li><li><em>Recall we performed an 80/20 split on our data.</em></li><li><em>This means that any one of these regimes could be the actual regime in which our observations fall in over the period 05/01/18 to 06/21/18.</em></li></ul></blockquote><p>In practice, the idea would be to look at a historical period(i.e. trailing 3 months) and apply the analysis to the current one month.<br><br>We would update and perform this analysis at the end of each month. Let's do the same for the remainder of our pairs.<br><br><strong>ANTM_AET GMM Implementation</strong></p><pre>#initializing object
antm_aet_gmm_rf=gmm_randomForests(antm_aet_3_rets_train,antm_aet_3_rets_test,antm_aet.portfolio['Returns'],5,antm_aet_3_historical.df, antm_aet.df,1871,-468)</pre><pre>#calling our analyze historical regimes method
antm_aet_gmm_rf.analyze_historical_regimes()</pre><pre>#plotting regime returns and volatility...Pass in String for Title of Plot
antm_aet_gmm_rf.historical_regime_returns_volatility('ANTM AET GMM Analysis')</pre><p><img alt="g13" class="aligncenter img-responsive size-full wp-image-13928" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/g13.png" src="./Optimal Portfolio Construction Using Machine Learning_files/g13.png" style="height:742px; width:1092px"><br>Okay, we can see that Regime 1 appears to offer the best risk/reward tradeoff for our ANTM_AET relationship.<br><br>Our returns remain positive throughout the relative volatility distribution but it's more desirable to get equivalent returns with less volatility.<br><br><strong>AET_ANTM GMM Implementation</strong></p><pre>#initializing object
aet_antm_gmm_rf=gmm_randomForests(aet_antm_3_rets_train,aet_antm_3_rets_test,aet_antm.portfolio['Returns'],5,aet_antm_3_historical.df, aet_antm.df,1871,-468)</pre><pre>#calling our analyze historical regimes method
aet_antm_gmm_rf.analyze_historical_regimes()</pre><pre>#plotting regime returns and volatility...Pass in String for Title of Plot
aet_antm_gmm_rf.historical_regime_returns_volatility('AET_ANTM GMM Analysis')</pre><p><img alt="g14" class="aligncenter img-responsive size-full wp-image-13929" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/g14.png" src="./Optimal Portfolio Construction Using Machine Learning_files/g14.png" style="height:740px; width:1092px"><br>We can see once again that despite the level of volatility, our returns are still positive. However, one thing that we can note from the above plots is that for the most part, the levels of volatility are similar between Regime 0 and Regime 1.<br><br>However, we do see some bursts in volatility within Regime 1 and a significant portion of our historical returns, though they were positive, were less than those of Regime 0, of which didn't display any significant bursts.<br><br>We won't make any changes to the implementation of this strategy in this illustration but the further analysis could be conducted to determine the sign of returns given those volatility bursts and the same could be used to augment the strategy.<br><br>Let's begin using our Random Forests to predict our regimes and update our StatArb strategy by using our regime predictions to answer the above question. &nbsp;</p><h4><strong>Step 4: Training Random Forests to Predict Regimes</strong></h4><p>Now that we have completed our regime analysis we can use our Random Forests to predict the regimes of our assessment period. Recall that we passed in the dataframe from our Equally Weighted Portfolio created by our adbe_antm object.<br><br>We can call our train_random_forests method on our gmm_rf objects to train our Random Forests using the features we selected. We can then create a variable to hold our predictions.<br><br>These predictions will then be passed into our new statarb object and used to generate our Bottom Up Portfolio.<br><br><strong>ADBE_ANTM Random Forests Implementation.</strong></p><pre>#calling the train_random_forests method on our adbe_antm_gmm_rf object
adbe_antm_gmm_rf.train_random_forests()</pre><pre>[[ 0 0]
[ 895 1444]]

             precision  recall  f1-score  support
          0     0.00     0.00     0.00         0
          1     1.00     0.62     0.76      2339
avg / total     1.00     0.62     0.76      2339</pre><p>Let's ensure that we understand what we've achieved thus far.</p><ul style="margin-left: 40px;"><li>Recall that we created variables to hold the returns of our training period 01/04/18 to 04/30/18.</li><li>We used the training_df dataframe to provide the historical data and applied our StatArb strategy to it.</li><li>We then split that training period returns, of which we stored in variables, into an 80% training and 20% testing subset</li><li>The period of 05/01/18 to 06/12/18 was our hypothetical live market data and is the period in which we created our Equally Weighted and Efficient Frontier Portfolios.</li><li>Our objective with the Bottom Up Portfolio was to build upon our Equally Weighted Portfolio by optimizing using the features we engineered to predict the regime that our strategy was in based on regimes seen historically.</li><li>To achieve this we needed to train our Gaussian Mixture Model using our training over the period 01/04/18 to 04/30/18 and use our GMM Model to predict the regimes from our 05/01/18 to 06/12/18 period.</li><li>We could then use our regimes from the 01/04/18 to 04/30/18 period as labels and the features that we engineered as parameters for our Random Forest training.</li><li>Once we trained our Random Forests we were then able to pass in our features from over the 05/01/18 to 06/12/18 period and use it to predict the regimes.</li><li>To test our accuracy we compared these results to the actual regimes created by our Gaussian Mixture Model over the 05/01/18 to 06/12/18 period.</li></ul><p>Our results showed that our Random Forests had perfect precision. This is because, over our hypothetical live trading period, our observations came from the same distribution, which can be seen from our classification report above.<br><br>We can now create a variable to store our regime predictions from our hypothetical live trading period (i.e. 05/01/18 to 06/12/18) and feed these into an updated statarb implementation and see how our results would change.<br><br>We will tell our updated statarb strategy which regimes to avoid using the chart we created earlier showing our returns and volatility levels per regime.<br><br>Not that we've gotten a better understanding of our process, in future implementations we'll comment out the confusion matrix and classification reports so that we won't actually know which regimes our data fell into over our hypothetical live trading period.<br><br>We'll solely rely upon our analysis of the volatility and returns characteristics of our regimes and feed this information into our strategy implementation.<br><br>Let's store our regime predictions for our ADBE_ANTM pair into a variable that we can use for our updated StatArb implementation.</p><pre>adbe_antm_regime_predictions=adbe_antm_gmm_rf.base_portfolio_predictions</pre><p><strong>ANTM_AET Random Forests Implementation</strong></p><pre>#calling the train_random_forests method on our antm_aet_gmm_rf object
antm_aet_gmm_rf.train_random_forests()</pre><p>Okay. Let's now store our regime predictions in a variable.</p><pre>antm_aet_regime_predictions=antm_aet_gmm_rf.base_portfolio_predictions</pre><p><strong>AET_ANTM Random Forests Implementation</strong></p><pre>#calling the train_random_forests method on our antm_aet_gmm_rf object
aet_antm_gmm_rf.train_random_forests()</pre><p>We'll now store our predictions in a variable.</p><pre>aet_antm_regime_predictions=aet_antm_gmm_rf.base_portfolio_predictions</pre><p>We can now use these regime predictions to create our updated strategies and compose our Bottom Up Portfolio.</p><h4><strong>Step 5: Using the Model's Predictions in Strategy Development</strong></h4><p>We'll begin by creating an updated version of our statarb class that will allow us to pass in our regime predictions.</p><pre>class statarb_update(object):
#np.seterr(divide='ignore',invalid='ignore')

def __init__(self,df1, df2, ptype,ma,floor, ceiling,beta_lookback,start,end,regimePredictions,p2Objective,avoid1=0,target1=0,exit_zscore=0):
#setting the attributes of the data cleaning object
self.df1=df1 #the complete dataframe of X
self.df2=df2 # the comlete dataframe of Y
self.df=pd.DataFrame(index=df1.index) #creates a new dataframe in the create_spread method
self.ptype=ptype #the portfolio type 1= standard implementation 2=machine learning implementation
self.ma=ma# the moving average period for the model
self.floor=floor #the buy threshold for the z-score
self.ceiling=ceiling #the sell threshold for the z-score
self.Close='Close Long' #used as close signal for longs
self.Cover='Cover Short' #used as close signal for shorts
self.exit_zscore=exit_zscore #the z-score
self.beta_lookback=beta_lookback #the lookback of beta for hedge ratio
self.start=start #the beginning of test period as a string
self.end=end # the end of test period as a string
self.regimePredictions=regimePredictions.reshape(-1,1) #the regime predictions from GMM for p2=2 implementation
self.avoid1=avoid1 #the regime to avoid
self.target1=target1 #the regime to target
self.p2Objective=p2Objective #type:string;#the objective of p2 implementation; can be 'Avoid','Target',or 'None';
#create price spread
def create_spread(self):
if self.ptype==1:
#setting the new dataframe values for x and y of the closing
#prices of the two dataframes passed in
self.df['X']=self.df1[' Close']
self.df['Y']=self.df2[' Close']
#calculating the beta of the pairs
self.ols=linregress(self.df['Y'],self.df['X'])
#setting the hedge ratio
self.df['Hedge Ratio']=self.ols[0]

self.df['Spread']=self.df['Y']-(self.df['Hedge Ratio']*self.df['X'])

if self.ptype==2:
#setting the new dataframe values for x and y of the closing
#prices of the two dataframes passed in
self.df['X']=self.df1[' Close']
self.df['Y']=self.df2[' Close']
#calculating the beta of the pairs
self.ols=linregress(self.df['Y'],self.df['X'])
#setting the hedge ratio
self.df['Hedge Ratio']=self.ols[0]
#creating spread
self.df['Spread']=self.df['Y']-(self.df['Hedge Ratio']*self.df['X'])
#creating the z-score
self.df['Z-Score']=(self.df['Spread']-self.df['Spread'].rolling(window=self.ma).mean())/self.df['Spread'].rolling(window=self.ma).std()
#Creating the features columns
self.df['6 X Vol']=self.df['X'].rolling(window=6).std()
self.df['6 Y Vol']=self.df['Y'].rolling(window=6).std()
self.df['6 Spread Vol']=self.df['Spread'].rolling(window=6).std()
self.df['6 Z-Score Vol']=self.df['Z-Score'].rolling(window=6).std()

self.df['12 X Vol']=self.df['X'].rolling(window=12).std()
self.df['12 Y Vol']=self.df['Y'].rolling(window=12).std()
self.df['12 Spread Vol']=self.df['Spread'].rolling(window=12).std()
self.df['12 Z-Score Vol']=self.df['Z-Score'].rolling(window=12).std()

self.df['15 X Vol']=self.df['X'].rolling(window=15).std()
self.df['15 Y Vol']=self.df['Y'].rolling(window=15).std()
self.df['15 Spread Vol']=self.df['Spread'].rolling(window=15).std()
self.df['15 Z-Score Vol']=self.df['Z-Score'].rolling(window=15).std()
#Creating the Regime Prediction Column
self.df['Regime']=0
self.df['Regime']=self.regimePredictions.astype(int)

return

def generate_signals(self):
if self.ptype==1:
#creating the z-score
self.df['Z-Score']=(self.df['Spread']-self.df['Spread'].rolling(window=self.ma).mean())/self.df['Spread'].rolling(window=self.ma).std()
#prior z-score
self.df['Prior Z-Score']=self.df['Z-Score'].shift(1)
#Creating Buy and Sell Signals; when to be long, short, exit
#self.df['Signal']=np.where(self.df['Z-Score']&lt;=self.floor,'BUY', np.where(self.df['Z-Score']&gt;=self.ceiling,'SELL','FLAT'))
#self.df['Prior Signal']=self.df['Signal'].shift(1)

self.df['Longs']=(self.df['Z-Score']&lt;=self.floor)*1.0 #buy the spread self.df['Shorts']=(self.df['Z-Score']&gt;=self.ceiling)*1.0 #short the spread
self.df['Exit']=(self.df['Z-Score']&lt;=self.exit_zscore)*1.0
#tracking positions via for loop implementation
self.df['Long_Market']=0.0
self.df['Short_Market']=0.0
#Setting Variables to track whether or not to be long while iterating over df
self.long_market=0
self.short_market=0
#Determining when to trade
for i,value in enumerate(self.df.iterrows()):
#Calculate logns
if value[1]['Longs']==1.0:
self.long_market=1

if value[1]['Shorts']==1.0:
self.short_market=1

if value[1]['Exit']==1.0:

self.long_market=0
self.short_market=0

self.df.iloc[i]['Long_Market']=self.long_market
self.df.iloc[i]['Short_Market']=self.short_market

if self.ptype==2:

self.df['Longs']=(self.df['Z-Score']&lt;=self.floor)*1.0 #buy the spread
self.df['Shorts']=(self.df['Z-Score']&gt;=self.ceiling)*1.0 #short the spread
self.df['Exit']=(self.df['Z-Score']&lt;=self.exit_zscore)*1.0
#tracking positions via for loop implementation
self.df['Long_Market']=0.0
self.df['Short_Market']=0.0
#Setting Variables to track whether or not to be long while iterating over df
self.long_market=0
self.short_market=0
#Determining when to trade
for i,value in enumerate(self.df.iterrows()):
if self.p2Objective=='Avoid':
if value[1]['Regime']!= self.avoid1:
#Calculate longs
if value[1]['Longs']==1.0:
self.long_market=1
if value[1]['Shorts']==1.0:
self.short_market=1
if value[1]['Exit']==1.0:
self.long_market=0
self.short_market=0
self.df.iloc[i]['Long_Market']=value[1]['Longs']#self.long_market
self.df.iloc[i]['Short_Market']=value[1]['Shorts']#self.short_market

elif self.p2Objective=='Target':
if value[1]['Regime']==self.target1:
#Calculate longs
if value[1]['Longs']==1.0:
self.long_market=1
if value[1]['Shorts']==1.0:
self.short_market=1
if value[1]['Exit']==1.0:
self.long_market=0
self.short_market=0
self.df.iloc[i]['Long_Market']=value[1]['Longs']#self.long_market
self.df.iloc[i]['Short_Market']=value[1]['Shorts']#self.short_market

elif self.p2Objective=='None':
#Calculate longs
if value[1]['Longs']==1.0:
self.long_market=1
#Calculate Shorts
if value[1]['Shorts']==1.0:
self.short_market=1

if value[1]['Exit']==1.0:

self.long_market=0
self.short_market=0

self.df.iloc[i]['Long_Market']=value[1]['Longs']#self.long_market
self.df.iloc[i]['Short_Market']=value[1]['Shorts']#self.short_market

return self.df

def create_returns(self, allocation,pair_number):
if self.ptype==1:

'''
PARAMETERS
##########
allocation - the amount of capital alotted for pair
pair_number - string to annotate the plots
'''
self.allocation=allocation
self.pair=pair_number
self.portfolio=pd.DataFrame(index=self.df.index)
self.portfolio['Positions']=self.df['Long_Market']-self.df['Short_Market']
self.portfolio['X']=-1.0*self.df['X']*self.portfolio['Positions']
self.portfolio['Y']=self.df['Y']*self.portfolio['Positions']
self.portfolio['Total']=self.portfolio['X']+self.portfolio['Y']
#creating a percentage return stream
self.portfolio['Returns']=self.portfolio['Total'].pct_change()
self.portfolio['Returns'].fillna(0.0,inplace=True)
self.portfolio['Returns'].replace([np.inf,-np.inf],0.0,inplace=True)
self.portfolio['Returns'].replace(-1.0,0.0,inplace=True)
#calculating metrics
self.mu=(self.portfolio['Returns'].mean())
self.sigma=(self.portfolio['Returns'].std())
self.portfolio['Win']=np.where(self.portfolio['Returns']&gt;0,1,0)
self.portfolio['Loss']=np.where(self.portfolio['Returns']&lt;0,1,0)
self.wins=self.portfolio['Win'].sum()
self.losses=self.portfolio['Loss'].sum()
self.total_trades=self.wins+self.losses
#calculating sharpe ratio with interest rate of
#interest_rate_assumption=0.75
#self.sharp=(self.mu-interest_rate_assumption)/self.sigma
#win loss ratio;
self.win_loss_ratio=(self.wins/self.losses)
#probability of win
self.prob_of_win=(self.wins/self.total_trades)
#probability of loss
self.prob_of_loss=(self.losses/self.total_trades)
#average return of wins
self.avg_win_return=(self.portfolio['Returns']&gt;0).mean()
#average returns of losses
self.avg_loss_return=(self.portfolio['Returns']&lt;0).mean()
#calculating payout ratio
self.payout_ratio=(self.avg_win_return/self.avg_loss_return)
#calculate equity curve
self.portfolio['Returns']=(self.portfolio['Returns']+1.0).cumprod()
self.portfolio['Trade Returns']=(self.portfolio['Total'].pct_change()) #non cumulative Returns
self.portfolio['Portfolio Value']=(self.allocation*self.portfolio['Returns'])
self.portfolio['Portfolio Returns']=self.portfolio['Portfolio Value'].pct_change()
self.portfolio['Initial Value']=self.allocation

with plt.style.context(['ggplot','seaborn-paper']):
#Plotting Portfolio Value
plt.plot(self.portfolio['Portfolio Value'])
plt.plot(self.portfolio['Initial Value'])
plt.title('%s Strategy Returns '%(self.pair))
plt.legend(loc=0)
plt.show()


if self.ptype==2:
'''
PARAMETERS
##########
allocation - the amount of capital alotted for pair
pair_number - string to annotate the plots
'''
self.allocation=allocation
self.pair=pair_number

self.portfolio=pd.DataFrame(index=self.df.index)
self.portfolio['Positions']=self.df['Longs']-self.df['Shorts']
self.portfolio['X']=-1.0*self.df['X']*self.portfolio['Positions']
self.portfolio['Y']=self.df['Y']*self.portfolio['Positions']
self.portfolio['Total']=self.portfolio['X']+self.portfolio['Y']

self.portfolio.fillna(0.0,inplace=True)
#creating a percentage return stream
self.portfolio['Returns']=self.portfolio['Total'].pct_change()
self.portfolio['Returns'].fillna(0.0,inplace=True)
self.portfolio['Returns'].replace([np.inf,-np.inf],0.0,inplace=True)
self.portfolio['Returns'].replace(-1.0,0.0,inplace=True)
#calculating metrics
self.mu=(self.portfolio['Returns'].mean())
self.sigma=(self.portfolio['Returns'].std())
self.portfolio['Win']=np.where(self.portfolio['Returns']&gt;0,1,0)
self.portfolio['Loss']=np.where(self.portfolio['Returns']&lt;0,1,0)
self.wins=self.portfolio['Win'].sum()
self.losses=self.portfolio['Loss'].sum()
self.total_trades=self.wins+self.losses
#calculating sharpe ratio with interest rate of
#interest_rate_assumption=0.75
#self.sharp=(self.mu-interest_rate_assumption)/self.sigma
#win loss ratio;
self.win_loss_ratio=(self.wins/self.losses)
#probability of win
self.prob_of_win=(self.wins/self.total_trades)
#probability of loss
self.prob_of_loss=(self.losses/self.total_trades)
#average return of wins
self.avg_win_return=(self.portfolio['Returns']&gt;0).mean()
#average returns of losses
self.avg_loss_return=(self.portfolio['Returns']&lt;0).mean()
#calculating payout ratio
self.payout_ratio=(self.avg_win_return/self.avg_loss_return)

            #calculate equity curve
            self.portfolio['Returns']=(self.portfolio['Returns']+1.0).cumprod()
            self.portfolio['Trade Returns']=(self.portfolio['Total'].pct_change()) #non cumulative Returns
            self.portfolio['Portfolio Value']=(self.allocation*self.portfolio['Returns'])
            self.portfolio['Portfolio Returns']=self.portfolio['Portfolio Value'].pct_change()
            self.portfolio['Initial Value']=self.allocation

            with plt.style.context(['ggplot','seaborn-paper']):
                #Plotting Portfolio Value   
                plt.plot(self.portfolio['Portfolio Value'])
                plt.plot(self.portfolio['Initial Value'])
                plt.title('%s Strategy Returns '%(self.pair))
                plt.legend(loc=0)
                plt.show()

        return #self.portfolio['Portfolio Value'].plot()</pre><p>Let's now use our updated statarb class to create our strategies.<br><br><strong style="background-color: rgb(255, 255, 255); color: rgb(73, 73, 73); letter-spacing: 0.3px;">ADBE_ANTM</strong><span style="background-color: rgb(255, 255, 255); color: rgb(73, 73, 73); letter-spacing: 0.3px;"> </span><strong style="background-color: rgb(255, 255, 255); color: rgb(73, 73, 73); letter-spacing: 0.3px;">Bottom-Up Implementation</strong></p><pre>#creating instance of updated statarb strategy
adbe_antm_bottom_up=statarb_update(adbe_test, antm_test, 2,17,-2, 2,17,'05/01/18','06/12/18',adbe_antm_regime_predictions,'Target',avoid1=0,target1=1,exit_zscore=0)</pre><p>In the above code block, we pass in our standard parameters with the exception of new fields, namely a 'Target', target1, avoid1, and regime predictions.<br><br>The Target parameter is our selection for our p2objective. It simply means that we are seeking to target a specific regime. If we set this parameter to 'Avoid', we would simply initialize the avoid1 parameter as the regime we wanted to avoid.<br><br>Given that we set this parameter to 'Target', we simply initialize the target 1 parameter to the regime we would like to target. Recall that we identified our historical regimes and trained our Random Forests to predict these regimes using the features we engineered.<br><br>We later applied our Random Forests model to our testing period and stored the regime predictions in a variable. We now pass those predictions in here and use them to update our signal generator based on our analysis of our historical regime.<br><br>Let's finish this implementation bny calling our remaining methods on our object.</p><pre>#creating spread
adbe_antm_bottom_up.create_spread()
#generating signals
adbe_antm_bottom_up.generate_signals()
#getting performance
#notice that we are passing in our equal weight amount here
adbe_antm_bottom_up.create_returns(30000,'ADBE_ANTM Bottom Up')</pre><p><img alt="g15" class="aligncenter img-responsive size-full wp-image-13931" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/g15.png" src="./Optimal Portfolio Construction Using Machine Learning_files/g15.png" style="height:304px; width:450px"><br><strong>ANTM_AET Bottom Up Implementation</strong></p><pre>#creating instance of updated statarb strategy
antm_aet_bottom_up=statarb_update(antm_test, aet_test, 2,6,-2, 2,6,'05/01/18','06/12/18',antm_aet_regime_predictions,'Target',avoid1=0,target1=1,exit_zscore=0)</pre><pre>#creating spread
antm_aet_bottom_up.create_spread()
#generating signals
antm_aet_bottom_up.generate_signals()
#getting performance
#notice that we are passing in our equal weight amount here
antm_aet_bottom_up.create_returns(30000,'ANTM AET Bottom Up')</pre><p><img alt="g16" class="aligncenter img-responsive size-full wp-image-13932" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/g16.png" src="./Optimal Portfolio Construction Using Machine Learning_files/g16.png" style="height:278px; width:403px"><br>After using our analysis of the historical regimes that our strategy fell within and updating our statarb implementation to avoid Regime 0, we can see that our ANTM_AET implementation didn't trade over our test period.<br><br>This is an indication that observations fell within Regime 0 over this period.<br><br><strong>AET_ANTM Bottom Up Implementation</strong></p><pre>#creating instance of updated statarb strategy
aet_antm_bottom_up=statarb_update(aet_test, antm_test, 1,12,-2, 2,12,'05/01/18','06/12/18',aet_antm_regime_predictions,'Avoid',avoid1=1,target1=0,exit_zscore=0)</pre><blockquote><p><em>Note that in our AET_ANTM implementation we chose not to avoid or target any specific regime.</em></p></blockquote><p>Thus, in the third parameter, denoting portfolio type, we passed in 1 which is our original implementation.</p><pre>#creating spread
aet_antm_bottom_up.create_spread()
#generating signals
aet_antm_bottom_up.generate_signals()
#getting performance
#notice that we are passing in our equal weight amount here
aet_antm_bottom_up.create_returns(30000,'AET_ANTM Bottom Up')</pre><p><img alt="g17" class="aligncenter img-responsive size-full wp-image-13933" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/g17.png" src="./Optimal Portfolio Construction Using Machine Learning_files/g17.png" style="height:278px; width:403px"> &nbsp;</p><h4><strong>Step 6: Getting Performance Metrics</strong></h4><p>We can now aggregate our strategies to form our Bottom Up Portfolio and store our Sharpe Ratio in a variable for later use.</p><pre>#creating dataframe for Bottom Up Portfolio
bottom_up_portfolio=pd.DataFrame()
bottom_up_portfolio['ADBE_ANTM']=adbe_antm_bottom_up.portfolio['Portfolio Value']
bottom_up_portfolio['AET_ANTM']=aet_antm_bottom_up.portfolio['Portfolio Value']
bottom_up_portfolio['ANTM_AET']=antm_aet_bottom_up.portfolio['Portfolio Value']
bottom_up_portfolio['Cash']=10000
bottom_up_portfolio['Total Portfolio Value']=bottom_up_portfolio['ADBE_ANTM']+bottom_up_portfolio['ANTM_AET']+bottom_up_portfolio['AET_ANTM']+bottom_up_portfolio['Cash']</pre><p>We can now add a column to hold the returns of our Bottom Up Portfolio.</p><pre>#adding returns column to Bottom Up Dataframe
bottom_up_portfolio['Returns']=np.log(bottom_up_portfolio['Total Portfolio Value']/bottom_up_portfolio['Total Portfolio Value'].shift(1))</pre><p>Let's now plot the equity curve of our Bottom Up Portfolio.</p><pre>plt.figure(figsize=(10,6))
plt.plot(bottom_up_portfolio['Total Portfolio Value'])
plt.title('Bottom Up Portfolio')
plt.show()</pre><p><img alt="g18" class="aligncenter img-responsive size-full wp-image-13934" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/g18.png" src="./Optimal Portfolio Construction Using Machine Learning_files/g18.png" style="height:367px; width:609px"><br>Let's wrap up our Bottom Up Portfolio by creating and storing our Sharpe in a variable for later use.</p><pre>bottom_up_portfolio_mu=bottom_up_portfolio['Returns'].mean()
bottom_up_portfolio_sigma=bottom_up_portfolio['Returns'].std()
#recall that we initialized our interest assumption earlier
bottom_up_portfolio_sharpe=(bottom_up_portfolio_mu-rate)/bottom_up_portfolio_sigma
</pre><h3><strong>Portfolio Construction: SPO Framework</strong></h3><p>The SPO Framework combines the logic behind the Efficient Frontier, or top-down optimization, with that of the bottom up optimization portfolio.<br><br>Here we repeat the process used to create the bottom up portfolio except instead of equally weighing our strategies, we weight them according to the weights found when we created the Efficient Frontier.<br><br>Recall that our Efficient Frontier Analysis gave our ANTM_AET pair a weight of 0. This is congruent with what we saw when implementing our Bottom Up Portfolio.<br><br>Thus, we'll create our SPO Implementations on our ADBE_ANTM and AET_ANTM pairs using our Efficient Frontier Weights and regime predictions found during our Bottom Up implementation.<br><br><strong>ADBE_ANTM Stereoscopic Portfolio Optimization (SPO)&nbsp;Framework Implementation</strong></p><pre>#creating instance of updated statarb strategy
adbe_antm_spo=statarb_update(adbe_test, antm_test, 2,17,-2, 2,17,'05/01/18','06/12/18',adbe_antm_regime_predictions,'Target',avoid1=0,target1=1,exit_zscore=0)</pre><pre>#creating spread
adbe_antm_spo.create_spread()
#generating signals
adbe_antm_spo.generate_signals()
#getting performance
#notice that we are passing in our weight from our efficient frontier analysis here
adbe_antm_spo.create_returns(adbe_antm_allocation,'ADBE_ANTM SPO Framework')</pre><p><img alt="g19" class="aligncenter img-responsive size-full wp-image-13935" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/g19.png" src="./Optimal Portfolio Construction Using Machine Learning_files/g19.png" style="height:278px; width:403px"><br>Let's repeat this process for our AET_ANTM implementation.<br><br><strong>AET_ANTM SPO Framework Implementation</strong></p><pre>#creating instance of updated statarb strategy
aet_antm_spo=statarb_update(aet_test, antm_test, 1,12,-2, 2,12,'05/01/18','06/12/18',aet_antm_regime_predictions,'Avoid',avoid1=1,target1=0,exit_zscore=0)</pre><pre>#creating spread
aet_antm_spo.create_spread()
#generating signals
aet_antm_spo.generate_signals()
#getting performance
#notice that we are passing in our efficient frontier weight amount here
aet_antm_spo.create_returns(aet_antm_allocation,'AET_ANTM SPO Framework')</pre><p><img alt="g20" class="aligncenter img-responsive size-full wp-image-13936" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/g20.png" src="./Optimal Portfolio Construction Using Machine Learning_files/g20.png" style="height:278px; width:407px"><br><strong>We Can Now Compose Our SPO Framework Portfolio</strong></p><pre>#creating dataframe for SPO Portfolio
spo_portfolio=pd.DataFrame()
spo_portfolio['ADBE_ANTM']=adbe_antm_spo.portfolio['Portfolio Value']
spo_portfolio['AET_ANTM']=aet_antm_spo.portfolio['Portfolio Value']
spo_portfolio['Cash']=10000
spo_portfolio['Total Portfolio Value']=spo_portfolio['ADBE_ANTM']+spo_portfolio['AET_ANTM']+spo_portfolio['Cash']</pre><p><strong>Let's Now Compute the Returns of Our SPO Framework Portfolio</strong></p><pre>#adding returns column to SPO Portfolio dataframe
spo_portfolio['Returns']=np.log(spo_portfolio['Total Portfolio Value']/spo_portfolio['Total Portfolio Value'].shift(1))</pre><pre>spo_portfolio_mu=spo_portfolio['Returns'].mean()
spo_portfolio_sigma=spo_portfolio['Returns'].std()
#recall that we initialized our interest assumption earlier
spo_portfolio_sharpe=(spo_portfolio_mu-rate)/spo_portfolio_sigma</pre><p><strong>Let's Plot the Equity Curve of Our SPO Portfolio</strong></p><pre>plt.figure(figsize=(10,6))
plt.plot(spo_portfolio['Total Portfolio Value'])
plt.title('SPO Portfolio Equity Curve')
plt.show()</pre><p><img alt="g21" class="aligncenter img-responsive size-full wp-image-13937" data-cke-saved-src="https://d1rwhvwstyk9gu.cloudfront.net/2018/08/g21.png" src="./Optimal Portfolio Construction Using Machine Learning_files/g21.png" style="height:367px; width:609px"><br>We can now compare the Sharpe Ratios of each of our portfolios. &nbsp;</p><h3><strong>Relative Portfolio Performance Assessment</strong></h3><p><strong>Whew!</strong><br><br>We can now create a dataframe to hold our Sharpe ratios and compare our results.<br><br>Let's create the variables that we use to create our dataframe.</p><pre>#list to hold portfolio names
names=['Equally Weighted','Efficient Frontier','Bottom Up','SPO Framework']
#variable to hold column name
column_name='Sharpe Ratio'
#list to hold Sharpe Ratios
sharpes=[equally_weighted_Sharpe,efficient_frontier_portfolio_sharpe,bottom_up_portfolio_sharpe,spo_portfolio_sharpe]</pre><p>We'll now use our variables to create our dataframe.</p><pre>#creating dataframe to compare Sharpe Ratios of Portfolios
portfolio_assessment=pd.DataFrame({column_name:sharpes},index=names)</pre><p>Okay. We can now check our dataframe and compare our Sharpe Ratios.</p><pre>portfolio_assessment
</pre><table border="1" class="dataframe"><thead><tr><th><br></th><th>Sharpe Ratio</th></tr></thead><tbody><tr><th>Equally Weighted</th><td>-2.100000</td></tr><tr><th>Efficient Frontier</th><td>-7.697951</td></tr><tr><th>Bottom Up</th><td>-0.719018</td></tr><tr><th>SPO Framework</th><td>-6.743110</td></tr></tbody></table><p>Let's create a dataframe to compare the ending values of our portfolios.</p><pre>#creating list to hold ending values of portfolios
#We pass in 1 into the tail method because it represents the last index position
portfolio_values=[equally_weighted['Total Portfolio Value'].tail(1).values.astype(int),efficient_frontier_portfolio['Total Portfolio Value'].tail(1).values.astype(int),bottom_up_portfolio['Total Portfolio Value'].tail(1).values.astype(int),spo_portfolio['Total Portfolio Value'].tail(1).values.astype(int)]
#creating dataframe to hold ending value of portfolios
pd.DataFrame({'Ending Portfolio Values':portfolio_values},index=names)</pre><table border="1" class="dataframe"><thead><tr><th><br></th><th>Ending Portfolio Values</th></tr></thead><tbody><tr><th>Equally Weighted</th><td>[124853]</td></tr><tr><th>Efficient Frontier</th><td>[140402]</td></tr><tr><th>Bottom Up</th><td>[86225]</td></tr><tr><th>SPO Framework</th><td>[137868]</td></tr></tbody></table><p>Okay. We can see that our best Sharpe Ratio was achieved within the Bottom Up Portfolio. But, the Bottom Up Portfolio yielded the worst ending portfolio value.<br><br>Recall that our Bottom Up implementation built on our equally weighted portfolio except that it, instead of solely weighing the strategies equally, optimized the portfolio by applying our GMM to historical regime detection and used Random Forests to predict which of our historical regimes our current market state fell in.<br><br>Our SPO Framework repeated this process except that it used the weights found by our Efficient Frontier analysis.<br><br>In the SPO and Efficient Frontier implementations, we zeroed out the second pair, ANTM_AET based on the results of our analysis.</p><h3><strong>Review</strong></h3><p><strong>We've covered an immense amount of information in this post.</strong></p><ul style="margin-left: 40px;"><li>We began by learning what the SPO Framework is.</li><li>We gained some understanding of Gaussian Mixture Models and how they relate to K-Means Clustering as well as Random Forests.</li><li>We learned that the portfolio optimization problem is similar to the premise of ensembles of which is a key assumption of the SPO Framework.</li><li>We reviewed how to use fundamental features and K-Means to find pairs for our StatArb strategy.</li><li>We also reviewed how to find the most optimal value for K.</li><li>We created four StatArb intraday portfolios with varying approaches to the portfolio optimization problem.</li><li>Over this period, we found that the Bottom Up implementation yielded the best Sharpe Ratio, despite yielding the worst performance.</li><li>Some key considerations are the fact that in reality, we wouldn't allocate as much capital to a single strategy as we did in the case of the AET_ANTM pair.</li><li>This was due to the skewed results of our Efficient Frontier analysis of which yielded results based on the on our unoptimized pairs.</li><li>Also, the regime in which we avoided in the ANTM_AET implementation in the Bottom Up Portfolio apparently accounted for all of the observations of our test period and thus zeroed out this pair over our test period in this portfolio, but this pair was removed by the Efficient Frontier analysis from our SPO Framework Portfolio.</li><li>Thus the primary difference between these portfolios is the weights used.</li></ul><p>A key takeaway from this introduction to the SPO Framework is that a portfolio can be viewed as the sum of 'n' market microstructures.<br><br>The Stereoscopic Portfolio Optimization approach to the portfolio optimization problem is a framework and not a hard and fast model.<br><br>As such, the Efficient Frontier, Gaussian Mixture Models, and Random Forests can be substituted with other top-down and bottom-up techniques, top-down being methods that focus on asset allocation and bottom being those that focus on applying machine learning to the market microstructure of component assets.<br><br>This microstructure component is not limited to volatility but can be liquidity, order arrival rates, etc.</p><h3><strong>Next Steps</strong></h3><p>Portfolio managers and quants who wish to construct their portfolio quantitatively, generate returns and manage risks effectively can check out <a data-cke-saved-href="https://quantra.quantinsti.com/course/quantitative-portfolio-management" target="_blank" href="https://quantra.quantinsti.com/course/quantitative-portfolio-management">this course</a> where you&nbsp;will learn different portfolio&nbsp;management techniques such as Factor Investing, Risk Parity and Kelly Portfolio, and Modern Portfolio Theory.</p><p>If you’re interested in learning more about Machine Learning for Trading, Quantinsti offers both a self-paced option, via our <a data-cke-saved-href="http://www.quantra.quantinsti.com/" target="_blank" href="http://www.quantra.quantinsti.com/">Quantra</a> Online Learning Portal, and a comprehensive quantitative trading regimen, the <a data-cke-saved-href="https://www.quantinsti.com/epat" href="https://www.quantinsti.com/epat" target="_blank">Executive Program in Algorithmic Trading (EPAT<sup>®</sup>)</a>.</p><br><p><small><em>Disclaimer: All investments and trading in the stock market involve risk. Any decisions to place trades in the financial markets, including trading in stock or options or other financial instruments is a personal decision that should only be made after thorough research, including a personal risk and financial assessment and the engagement of professional assistance to the extent you believe necessary. The trading strategies or related information mentioned in this article is for informational purposes only.</em></small></p><h3><strong>Files in the download</strong></h3><ul><li>Optimal Portfolio Construction Using Machine Learning - Data Files</li></ul><!--{cke_protected}{C}%3C!%2D%2Dmore%2D%2D%3E--><p style="text-align:center"><a class="download-button sso-login"> Login to Download </a></p><!--kg-card-end: html--></div>


          <!-- start: CTA -->
          <div class="cta-content">
            <a href="https://quantra.quantinsti.com/course/quantitative-portfolio-management" target="_blank"><img src="./Optimal Portfolio Construction Using Machine Learning_files/QPM.png" alt=""></a>
          </div>
          <!-- end: CTA -->

          <!-- start: .share-buttons -->
          <div class="share-buttons section remove-margine">
            <h5 class="title small">Share Article:</h5>
            <a class="whatsapp button circle hide-on-tablet hide-on-desktop" href="whatsapp://send?text=https://blog.quantinsti.com/optimal-portfolio-construction-machine-learning/" aria-label="share-post-whatsapp" data-action="share/whatsapp/share"><i class="fa fa-whatsapp"></i></a>
            <a class="facebook button circle" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.quantinsti.com/optimal-portfolio-construction-machine-learning/" aria-label="share-post-facebook" onclick="window.open(this.href, &#39;facebook-share&#39;,&#39;width=580,height=296&#39;);return false;"><i class="fa fa-facebook"></i></a>
            <a class="twitter button circle" href="http://twitter.com/share?text=Optimal%20Portfolio%20Construction%20Using%20Machine%20Learning&amp;url=https://blog.quantinsti.com/optimal-portfolio-construction-machine-learning/" aria-label="share-post-twitter" onclick="window.open(this.href, &#39;twitter-share&#39;, &#39;width=550,height=235&#39;);return false;"><i class="fa fa-twitter"></i></a>
            <a class="linkdin button circle" href="http://www.linkedin.com/shareArticle?mini=true&amp;url=https://blog.quantinsti.com/optimal-portfolio-construction-machine-learning/" aria-label="share-post-linkdin" onclick="window.open(this.href, &#39;linkdin-share&#39;, &#39;width=490,height=530&#39;);return false;"><i class="fa fa-linkedin"></i></a>
            <a href="mailto:?subject=Optimal%20Portfolio%20Construction%20Using%20Machine%20Learning&amp;body=https://blog.quantinsti.com/optimal-portfolio-construction-machine-learning/" class="email button circle" target="_blank" aria-label="share-post-mailto"><i class="fa fa-envelope"></i></a>
            <div class="clear"></div>
            <div class="permalink">
              <input type="text" name="shortlink" value="https://blog.quantinsti.com/optimal-portfolio-construction-machine-learning/" id="copy-link" aria-label="url" readonly="">
              <span class="copy"><svg>
                  <use xlink:href="#copy"></use>
                </svg></span>
            </div>
          </div>
          <!-- end: .share-buttons -->

        </section>
      </article>
      <div class="clear"></div>

      <section class="related section bordered">
        <!--<h3 class="title bordered">You might be interested in...</h3>-->
        <article class="prev grid-50 tablet-grid-50 grid-parent">
          <a href="https://blog.quantinsti.com/linear-discriminant-analysis-quantitative-portfolio-management/" class="full-link" aria-label="feature-prev"></a>
          <div class="info">
            <time datetime="2018-07-27">Jul 27, 2018</time>
            <h4 class="title white no-margin">Using Linear Discriminant Analysis For Quantitative Portfolio Management</h4>
          </div>
          <span class="button"><img src="./Optimal Portfolio Construction Using Machine Learning_files/left-arrow.svg" width="15" alt="left-arrow"></span>
          <div class="overlay"></div>
        </article>

        <article class="next grid-50 tablet-grid-50 grid-parent">
          <a href="https://blog.quantinsti.com/calculating-covariance-matrix-portfolio-variance/" class="full-link" aria-label="feature-next"></a>
          <div class="info">
            <time datetime="2018-12-27">Dec 27, 2018</time>
            <h4 class="title white no-margin">Calculating The Covariance Matrix And Portfolio Variance</h4>
          </div>
          <span class="button"><img src="./Optimal Portfolio Construction Using Machine Learning_files/right-arrow.svg" width="15" alt="right-arrow"></span>
          <div class="overlay"></div>
        </article>
        <div class="clear"></div>
      </section>

      <div class="clear"></div>

      <section class="post-full-comments">
        <script data-isso-vote="false" data-isso-reply-to-self="false" data-isso="https://blog.quantinsti.com/isso" data-isso-feed="false" src="./Optimal Portfolio Construction Using Machine Learning_files/embed.min.js.téléchargement">
        </script>
          <section id="isso-thread" data-title="Optimal Portfolio Construction Using Machine Learning"><h4>8 commentaires</h4><div class="login-section"><button class="login-button-isso">Sign Up To Comment</button></div><div id="isso-root"><div id="isso-550" class="isso-comment"><div class="avatar"><img src="./Optimal Portfolio Construction Using Machine Learning_files/photo.jpg"></div><div style="margin-left:12%" class="text-wrapper"><div role="meta" class="isso-comment-header"><span class="author">Ameya</span><span class="spacer">•</span><a href="https://blog.quantinsti.com/optimal-portfolio-construction-machine-learning/?fbclid=IwAR3qIUNFX9I-RaeefUokHS-OdM2uMvnsqn49ErN05pQybtU5EM68DH5P_iQ#isso-550" class="permalink"><time title="Sat Jul 13 2019 11:41:09 GMT+0200 (heure d’été d’Europe centrale)" datetime="2019-06-06T09:41:09Z">Il y a 9 mois</time></a><span class="note"></span></div><div class="text"><p>Hello,
Could you make data files and code available for download please ? At the moment, it is not downloadable. I'd like to try running the code myself 
Thanks in advance!
Ameya</p></div><div class="isso-follow-up"><div id="isso-559" class="isso-comment"><div class="avatar"><svg version="1.1" viewBox="0 0 48 48" preserveAspectRatio="xMinYMin meet" shape-rendering="crispEdges" data-hash="f3404b14d715"><rect x="0" y="0" width="56" height="56" style="fill: #f0f0f0"></rect><rect x="4" y="20" width="8" height="8" style="fill: #f19670"></rect><rect x="36" y="20" width="8" height="8" style="fill: #f19670"></rect><rect x="4" y="28" width="8" height="8" style="fill: #f19670"></rect><rect x="36" y="28" width="8" height="8" style="fill: #f19670"></rect><rect x="12" y="4" width="8" height="8" style="fill: #f19670"></rect><rect x="28" y="4" width="8" height="8" style="fill: #f19670"></rect><rect x="12" y="20" width="8" height="8" style="fill: #f19670"></rect><rect x="28" y="20" width="8" height="8" style="fill: #f19670"></rect><rect x="12" y="28" width="8" height="8" style="fill: #f19670"></rect><rect x="28" y="28" width="8" height="8" style="fill: #f19670"></rect><rect x="12" y="36" width="8" height="8" style="fill: #f19670"></rect><rect x="28" y="36" width="8" height="8" style="fill: #f19670"></rect><rect x="20" y="28" width="8" height="8" style="fill: #f19670"></rect></svg></div><div style="margin-left:12%" class="text-wrapper"><div role="meta" class="isso-comment-header"><span class="author">QuantInsti</span><span class="spacer">•</span><a href="https://blog.quantinsti.com/optimal-portfolio-construction-machine-learning/?fbclid=IwAR3qIUNFX9I-RaeefUokHS-OdM2uMvnsqn49ErN05pQybtU5EM68DH5P_iQ#isso-559" class="permalink"><time title="Thu Aug 01 2019 12:29:53 GMT+0200 (heure d’été d’Europe centrale)" datetime="2019-07-04T10:29:53Z">Il y a 8 mois</time></a><span class="note"></span></div><div class="text"><p>We have fixed the download. You can now access the code by Logging in/Signing up.</p></div><div class="isso-follow-up"></div></div></div></div></div></div><div id="isso-553" class="isso-comment"><div class="avatar"><img src="./Optimal Portfolio Construction Using Machine Learning_files/photo(1).jpg"></div><div style="margin-left:12%" class="text-wrapper"><div role="meta" class="isso-comment-header"><span class="author">davide digioia</span><span class="spacer">•</span><a href="https://blog.quantinsti.com/optimal-portfolio-construction-machine-learning/?fbclid=IwAR3qIUNFX9I-RaeefUokHS-OdM2uMvnsqn49ErN05pQybtU5EM68DH5P_iQ#isso-553" class="permalink"><time title="Tue Jul 16 2019 11:00:51 GMT+0200 (heure d’été d’Europe centrale)" datetime="2019-06-02T09:00:51Z">Il y a 9 mois</time></a><span class="note"></span></div><div class="text"><p>How can I download it?</p></div><div class="isso-follow-up"><div id="isso-560" class="isso-comment"><div class="avatar"><svg version="1.1" viewBox="0 0 48 48" preserveAspectRatio="xMinYMin meet" shape-rendering="crispEdges" data-hash="f3404b14d715"><rect x="0" y="0" width="56" height="56" style="fill: #f0f0f0"></rect><rect x="4" y="20" width="8" height="8" style="fill: #f19670"></rect><rect x="36" y="20" width="8" height="8" style="fill: #f19670"></rect><rect x="4" y="28" width="8" height="8" style="fill: #f19670"></rect><rect x="36" y="28" width="8" height="8" style="fill: #f19670"></rect><rect x="12" y="4" width="8" height="8" style="fill: #f19670"></rect><rect x="28" y="4" width="8" height="8" style="fill: #f19670"></rect><rect x="12" y="20" width="8" height="8" style="fill: #f19670"></rect><rect x="28" y="20" width="8" height="8" style="fill: #f19670"></rect><rect x="12" y="28" width="8" height="8" style="fill: #f19670"></rect><rect x="28" y="28" width="8" height="8" style="fill: #f19670"></rect><rect x="12" y="36" width="8" height="8" style="fill: #f19670"></rect><rect x="28" y="36" width="8" height="8" style="fill: #f19670"></rect><rect x="20" y="28" width="8" height="8" style="fill: #f19670"></rect></svg></div><div style="margin-left:12%" class="text-wrapper"><div role="meta" class="isso-comment-header"><span class="author">QuantInsti</span><span class="spacer">•</span><a href="https://blog.quantinsti.com/optimal-portfolio-construction-machine-learning/?fbclid=IwAR3qIUNFX9I-RaeefUokHS-OdM2uMvnsqn49ErN05pQybtU5EM68DH5P_iQ#isso-560" class="permalink"><time title="Thu Aug 01 2019 12:30:41 GMT+0200 (heure d’été d’Europe centrale)" datetime="2019-07-04T10:30:41Z">Il y a 8 mois</time></a><span class="note"></span></div><div class="text"><p>You can download the code by Logging in/Signing up, and then press the download button at the end of the blog.</p></div><div class="isso-follow-up"></div></div></div><div id="isso-581" class="isso-comment"><div class="avatar"><img src="./Optimal Portfolio Construction Using Machine Learning_files/photo.jpg"></div><div style="margin-left:12%" class="text-wrapper"><div role="meta" class="isso-comment-header"><span class="author">Ameya</span><span class="spacer">•</span><a href="https://blog.quantinsti.com/optimal-portfolio-construction-machine-learning/?fbclid=IwAR3qIUNFX9I-RaeefUokHS-OdM2uMvnsqn49ErN05pQybtU5EM68DH5P_iQ#isso-581" class="permalink"><time title="Thu Aug 15 2019 07:27:09 GMT+0200 (heure d’été d’Europe centrale)" datetime="2019-07-04T05:27:09Z">Il y a 8 mois</time></a><span class="note"></span></div><div class="text"><p></p><ol>
<li>Download button in not visible.</li>
<li>By checking correctly selected tag on html if we try to hit the button it gives 400 message (resource not found)
Could you check and fix the bug please?</li>
</ol><p></p></div><div class="isso-follow-up"></div></div></div><div id="isso-583" class="isso-comment"><div class="avatar"><svg version="1.1" viewBox="0 0 48 48" preserveAspectRatio="xMinYMin meet" shape-rendering="crispEdges" data-hash="f3404b14d715"><rect x="0" y="0" width="56" height="56" style="fill: #f0f0f0"></rect><rect x="4" y="20" width="8" height="8" style="fill: #f19670"></rect><rect x="36" y="20" width="8" height="8" style="fill: #f19670"></rect><rect x="4" y="28" width="8" height="8" style="fill: #f19670"></rect><rect x="36" y="28" width="8" height="8" style="fill: #f19670"></rect><rect x="12" y="4" width="8" height="8" style="fill: #f19670"></rect><rect x="28" y="4" width="8" height="8" style="fill: #f19670"></rect><rect x="12" y="20" width="8" height="8" style="fill: #f19670"></rect><rect x="28" y="20" width="8" height="8" style="fill: #f19670"></rect><rect x="12" y="28" width="8" height="8" style="fill: #f19670"></rect><rect x="28" y="28" width="8" height="8" style="fill: #f19670"></rect><rect x="12" y="36" width="8" height="8" style="fill: #f19670"></rect><rect x="28" y="36" width="8" height="8" style="fill: #f19670"></rect><rect x="20" y="28" width="8" height="8" style="fill: #f19670"></rect></svg></div><div style="margin-left:12%" class="text-wrapper"><div role="meta" class="isso-comment-header"><span class="author">QuantInsti</span><span class="spacer">•</span><a href="https://blog.quantinsti.com/optimal-portfolio-construction-machine-learning/?fbclid=IwAR3qIUNFX9I-RaeefUokHS-OdM2uMvnsqn49ErN05pQybtU5EM68DH5P_iQ#isso-583" class="permalink"><time title="Fri Aug 16 2019 09:43:56 GMT+0200 (heure d’été d’Europe centrale)" datetime="2019-07-05T07:43:56Z">Il y a 8 mois</time></a><span class="note"></span></div><div class="text"><p>Thanks for pointing it out. The button is fixed and you can now download the files.</p></div><div class="isso-follow-up"></div></div></div></div></div></div><div id="isso-582" class="isso-comment"><div class="avatar"><svg version="1.1" viewBox="0 0 48 48" preserveAspectRatio="xMinYMin meet" shape-rendering="crispEdges" data-hash="0319c66c2308"><rect x="0" y="0" width="56" height="56" style="fill: #f0f0f0"></rect><rect x="4" y="36" width="8" height="8" style="fill: #9abf88"></rect><rect x="36" y="36" width="8" height="8" style="fill: #9abf88"></rect><rect x="12" y="28" width="8" height="8" style="fill: #9abf88"></rect><rect x="28" y="28" width="8" height="8" style="fill: #9abf88"></rect><rect x="12" y="36" width="8" height="8" style="fill: #9abf88"></rect><rect x="28" y="36" width="8" height="8" style="fill: #9abf88"></rect><rect x="20" y="36" width="8" height="8" style="fill: #9abf88"></rect></svg></div><div style="margin-left:12%" class="text-wrapper"><div role="meta" class="isso-comment-header"><span class="author">Rishi Srivastava</span><span class="spacer">•</span><a href="https://blog.quantinsti.com/optimal-portfolio-construction-machine-learning/?fbclid=IwAR3qIUNFX9I-RaeefUokHS-OdM2uMvnsqn49ErN05pQybtU5EM68DH5P_iQ#isso-582" class="permalink"><time title="Thu Aug 15 2019 23:53:24 GMT+0200 (heure d’été d’Europe centrale)" datetime="2019-07-04T21:53:24Z">Il y a 8 mois</time></a><span class="note"></span></div><div class="text"><p>Download button is missing even though I am logged in.</p></div><div class="isso-follow-up"><div id="isso-584" class="isso-comment"><div class="avatar"><svg version="1.1" viewBox="0 0 48 48" preserveAspectRatio="xMinYMin meet" shape-rendering="crispEdges" data-hash="f3404b14d715"><rect x="0" y="0" width="56" height="56" style="fill: #f0f0f0"></rect><rect x="4" y="20" width="8" height="8" style="fill: #f19670"></rect><rect x="36" y="20" width="8" height="8" style="fill: #f19670"></rect><rect x="4" y="28" width="8" height="8" style="fill: #f19670"></rect><rect x="36" y="28" width="8" height="8" style="fill: #f19670"></rect><rect x="12" y="4" width="8" height="8" style="fill: #f19670"></rect><rect x="28" y="4" width="8" height="8" style="fill: #f19670"></rect><rect x="12" y="20" width="8" height="8" style="fill: #f19670"></rect><rect x="28" y="20" width="8" height="8" style="fill: #f19670"></rect><rect x="12" y="28" width="8" height="8" style="fill: #f19670"></rect><rect x="28" y="28" width="8" height="8" style="fill: #f19670"></rect><rect x="12" y="36" width="8" height="8" style="fill: #f19670"></rect><rect x="28" y="36" width="8" height="8" style="fill: #f19670"></rect><rect x="20" y="28" width="8" height="8" style="fill: #f19670"></rect></svg></div><div style="margin-left:12%" class="text-wrapper"><div role="meta" class="isso-comment-header"><span class="author">QuantInsti</span><span class="spacer">•</span><a href="https://blog.quantinsti.com/optimal-portfolio-construction-machine-learning/?fbclid=IwAR3qIUNFX9I-RaeefUokHS-OdM2uMvnsqn49ErN05pQybtU5EM68DH5P_iQ#isso-584" class="permalink"><time title="Fri Aug 16 2019 09:44:43 GMT+0200 (heure d’été d’Europe centrale)" datetime="2019-07-05T07:44:43Z">Il y a 8 mois</time></a><span class="note"></span></div><div class="text"><p>The button is now fixed and you can now download the files.</p></div><div class="isso-follow-up"></div></div></div></div></div></div></div></section>
      </section>          
    

      <!-- start: .pagination -->
      <div class="pagination">

        <div class="clear"></div>
      </div>
      <!-- end: .pagination-->

      <div class="clear"></div>
    </div>
    <!-- end: .content -->

    <!-- start: #sidebar -->
<aside id="sidebar" role="complementary" class="grid-30 tablet-grid-30 hide-on-tablet hide-on-mobile">
  <div class="main-sidebar">
    <section class="widget search custom-search">
      <form action="https://blog.quantinsti.com/optimal-portfolio-construction-machine-learning/?fbclid=IwAR3qIUNFX9I-RaeefUokHS-OdM2uMvnsqn49ErN05pQybtU5EM68DH5P_iQ" method="get" class="hide-on-tablet hide-on-mobile">
        <input type="text" name="s" value="" aria-label="search" class="search-field-mobile" placeholder="Search in the blog..." required="">
        <button type="submit" class="submit" aria-label="search-anything"><i class="fa fa-search"></i></button>
      </form>
      <div class="clear"></div>
    </section>

    <section class="custom-side-bar">
      <div class="custom-card-side-bar">
        <h3>Career Growth</h3>
          <ul>
            <li class="gradient-effect"><a href="https://blog.quantinsti.com/tag/industry">Industry</a></li>
            <li class="gradient-effect"><a href="https://blog.quantinsti.com/tag/jobs-skills">Jobs &amp; Skills</a></li>
            <li class="gradient-effect"><a href="https://blog.quantinsti.com/tag/trading-desk-setup">Trading Desk Setup</a></li>
            <li class="gradient-effect"><a href="https://blog.quantinsti.com/tag/success-stories">Success Stories</a></li>
            <li class="gradient-effect"><a href="https://blog.quantinsti.com/tag/epat-trading-projects">EPAT Trading Projects</a></li>
          </ul>
      </div>

      <div class="custom-card-side-bar">
        <h3>Tutorials</h3>
          <ul>
            <li class="gradient-effect"><a href="https://blog.quantinsti.com/tag/automated-trading">Automated Trading</a></li>
            <li class="gradient-effect"><a href="https://blog.quantinsti.com/tag/excel-r-for-trading">Excel &amp; R For Trading</a>
            </li>
            <li class="gradient-effect"><a href="https://blog.quantinsti.com/tag/forex-crypto-trading">Forex &amp; Crypto Trading</a>
            </li>
            <li class="gradient-effect"><a href="https://blog.quantinsti.com/tag/machine-learning">Machine Learning</a></li>
            <li class="gradient-effect"><a href="https://blog.quantinsti.com/tag/mathematics-econometrics">Maths and Econometrics</a></li>
            <li class="gradient-effect"><a href="https://blog.quantinsti.com/tag/mean-reversion-statistical-arbitrage">Mean Reversion
                &amp; Statistical Arbitrage
            </a></li><li class="gradient-effect"><a href="https://blog.quantinsti.com/tag/momentum-trading">Momentum Trading</a></li>
            <li class="gradient-effect"><a href="https://blog.quantinsti.com/tag/more-trading-strategies">More Trading Strategies</a>
            </li>
            <li class="gradient-effect"><a href="https://blog.quantinsti.com/tag/options-trading">Options Trading</a></li>
            <li class="gradient-effect"><a href="https://blog.quantinsti.com/tag/portfolio-risk-management">Portfolio &amp; Risk
                Management</a></li>
            <li class="gradient-effect"><a href="https://blog.quantinsti.com/tag/python-for-trading">Python For Trading</a></li>
            <li class="gradient-effect"><a href="https://blog.quantinsti.com/tag/sentiment-trading">Sentiment Trading</a></li>
            <li class="gradient-effect"><a href="https://blog.quantinsti.com/tag/technical-indicators">Technical Indicators</a></li>
          </ul>
      </div>
    </section>

    <section class="subscribe-custom">
      <a href="https://quantra.quantinsti.com/course/quantitative-portfolio-management" target="_blank"><img src="./Optimal Portfolio Construction Using Machine Learning_files/QPM-1.png" alt=""></a>
      <div class="clear"></div>
    </section>
  </div>
</aside>
<!-- end: #sidebar -->

    <div class="clear"></div>

  </div>
  <!-- end: .center -->
  <!-- start: #pop-up -->
<div class="pop-up-overlay">
  <div class="body-popup">
    <div class="popup-goto">
    </div>
    <div class="close-poup">
      <i class="fa fa-close" aria-hidden="true"></i>
    </div>
  </div>
</div>
<!-- end: #pop-up --></main>
<!-- end: #single -->



    <!-- start: #footer -->
<footer id="footer" class="grid-container np-mobile">
  <div class="widgets">
    <div class="clear hide-on-desktop"></div>
    <div class="widget text-widget grid-33">
      <div class="widget-content">
        <h3 class="title white bordered">About</h3>
        <ul>
          <li><a href="https://www.quantinsti.com/" target="_blank" rel="noopener">QuantInsti</a></li>
          <li><a href="https://quantra.quantinsti.com/" target="_blank" rel="noopener">Quantra</a></li>
          <li><a href="https://quantra-blueshift.quantinsti.com/" target="_blank" rel="noopener">Blueshift</a></li>
        </ul>
      </div>
    </div>

    <div class="widget text-widget grid-33">
      <div class="widget-content">
        <h3 class="title white bordered">Events &amp; Announcements</h3>
        <ul>
          <li><a href="https://blog.quantinsti.com/tag/announcements">Announcements</a></li>
          <li><a href="https://blog.quantinsti.com/tag/webinars">Webinars</a></li>
        </ul>
      </div>
    </div>

    <div class="widget text-widget grid-33">
      <div class="widget-content">
        <h3 class="title white bordered">Quick Links</h3>
        <ul>
          <li><a href="https://www.quantinsti.com/contact-us" target="_blank" rel="noopener">Contact Us</a></li>
          <li><a href="https://www.quantinsti.com/privacy-policy" target="_blank" rel="noopener">Privacy Policy</a></li>
        </ul>
      </div>
    </div>

    <div class="clear"></div>
  </div>
  <p class="published border-effect">Copyright © 2020  <a href="https://www.quantinsti.com/" target="_blank" rel="noopener">QuantInsti.com</a>  All Rights Reserved.</p>

  <a href="javascript:void(0)" id="back-to-top" class="button dark" aria-label="back to top"><i class="fa fa-chevron-up"></i></a>

</footer>
<!-- end: #footer -->

    <div id="search-results" class="mfp-hide grid-container section"></div>
  </div>
  <!-- end: #wrapper -->

  <script type="text/javascript" id="primary-script" src="./Optimal Portfolio Construction Using Machine Learning_files/scripts.min.js.téléchargement" defer=""></script>

  <script>
    document.getElementById('primary-script').addEventListener('load', function() {
        Injection.notification({
            show_notification: 'yes',
            storage_point: 'not30',
            text_to_display: "Quantra Course Prices Slashed By 50%",
            show_timer: 'no',
            campaign_end_date: '2020-03-20T00:30:00.000Z',
            campaign_button_text: 'Enroll Here!',
            campaign_url: 'https://quantra.quantinsti.com/courses',
        });
        Injection.popup({
            show_popup: 'no',
            time_to_open: 10000,
            storage_point: 'dsw1s33',
            src: 'https://d1rwhvwstyk9gu.cloudfront.net/2019/10/SEB.png',
            link: 'https://www.quantinsti.com/epat',
            show_form: 'yes',
            headerText: 'Learn Algo Trading - Join EPAT',
            form_link: 'https://www.quantinsti.com/epat-blog-popup',
            thankyou_page: 'https://www.quantinsti.com/thank-you-blog-popup',
            redirectLink: 'https://www.quantinsti.com',
            redirect_url: '/thank-you-blog-popup/',
            blog_list: [
				'/salary-quants-really-earn/',
                '/algorithmic-trading-india/',
       			'/algorithmic-trading-strategies/',
				'/learn-algorithmic-trading/',
				'/calculating-covariance-matrix-portfolio-variance/',
				'/fama-french-five-factor-asset-pricing-model/',
				'/creating-heatmap-using-python-seaborn/',
				'/stock-market-data-analysis-python/',
				'/indicators-build-trend-following-strategy/',
				'/making-career-algorithmic-trading/',
				'/evolution-trading-barter-system-algo-trading/',
				'/setting-up-an-algo-trading-desk/',
				'/sharpe-ratio-applications-algorithmic-trading/',
				'/growth-future-algorithmic-trading/',
				'/essential-books-algorithmic-trading/',
				'/automated-market-making-overview/',
				'/market-microstructure/',
				'/short-term-courses-mba-finance/',
				'/google-finance-download-historical-prices/',
				'/top-backtesting-platforms-for-quants/',
				'/salary-quants-really-earn/',
				'/evolution-trading-barter-system-algo-trading/',
				'/top-quantitative-algorithmic-trading-blogs-2017/',
				'/algorithmic-trading-india/',
  				'/growth-future-algorithmic-trading/',
				'/sebi-guidelines-extended-market-hours-impact-traders/',
				'/pivot-point-prediction-movement/',
				'/fundamental-analysis-performed-algorithmic-trading/',
				'/financial-engineering-courses-india/',
				'/why-you-should-be-doing-algorithmic-trading/',
				'/can-i-be-a-quant-trader-in-my-40s/',
				'/how-hedge-funds-use-leverage/',
				'/can-mba-finance-become-quant/',
				'/7-things-you-didnt-know-about-algorithmic-trading/',
				'/5-things-know-starting-algorithmic-trading/',
				'/candid-discussion-algorithmic-trader/',
				'/backtesting/',
				'/choose-quantitative-trading-platform-2/',
				'/paradigms-of-trading-strategy-formulation/',
				'/long-term-investment-vs-high-frequency-trading/',
				'/questions-algorithmic-trading/',
				'/alexis-stenfors-webinar-30-january-2019/',
				'/trading-coding-skills-algorithmic-trading/',
				'/tips-start-business-algorithmic-trading/',
				'/beginners-guide-algorithmic-trading/',
				'/top-blogs-on-trading-strategies-of-2018/',
				'/8-spread-trading-tips-for-beginners/',
				'/market-data-faq/',
				'/bayesian-inference/',
				'/algorithmic-trading-gain-ground-2019/',
				'/academic-backgrounds-algo-trading/',
				'/stochastic-oscillator/',
				'/stochastic-rsi-atr-indicator/',
				'/head-shoulders-pattern/',
				'/stock-market-data-analysis-python/',
                '/algorithmic-trading-epat/',
                '/upskilling-quant-era/',
                '/algorithmic-trading-career-engineers-technocrats/',
                '/aspirations-achievements-lester-journey-algorithmic-trading/',
                '/algorithmic-trade-execution-different-asset-classes/',
                '/automated-trading-system/',
                '/sharpe-ratio-applications-algorithmic-trading/',
                '/install-tensorflow-gpu/',
                '/gini-index/',
                '/machine-learning-k-nearest-neighbors-knn-algorithm-python/',
                '/algorithmic-trading-maths/',
                '/time-series-analysis/'
            ]
        });
        $("a[href^=http]").each(function(){
          var excluded = [];
          for(i=0; i<excluded.length; i++) {
             if(this.href.indexOf(excluded[i]) != -1) {
                return true;
             }
          }
          if(this.href.indexOf(location.hostname) == -1) {
               $(this).click(function() { return true; }); 
               $(this).attr({
                   target: "_blank"
               });
               $(this).click();
          }
       });
    }); 
</script>
<script type="text/javascript" async="" src="./Optimal Portfolio Construction Using Machine Learning_files/MathJax.js.téléchargement">
    MathJax.Hub.Config({
        CommonHTML: {linebreaks: { automatic: true}},
  		SVG: {linebreaks: { automatic: true}},
  		"HTML-CSS": {linebreaks: { automatic: true}},
        showMathMenu: false,
        tex2jax: {
            inlineMath: [["\\(", "\\)"]],
            processEscapes: true,
        }
    });
</script>

  <!-- start: #cookie-policy -->
<div class="cookie-policy block-cookies" style="display: block;">
  <div class="cookies-pull-tap">
    <span class="cookie-policy-header">Our cookie policy <i class="fa fa-caret-up"></i></span>
  </div>
  <div class="main-container-cookie" style="display: none;">
    <div class="cookie-content">
      <span class="cookie-description">We use cookies (necessary for website functioning) for analytics, to give you the
        best user experience, and to show you content tailored to your interests on our site and third-party sites. By
        closing this banner, scrolling this page, clicking a link or continuing to use our site, you consent to our use
        of cookies. <a href="https://www.quantinsti.com/privacy-policy#privacyPolicy" target="_blank" class="read-more" rel="noopener">Read more</a></span>
    </div>
    <div class="last-cookie-panel">
      <a class="btn cookie-accept btn-black-patch" href="javascript:;">Accept</a>
    </div>
  </div>
</div>
<!-- end: #cookie-policy -->
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WHQTVCL" height="0" width="0"
      style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->




<script type="text/javascript" id="">pidTracker("13692");</script>
<iframe src="./Optimal Portfolio Construction Using Machine Learning_files/webPushAnalytics.html" style="display: none;"></iframe></body></html>